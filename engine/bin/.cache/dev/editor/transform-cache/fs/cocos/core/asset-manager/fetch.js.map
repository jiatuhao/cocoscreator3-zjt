{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/asset-manager/fetch.ts"],"names":["fetch","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","depends","__exclude__","Object","create","output","item","cb","isNative","assets","has","uuid","asset","get","addRef","handle","__asyncLoadAssets__","packManager","load","err","data","isFinish","legacyCC","assetManager","force","message","stack","dispatch","subTask","Task","onProgress","onError","prototype","recycle","onComplete","push","decreaseRef","fetchPipeline","async","i","l","content","decRef","file","loadDepends","last","exclude","config"],"mappings":"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"}