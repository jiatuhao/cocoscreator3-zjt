{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/audio/assets/player-dom.ts"],"names":["AudioManagerDom","AudioManager","discardOnePlayingIfNeeded","_playingAudios","length","maxAudioChannel","audioToDiscard","oldestOneShotIndex","findIndex","audio","HTMLAudioElement","splice","pause","src","shift","stop","AudioPlayerDOM","AudioPlayer","constructor","info","_volume","_loop","_nativeAudio","_cbRegistered","_remove_cb","_post_play","_on_gesture","_post_gesture","nativeAudio","legacyCC","game","canvas","removeEventListener","_state","PlayingState","PLAYING","_clip","emit","_manager","addPlaying","_interrupted","currentTime","promise","play","director","once","Director","EVENT_AFTER_UPDATE","then","volume","loop","addEventListener","STOPPED","removePlaying","_blocking","setCurrentTime","catch","playOneShot","dom","errMsg","console","error","val","_duration","getCurrentTime","setVolume","immediate","getVolume","setLoop","getLoop","destroy"],"mappings":"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"}