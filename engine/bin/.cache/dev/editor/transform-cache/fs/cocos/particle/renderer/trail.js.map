{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/particle/renderer/trail.ts"],"names":["PRE_TRIANGLE_INDEX","NEXT_TRIANGLE_INDEX","DIRECTION_THRESHOLD","Math","cos","_temp_trailEle","position","Vec3","velocity","_temp_quat","Quat","_temp_xform","Mat4","_temp_vec3","_temp_vec3_1","_temp_color","Color","TrailSegment","constructor","maxTrailElementNum","start","end","trailElements","push","lifetime","width","direction","color","getElement","idx","length","addElement","splice","newEleLoc","iterateElement","target","f","p","dt","i","count","clear","TrailModule","TrailMode","CurveRange","Space","TextureMode","GradientRange","enable","_enable","val","_trailModel","_particleSystem","processor","updateTrailMaterial","_createModel","rebuild","enabled","onEnable","onDisable","minParticleDistance","_minParticleDistance","_minSquaredDistance","space","_space","_vertSize","_trailNum","_trailLifetime","vbOffset","ibOffset","_trailSegments","_particleTrail","_iaInfo","_iaInfoBuffer","_subMeshData","_vertAttrs","_vbF32","_vbUint32","_iBuffer","_needTransform","_material","IndirectBuffer","DrawInfo","Attribute","AttributeName","ATTR_POSITION","Format","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","a","FormatInfos","format","size","Map","onInit","ps","burstCount","psTime","startLifetime","getMax","psRate","rateOverTime","duration","len","bursts","b","getMaxCount","ceil","lifeTime","Pool","_attachToScene","_detachFromScene","scene","_getRenderScene","addModel","removeModel","destroy","destroySubMeshData","director","root","destroyModel","obj","play","trailIter","values","trail","next","done","value","updateRenderData","updateMaterial","getMaterialInstance","_defaultTrailMat","setSubModelMaterial","update","evaluate","_time","World","_simulationSpace","Local","node","getWorldMatrix","getWorldRotation","animate","scaledDt","get","alloc","set","lastSeg","transformMat4","copy","_updateTrailElement","squaredDistance","widthFromParticle","x","widthRatio","trailNum","lastSecondTrail","subtract","lastThirdTrail","equals","ZERO","normalize","_checkDirectionReverse","colorFromParticle","colorOvertime","removeParticle","free","delete","keys","trailSeg","indexOffset","textCoordSeg","startSegEle","_fillVertexBuffer","colorOverTrail","segEle","j","y","z","updateIA","subModels","subModel","inputAssembler","vertexBuffers","indexBuffer","drawInfos","firstIndex","indexCount","beforeRender","legacyCC","createModel","Model","device","vertexBuffer","createBuffer","BufferInfo","BufferUsageBit","VERTEX","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","vBuffer","ArrayBuffer","Float32Array","Uint32Array","INDEX","Uint16Array","BYTES_PER_ELEMENT","INDIRECT","DRAW_INFO_SIZE","vertexCount","RenderingSubMesh","PrimitiveMode","TRIANGLE_LIST","trailModel","transform","visFlags","visibility","initSubModel","module","trailEle","multiply","remainingLifetime","colorModifer","xTexCoord","trailEleIdx","indexSet","_val","currElement","prevElement","dot","serializable","Particles","Stretch"],"mappings":"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"}