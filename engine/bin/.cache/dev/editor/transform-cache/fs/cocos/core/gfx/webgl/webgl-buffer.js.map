{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/gfx/webgl/webgl-buffer.ts"],"names":["WebGLBuffer","Buffer","_gpuBuffer","_gpuBufferView","_uniformBuffer","gpuBuffer","gpuBufferView","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","offset","size","Math","max","stride","BufferUsageBit","INDIRECT","_indirectBuffer","IndirectBuffer","BufferFlagBit","BAKUP_BUFFER","_bakcupBuffer","Uint8Array","_device","memoryStatus","bufferSize","UNIFORM","vf32","indirects","glTarget","glBuffer","drawInfos","destroy","resize","console","warn","oldSize","oldView","set","update","buffSize","undefined","byteLength","view"],"mappings":"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"}