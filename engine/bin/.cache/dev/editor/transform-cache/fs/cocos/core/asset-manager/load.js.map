{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/asset-manager/load.ts"],"names":["load","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","__exclude__","Object","create","output","item","cb","subTask","Task","onProgress","onComplete","err","result","isFinish","legacyCC","assetManager","force","EDITOR","message","stack","dispatch","push","recycle","loadOneAssetPipeline","async","Pipeline","fetch","isNative","uuid","file","reloadAsset","assets","has","packManager","data","parse","exclude","id","parser","ext","asset","content","files","remove","parsed","callbacks","addRef","get","__asyncLoadAssets__","loadDepends","__uuid__","init","config","cacheAsset","depends","repeatItem","onError","prototype","decRef","Array","isArray","map","dependAsset","Asset","_uuid","__nativeDepend__","onLoaded","__onLoadedInvoked__","e","i","l","pipeline"],"mappings":"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"}