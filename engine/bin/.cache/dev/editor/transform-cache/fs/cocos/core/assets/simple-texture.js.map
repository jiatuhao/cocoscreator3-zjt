{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/assets/simple-texture.ts"],"names":["_regions","BufferTextureCopy","getMipLevel","width","height","size","Math","max","level","isPOT","n","canGenerateMipmap","device","w","h","needCheckPOT","gfxAPI","API","WEBGL","SimpleTexture","TextureBase","_gfxTexture","_mipmapLevel","_textureWidth","_textureHeight","mipmapLevel","getGFXTexture","destroy","_tryDestroyTexture","updateImage","updateMipmaps","firstLevel","count","uploadData","source","arrayIndex","gfxDevice","_getGFXDevice","region","texExtent","texSubres","mipLevel","baseArrayLayer","DEV","HTMLElement","name","ArrayBuffer","isView","copyBuffersToTexture","copyTexImagesToTexture","_assignImage","image","upload","data","_checkTextureLoaded","macro","CLEANUP_IMAGE_CACHE","deps","dependUtil","getDeps","_uuid","index","indexOf","decRef","loaded","once","isCompressed","defaultImg","legacyCC","builtinResMgr","get","assetManager","postLoadNative","_textureReady","emit","_setMipmapLevel","value","_getGfxTextureCreateInfo","presumed","_tryReset","_createTexture","_width","_height","flags","TextureFlagBit","NONE","_mipFilter","Filter","GEN_MIPMAP","textureCreateInfo","usage","TextureUsageBit","SAMPLED","TRANSFER_DST","format","_getGFXFormat","levelCount","IMMUTABLE","texture","createTexture"],"mappings":"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"}