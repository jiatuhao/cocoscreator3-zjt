{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics/ammo/shapes/ammo-shape.ts"],"names":["v3_0","CC_V3_0","AmmoShape","updateEventListener","setMaterial","v","_isTrigger","_isEnabled","_btCompound","_index","friction","restitution","rollingFriction","spinningFriction","_sharedBody","body","setFriction","setRestitution","setRollingFriction","setSpinningFriction","setUserIndex2","setCenter","Vec3","copy","multiply","_collider","node","worldScale","transform","getOrigin","updateCompoundTransform","setAsTrigger","removeShape","addShape","attachedRigidBody","wrappedBody","rigidBody","impl","_btShape","collider","sharedBody","index","constructor","type","id","_isBinding","quat","scale","idCounter","Ammo","btQuaternion","btTransform","setIdentity","btVector3","getAABB","TRANS","AmmoConstant","instance","TRANSFORM","setRotation","QUAT_0","worldRotation","MIN","VECTOR3_0","MAX","VECTOR3_1","getAabb","halfExtents","set","x","y","z","add","center","worldPosition","getBoundingSphere","radius","getLocalBoundingSphere","initialize","com","onComponentSet","setWrapper","PhysicsSystem","physicsWorld","getSharedBody","reference","onLoad","isTrigger","onEnable","sharedMaterial","onDisable","onDestroy","shape","castObject","btCollisionShape","wrapped","destroy","EMPTY_SHAPE","getGroup","collisionFilterGroup","setGroup","addGroup","removeGroup","getMask","collisionFilterMask","setMask","addMask","removeMask","setCompound","compound","removeChildShape","getNumChildShapes","addChildShape","setScale","updateChildTransform","bodyStruct","useCompound","dirty","EAmmoSharedBodyDirty","BODY_RE_ADD","needCompound","AmmoBroadphaseNativeTypes","TERRAIN_SHAPE_PROXYTYPE","equals","ZERO","debugTransform","n","_debugTransform","wt","ghost","getWorldTransform","lt","op_mul","origin","rotation","getRotation","Quat","w","getLocalScaling"],"mappings":"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"}