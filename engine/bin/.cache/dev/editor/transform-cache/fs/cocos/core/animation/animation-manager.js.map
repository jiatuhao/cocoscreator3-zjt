{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/animation/animation-manager.ts"],"names":["AnimationManager","ccclass","System","_anims","MutableForwardIterator","_delayEvents","_blendStateBuffer","BlendStateBuffer","_crossFades","_sockets","blendState","addCrossFade","crossFade","push","removeCrossFade","update","dt","i","l","length","iterator","array","anim","isMotionless","apply","stamp","legacyCC","director","getTotalFrames","target","transform","matrix","event","fn","thisArg","args","destruct","addAnimation","index","indexOf","removeAnimation","fastRemoveAt","pushDelayEvent","addSockets","root","sockets","socket","find","s","targetNode","getChildByPath","path","removeSockets","socketToRemove","j","node","ID","on","Director","EVENT_INIT","animationManager","registerSystem","Scheduler","PRIORITY_SYSTEM"],"mappings":"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"}