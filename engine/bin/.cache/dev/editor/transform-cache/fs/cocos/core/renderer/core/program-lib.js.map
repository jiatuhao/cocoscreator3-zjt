{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/renderer/core/program-lib.ts"],"names":["_dsLayoutInfo","DescriptorSetLayoutInfo","getBitCount","cnt","Math","ceil","log2","max","mapDefine","info","def","type","toString","undefined","options","range","console","warn","prepareDefines","defs","tDefs","macros","i","length","tmpl","name","v","value","isDefault","push","getShaderInstanceName","reduce","acc","cur","insertBuiltinBindings","tmplInfo","source","outBindings","target","builtins","tempBlocks","blocks","b","layouts","binding","bindings","find","bd","descriptorType","DESCRIPTOR_BUFFER_TYPE","includes","Array","prototype","unshift","apply","gfxBlocks","tempSamplers","samplers","s","DESCRIPTOR_SAMPLER_TYPE","gfxSamplers","sort","a","getSize","block","members","m","count","genHandles","handleMap","offset","j","uniform","PropertyType","UBO","SetIndex","MATERIAL","sampler","SAMPLER","dependencyCheck","dependencies","defines","d","slice","getActiveAttributes","out","attributes","gfxAttributes","ProgramLib","_templates","_cache","_templateInfos","register","effect","shaders","define","effectName","shader","curTmpl","hash","_map","findIndex","_offset","uber","samplerStartBinding","blockSizes","DescriptorSetLayoutBinding","DescriptorType","UNIFORM_BUFFER","stageFlags","UniformBlock","map","Uniform","UniformSampler","attr","Attribute","format","isNormalized","isInstanced","location","localDescriptorSetLayout","gfxStages","ShaderStage","ShaderStageFlagBit","VERTEX","FRAGMENT","hPipelineLayout","NULL_HANDLE","setLayouts","getTemplate","getTemplateInfo","getDescriptorSetLayout","device","isLocal","createDescriptorSetLayout","LOCAL","hasProgram","getKey","tmplDefs","key","tmplDef","mapped","destroyShaderByDefines","names","Object","keys","regexes","val","RegExp","filter","k","every","re","test","ShaderPool","get","prog","log","destroy","getGFXShader","pipeline","assign","res","globalDescriptorSetLayout","GLOBAL","descriptorSetLayout","PipelineLayoutPool","alloc","PipelineLayoutInfo","macroArray","prefix","src","glsl3","deviceShaderVersion","getDeviceShaderVersion","error","vert","frag","instanceName","shaderInfo","ShaderInfo","gfxAPI","API","GLES2","WEBGL","GLES3","WEBGL2","programLib","legacyCC"],"mappings":"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"}