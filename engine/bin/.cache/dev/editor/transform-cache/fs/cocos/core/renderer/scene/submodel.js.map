{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/renderer/scene/submodel.ts"],"names":["_dsInfo","DescriptorSetInfo","SubModel","_device","_passes","_subMesh","_patches","_handle","NULL_HANDLE","_priority","RenderPriority","DEFAULT","_inputAssembler","_descriptorSet","passes","_flushPassInfo","DSPool","free","SubModelPool","get","SubModelView","DESCRIPTOR_SET","layout","localSetLayout","dsHandle","alloc","set","subMesh","destroy","initialize","iaInfo","batchingScheme","BatchingSchemes","VB_MERGING","genFlatBuffers","SUB_MESH","handle","priority","val","PRIORITY","inputAssembler","descriptorSet","patches","planarShaderHandel","PLANAR_SHADER","legacyCC","director","root","device","iaHandle","IAPool","INPUT_ASSEMBLER","initPlanarShadowShader","pipeline","shadowInfo","shadows","shaderHandle","getPlanarShader","update","i","length","pass","onPipelineStateChanged","beginChangeStatesSilently","tryCompile","endChangeStatesSilently","onMacroPatchesStateChanged","PASS_COUNT","passOffset","PASS_0","shaderOffset","SHADER_0","getShaderVariant"],"mappings":"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"}