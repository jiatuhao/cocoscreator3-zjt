{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics-2d/framework/physics-system.ts"],"names":["instance","PhysicsSystem2D","System","enable","_enable","value","allowSleep","_allowSleep","v","EDITOR","physicsWorld","setAllowSleep","gravity","_gravity","set","setGravity","Vec2","x","PHYSICS_2D_PTM_RATIO","y","maxSubSteps","_maxSubSteps","fixedTimeStep","_fixedTimeStep","autoSimulation","_autoSimulation","debugDrawFlags","PHYSICS_NONE","physicsEngineId","PHYSICS_BUILTIN","PHYSICS_BOX2D","stepping","_steping","constructor","velocityIterations","positionIterations","collisionMatrix","CollisionMatrix","_accumulator","_delayEvents","config","game","physics","copy","multiplyScalar","i","bit","parseInt","postUpdate","deltaTime","director","emit","Director","EVENT_BEFORE_PHYSICS","substepIndex","step","events","l","length","event","func","call","target","syncPhysicsToScene","drawDebug","EVENT_AFTER_PHYSICS","_callAfterStep","push","resetAccumulator","time","raycast","p1","p2","type","ERaycast2DType","Closest","mask","testPoint","p","testAABB","rect","ID","once","EVENT_INIT","initPhysicsSystem","registerSystem"],"mappings":"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"}