{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/2d/renderer/batcher-2d.ts"],"names":["_dsInfo","DescriptorSetInfo","m4_1","Mat4","Batcher2D","currBufferBatch","_currMeshBuffer","acquireBufferBatch","buffer","batches","_batches","attributes","VertexFormat","vfmtPosUvColor","strideBytes","getAttributeStride","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","MeshBuffer","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","i","length","splice","currStaticRoot","value","_currStaticRoot","constructor","_root","device","_screens","RecyclePool","_drawBatchPool","_meshBuffers","Map","_meshBufferUseCount","_doUploadBuffersCall","_emptyMaterial","Material","_currScene","_currMaterial","_currTexture","_currSampler","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_parentOpacity","_descriptorSetCache","DescriptorSetCache","CachedArray","Pool","DrawBatch2D","destroy","array","size","keys","forEach","obj","clear","StencilManager","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","idx","indexOf","sortScreens","addUploadBuffersFunc","target","func","removeUploadBuffersFunc","delete","update","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","hDescriptorSet","getDescriptorSet","addBatch","uploadBuffers","calls","key","list","call","bb","reset","customs","isStatic","free","commitComp","frame","assembler","transform","renderComp","texture","samp","textureHash","samplerHash","getGFXTexture","getGFXSampler","getHash","getSamplerHash","_getRenderScene","mat","getRenderMaterial","stencilStage","stage","blendTargetHash","blendHash","depthStencilStateStage","autoMergeBatches","fillBuffers","_applyOpacity","commitModel","depthStencil","dssHash","Stage","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","legacyCC","director","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","alloc","subModel","visFlags","bufferBatch","sampler","useLocalData","fillPasses","patches","SubModelPool","handle","SubModelView","DESCRIPTOR_SET","hInputAssembler","INPUT_ASSEMBLER","commitStaticBatch","concat","drawBatchList","finishMergeBatches","hIA","recordBatch","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","sys","__isWebIOS14OrIPadOS14Env","forceMergeBatches","material","flushMaterial","walk","level","len","children","parentOpacity","_uiProps","opacity","_preProcess","_static","child","_postProcess","uiTransformComp","render","uiComp","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","a","b","getSiblingIndex","color","currMeshBuffer","vBuf","vData","lastByteOffset","stride","OPACITY_OFFSET","_releaseDescriptorSetCache","releaseDescriptorSetCache","LocalDescriptorSet","_handle","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","UBOLocal","COUNT","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","SIZE","layout","passes","localSetLayout","DSPool","_descriptorSet","bindBuffer","BINDING","binding","ModelLocalBindings","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","MAT_WORLD_IT_OFFSET","_localDescriptorSetCache","_localCachePool","caches","cache","localDs","descriptorSetTextureMap","has","descriptorSet","map","internal"],"mappings":"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"}