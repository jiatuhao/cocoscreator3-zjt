{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/audio/assets/player-web.ts"],"names":["AudioManagerWeb","AudioManager","discardOnePlayingIfNeeded","_playingAudios","length","maxAudioChannel","audioToDiscard","oldestOneShotIndex","findIndex","audio","AudioBufferSourceNode","splice","shift","stop","AudioPlayerWeb","AudioPlayer","constructor","info","_startTime","_offset","_volume","_loop","_currentTimer","_nativeAudio","_context","_sourceNode","_gainNode","_startInvoked","_onEndedCB","_onGestureCB","_onGestureProceedCB","audioSupport","sys","__audioSupport","nativeAudio","context","createBufferSource","createGain","connect","destination","_onEnded","bind","_onGesture","_onGestureProceed","state","resume","legacyCC","game","canvas","addEventListener","play","_state","PlayingState","PLAYING","pause","setCurrentTime","_blocking","_interrupted","_doPlay","_doStop","currentTime","STOPPED","clearInterval","playOneShot","volume","catch","err","console","error","_manager","gainNode","gain","value","sourceNode","buffer","loop","start","addPlaying","onended","removePlaying","val","duration","_duration","getCurrentTime","setVolume","immediate","setTargetAtTime","e","getVolume","setLoop","getLoop","destroy","director","once","Director","EVENT_AFTER_UPDATE","_playAndEmit","window","setInterval","off","_clip","emit","removeEventListener","then"],"mappings":"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"}