{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/asset-manager/utilities.ts"],"names":["defaultProgressCallback","setDefaultProgressCallback","onProgress","clear","task","clearRef","i","l","input","length","item","isNative","content","Asset","decRef","recycle","urlAppendTimestamp","url","append","test","Date","now","retry","process","times","wait","onComplete","index","err","result","setTimeout","getDepends","uuid","data","exclude","depends","preload","asyncLoadAssets","config","info","dependUtil","parse","includeNative","__nativeDepend__","EDITOR","preventDeferredLoadDependents","deps","dep","push","__asyncLoadAssets__","bundle","name","preventPreloadNativeObject","nativeDep","e","message","stack","cache","id","asset","cacheAsset","undefined","legacyCC","assetManager","assets","add","setProperties","assetsMap","missingAsset","__depends__","missingAssetReporter","depend","dependAsset","EditorExtends","MissingReporter","object","stashByOwner","owner","prop","serialize","asAsset","addRef","reference","references","get","reportByOwner","_nativeAsset","console","error","gatherAsset","source","options","__outputAsArray__","output","forEach","array","count","errs","cb","parseParameters","optionsOut","onProgressOut","onCompleteOut","isCallback","Object","create","parseLoadResArgs","type","typeOut","isValidType","js","isChildClassOf","checkCircleReference","map","checked","getDeps","asyncify","p1","p2","refs","Array","isArray","x"],"mappings":"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"}