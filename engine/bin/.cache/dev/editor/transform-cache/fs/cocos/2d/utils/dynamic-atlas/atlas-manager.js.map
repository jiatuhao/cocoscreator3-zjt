{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"names":["DynamicAtlasManager","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","enabled","value","reset","legacyCC","director","on","Director","EVENT_BEFORE_SCENE_LAUNCH","beforeSceneLoad","off","maxAtlasCount","atlasCount","length","textureBleeding","enable","textureSize","maxFrameSize","newAtlas","atlas","Atlas","push","insertSpriteFrame","spriteFrame","EDITOR","_original","packable","frame","i","l","destroy","deleteAtlasSpriteFrame","texture","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","packedFrame","_setDynamicAtlasFrame","instance","dynamicAtlasManager","internal"],"mappings":"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"}