{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/gfx/webgl2/webgl2-buffer.ts"],"names":["WebGL2Buffer","Buffer","_gpuBuffer","gpuBuffer","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","size","stride","_bakcupBuffer","indirects","glTarget","glBuffer","glOffset","offset","Math","max","BufferUsageBit","INDIRECT","_indirectBuffer","IndirectBuffer","BufferFlagBit","BAKUP_BUFFER","Uint8Array","_device","memoryStatus","bufferSize","drawInfos","destroy","resize","console","warn","oldSize","oldView","set","update","buffSize","undefined","byteLength","view"],"mappings":"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"}