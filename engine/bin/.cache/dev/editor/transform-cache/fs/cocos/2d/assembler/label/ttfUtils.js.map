{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/2d/assembler/label/ttfUtils.ts"],"names":["Overflow","Label","MAX_SIZE","_BASELINE_OFFSET","_context","_canvas","_texture","_fontDesc","_string","_fontSize","_drawFontsize","_splitStrings","_canvasSize","Size","_lineHeight","_hAlign","_vAlign","_color","Color","_fontFamily","_overflow","NONE","_isWrapText","_outlineComp","_outlineColor","BLACK","clone","_shadowComp","_shadowColor","_canvasPadding","Rect","_contentSizeExtend","ZERO","_nodeContentSize","_startPosition","Vec2","_drawUnderlinePos","_drawUnderlineWidth","_underlineThickness","_isBold","_isItalic","_isUnderline","Alignment","ttfUtils","getAssemblerData","sharedLabelData","_canvasPool","get","resetAssemblerData","assemblerData","put","updateRenderData","comp","renderData","vertDirty","trans","node","_uiProps","uiTransformComp","_updateFontFamily","_updateProperties","_calculateLabelFont","_updateLabelDimensions","_resetDynamicAtlas","_updateTexture","_calDynamicAtlas","actualFontSize","setContentSize","updateVertexData","updateUvs","markForUpdateRenderData","useSystemFont","font","_nativeAsset","assetManager","postLoadNative","err","isValid","fontFamily","context","canvas","spriteFrame","string","toString","fontSize","overflow","width","height","underlineHeight","lineHeight","horizontalAlign","verticalAlign","color","isBold","isItalic","isUnderline","RESIZE_HEIGHT","enableWrapText","LabelOutline","getComponent","enabled","set","LabelShadow","_updatePaddingRect","top","bottom","left","right","outlineWidth","shadowWidth","blur","offsetX","offset","x","offsetY","y","Math","max","tan","_calculateFillTextStartPosition","labelX","HorizontalTextAlignment","RIGHT","CENTER","_getLineHeight","drawStartY","length","firstLinelabelY","BASELINE_RATIO","VerticalTextAlignment","TOP","blank","BOTTOM","clearRect","lineJoin","fillStyle","r","g","b","drawTextPosX","drawTextPosY","_drawTextEffect","i","strokeText","fillText","shadowColor","tex","SpriteFrame","texture","uploadAgain","reset","mipmapLevel","uploadData","rect","_calculateUV","legacyCC","director","root","batcher2D","_releaseDescriptorSetCache","getHash","cacheMode","CacheMode","BITMAP","frame","ttfSpriteFrame","dynamicAtlasManager","deleteAtlasSpriteFrame","_resetDynamicAtlasFrame","packToDynamicAtlas","uvDirty","_setupOutline","strokeStyle","a","lineWidth","_setupShadow","shadowBlur","shadowOffsetX","shadowOffsetY","startPosition","isMultiple","measureText","_measureText","fillRect","min","recreate","textAlign","textBaseline","_getFontDesc","fontDesc","nodeSpacingY","_calculateParagraphLength","paragraphedStrings","ctx","paragraphLength","para","push","_calculateShrinkFont","totalHeight","maxLength","canvasWidthNoMargin","canvasHeightNoMargin","textFragment","mid","allWidth","scaleX","scaleY","_calculateWrapText","concat","split","canvasSizeX","canvasSizeY","paraLength","rawWidth","parseFloat","toFixed","rawHeight","SHRINK","CLAMP"],"mappings":"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"}