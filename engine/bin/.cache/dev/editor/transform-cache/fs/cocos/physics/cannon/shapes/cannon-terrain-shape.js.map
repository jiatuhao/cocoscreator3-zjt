{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics/cannon/shapes/cannon-terrain-shape.ts"],"names":["CANNON_AABB_LOCAL","CANNON","AABB","CANNON_AABB","CANNON_TRANSFORM","Transform","Heightfield","prototype","calculateWorldAABB","pos","quat","min","max","frame","result","Vec3","copy","position","Quat","quaternion","s","elementSize","data","lowerBound","set","minValue","upperBound","length","maxValue","toWorldFrame","CannonTerrainShape","CannonShape","collider","_collider","impl","_shape","setTerrain","v","_terrainID","_uuid","terrain","sizeI","getVertexCountI","sizeJ","getVertexCountJ","DATA","i","j","getHeight","OPTIONS","tileSize","updateProperties","constructor","onComponentSet","onLoad","updateMinValue","updateMaxValue","updateBoundingSphereRadius","update","_index","_body","_setCenter","fromEuler","_orient","lpos","_offset","add"],"mappings":"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"}