{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/2d/assembler/label/bmfontUtils.ts"],"names":["LetterInfo","char","valid","x","y","line","hash","_tmpRect","Rect","_comp","_uiTrans","_horizontalKerning","_lettersInfo","_linesWidth","_linesOffsetX","_labelDimensions","Size","_lineBreakWithoutSpaces","_contentSize","letterPosition","Vec2","_lineSpacing","_fntConfig","_numberOfLines","_textDesiredHeight","_letterOffsetY","_tailoredTopY","_tailoredBottomY","_bmfontScale","_spriteFrame","_string","_fontSize","_originFontSize","_hAlign","_vAlign","_spacingX","_lineHeight","_overflow","_isWrapText","_labelWidth","_labelHeight","_maxLineWidth","bmfontUtils","updateRenderData","comp","renderData","vertDirty","node","_uiProps","uiTransformComp","_updateFontFamily","_updateProperties","_updateLabelInfo","_updateContent","actualFontSize","setContentSize","uvDirty","_resetProperties","_updateFontScale","fontAsset","font","spriteFrame","fntConfig","shareLabelInfo","fontAtlas","fontDefDictionary","dynamicAtlasManager","packToDynamicAtlas","margin","string","toString","fontSize","horizontalAlign","verticalAlign","spacingX","overflow","contentSize","width","height","Overflow","NONE","RESIZE_HEIGHT","enableWrapText","lineHeight","_setupBMFontOverflowMetrics","_computeHorizontalKerningForText","_alignText","stringLen","length","kerningDict","horizontalKerning","prev","i","key","charCodeAt","kerningAmount","_multilineTextWrap","nextTokenFunc","textLen","lineIndex","nextTokenX","nextTokenY","longestLine","letterRight","highestY","lowestY","letterDef","index","character","charAt","push","_getFontScale","_recordPlaceholderInfo","tokenLen","tokenHighestY","tokenLowestY","tokenRight","nextLetterX","newLine","tmp","letterIndex","getLetterDefinitionForChar","console","log","atlasName","letterX","offsetX","w","offsetY","_recordLetterInfo","xAdvance","h","parseFloat","toFixed","_getFirstCharLen","SHRINK","_getFirstWordLen","text","startIndex","len","_multilineTextWrapByWord","_multilineTextWrapByChar","tmpInfo","getLetter","_computeAlignmentOffset","_isVerticalClamp","_shrinkLabelToContentSize","_updateQuads","_isHorizontalClamp","_scaleFontSizeDown","shouldUpdateContent","lambda","left","right","mid","newFontSize","letterClamp","ctr","l","letterInfo","px","wordWidth","_isHorizontalClamped","letterOverClamp","texture","getTexture","dataLength","vertexCount","indicesCount","anchorPoint","appX","appY","ret","warn","u","v","py","clipTop","CLAMP","isRotated","_determineRect","letterPositionX","appendQuad","rect","rotated","scale","originalSize","getOriginalSize","getRect","offset","getOffset","trimmedLeft","trimmedTop","originalX","HorizontalTextAlignment","LEFT","CENTER","RIGHT","VerticalTextAlignment","TOP","blank","BOTTOM","newWidth","newHeight"],"mappings":"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"}