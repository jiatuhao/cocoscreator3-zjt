{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/utils/prefab-utils.ts"],"names":["compareStringArray","array1","array2","length","every","value","index","TargetInfo","serializable","TargetOverrideInfo","CCObject","legacyCC","Node","PrefabInfo","editable","_PrefabInfo","CompPrefabInfo","PropertyOverrideInfo","isTarget","localID","propPath","EDITOR","targetInfo","propertyPath","MountedChildrenInfo","PrefabInstance","targetMap","findPropertyOverride","i","propertyOverrides","propertyOverride","removePropertyOverride","splice","createNodeWithPrefab","node","prefabInfo","_prefab","prefabInstance","instance","asset","name","_objFlags","_parent","_id","game","_isCloning","SUPPORT_JIT","_doInstantiate","prefabRoot","data","_iN$t","instantiate","_clone","generateTargetMap","isRoot","curTargetMap","fileId","components","comp","__prefab","children","childNode","getTarget","target","targetIter","applyMountedChildren","mountedChildren","childInfo","nodes","_children","push","_onBatchCreated","applyPropertyOverrides","propOverride","targetPropOwner","slice","targetPropName","pop","propName","Array","isArray","Number","parseInt","isInteger","applyTargetOverrides","targetOverrides","targetOverride","source","sourceInfo","sourceInstance","targetInstance"],"mappings":"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"}