{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/physics/physx/physx-world.ts"],"names":["triggerEventBeginDic","TupleDictionary","triggerEventEndDic","triggerEventsPool","onTrigger","type","wpa","wpb","collider","needTriggerEvent","tE","length","pop","a","b","times","set","id","emitTriggerEvent","len","getLength","key","getKeyByIndex","data","getDataByKey","push","dataBeg","colliderA","colliderB","TriggerEventObject","selfCollider","otherCollider","emit","reset","isValid","contactEventDic","contactEventsPool","onCollision","c","d","o","needCollisionEvent","cE","contactCount","buffer","offset","contactsPool","emitCollisionEvent","CollisionEventObject","impl","contacts","apply","i","PhysXContactEquation","eventCallback","onContactBegin","onContactEnd","onContactPersist","onTriggerBegin","onTriggerEnd","queryCallback","preFilter","filterData","shape","_actor","_out","USE_BYTEDANCE","shapeFlags","getFlags","word3","PX","ShapeFlag","eTRIGGER_SHAPE","QueryHitType","eNONE","eBLOCK","eTOUCH","isSet","PxShapeFlag","PxQueryHitType","PhysXWorld","setAllowSleep","_v","setDefaultMaterial","setGravity","gravity","scene","constructor","physics","cooking","queryfilterData","singleResult","mutipleResults","simulationCB","queryFilterCB","wrappedBodies","mutipleResultSize","cp","CookingParams","createCooking","sceneDesc","createSceneDesc","simulation","SimulationEventCallback","setOnContact","_header","pairs","shapes","pairBuf","pairBuffer","pairL","ui16View","Uint16Array","flags","shape0","shape1","shapeA","shapeB","events","contactBuffer","setOnTrigger","pairsBuf","ca","cb","QueryFilterCallback","setPreFilter","word0","word1","word2","setSimulationEventCallback","createScene","PxRaycastHit","PxRaycastHitVector","resize","PxQueryFilterData","PxSimulationEventCallback","implement","PxQueryFilterCallback","version","PX_PHYSICS_VERSION","defaultErrorCallback","PxDefaultErrorCallback","allocator","PxDefaultAllocator","foundation","PxCreateFoundation","scale","PxTolerancesScale","PxCreateCooking","PxCookingParams","PxCreatePhysics","PxInitExtensions","getDefaultSceneDesc","getTolerancesScale","destroy","release","step","deltaTime","_timeSinceLastCalled","_maxSubStep","simulate","fetchResults","body","syncPhysicsToScene","syncSceneToPhysics","syncAfterEvents","syncSceneWithCheck","getSharedBody","node","wrappedBody","PhysXSharedBody","addActor","index","indexOf","removeActor","addConstraint","_constraint","removeConstraint","raycast","worldRay","options","pool","results","maxDistance","queryTrigger","mask","r","SceneQueryExt","raycastMultiple","block","result","add","_assign","position","distance","normal","setWords","setFlags","blocks","size","get","getShape","console","error","raycastClosest","raycastSingle","emitEvents"],"mappings":"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"}