{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/dragon-bones/assembler/simple.ts"],"names":["NEED_COLOR","NEED_BATCH","STRIDE_FLOAT","STRIDE_BYTES","_boneColor","Color","_slotColor","_originColor","_nodeR","_nodeG","_nodeB","_nodeA","_premultipliedAlpha","_multiply","_mustFlush","_buffer","_node","_batcher","_comp","_vfOffset","_indexOffset","_vertexOffset","_vertexCount","_indexCount","_x","_y","_c","Float32Array","_handleVal","_m00","_m04","_m12","_m01","_m05","_m13","_vec3u_temp","Vec3","_getSlotMaterial","tex","blendMode","src","dst","BlendFactor","ONE","SRC_ALPHA","DST_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_SRC_COLOR","setBlendHash","getMaterialForBlend","_handleColor","color","parentOpacity","_a","a","_r","r","_g","g","_b","b","_intToColor","v","simple","createData","updateRenderData","comp","ui","updateComponentRenderData","updateColor","fillBuffers","renderer","meshRenderDataArray","length","dataArray","node","buffer","acquireBufferBatch","floatOffset","byteOffset","indicesOffset","vertexOffset","data","_meshRenderDataArrayIdx","renderData","isRecreate","request","vertexCount","indicesCount","currBufferBatch","vBuf","vData","iBuf","iData","matrix","worldMatrix","srcVBuf","srcVIdx","vertexStart","srcIBuf","set","slice","_enableBatch","i","pOffset","transformMat4","x","y","z","srcIOffset","indicesStart","realTimeTraverse","armature","parentMat","slots","_slots","vbuf","ibuf","material","vertices","indices","slotColor","slot","slotMat","Mat4","l","_color","_visible","_displayData","_mulMat","_worldMatrix","_matrix","copy","childArmature","getTexture","_blendMode","texture","requestMeshRenderData","_localVertices","_indices","rd","reserve","vDataOffset","m00","m04","m12","m01","m05","m13","vi","vl","ii","il","advance","cacheTraverse","frame","segments","colorArray","Uint32Array","frameVFOffset","frameIndexOffset","segVFCount","justTranslate","needBatch","calcTranslate","colorOffset","colors","nowColor","maxVFOffset","vfOffset","n","segInfo","indexCount","vfCount","jj","frameColorOffset","batcher","_armature","markForUpdateRenderData","destroyRenderData","premultipliedAlpha","nodeColor","_val","worldMat","isAnimationCached","_curFrame","graphics","_debugDraw","debugBones","clear","lineWidth","strokeColor","fillColor","bones","getBones","bone","boneLength","Math","max","boneData","startX","globalTransformMatrix","tx","startY","ty","endX","endY","moveTo","lineTo","stroke","circle","PI","fill","attachUtil","_syncAttachedNode","undefined","legacyCC","internal","DragonBonesAssembler"],"mappings":"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"}