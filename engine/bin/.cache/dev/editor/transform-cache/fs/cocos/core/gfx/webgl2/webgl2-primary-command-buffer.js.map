{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/gfx/webgl2/webgl2-primary-command-buffer.ts"],"names":["_dynamicOffsets","WebGL2PrimaryCommandBuffer","WebGL2CommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","_device","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","inputAssembler","_isStateInvalied","bindStates","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","BufferUsageBit","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGL2CmdBuff","cmdPackage","length","_curDynamicOffsets","Array","prototype","push","apply","_curGPUInputAssembler","_curGPUDescriptorSets","_curViewport","_curScissor","_curLineWidth","_curDepthBias","_curBlendConstants","_curDepthBounds","_curStencilWriteMask","_curStencilCompareMask"],"mappings":"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"}