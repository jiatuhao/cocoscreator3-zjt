{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/gfx/webgl2/webgl2-command-buffer.ts"],"names":["WebGL2CommandBuffer","CommandBuffer","cmdPackage","WebGL2CmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUDescriptorSets","_curGPUInputAssembler","_curDynamicOffsets","_curViewport","_curScissor","_curLineWidth","_curDepthBias","_curBlendConstants","_curDepthBounds","_curStencilWriteMask","_curStencilCompareMask","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","WebGL2CmdBeginRenderPass","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","WebGL2Cmd","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSets","gpuDescriptorSet","offsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","Viewport","left","top","width","height","minDepth","maxDepth","setScissor","scissor","Rect","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","constantFactor","clamp","slopeFactor","setBlendConstants","blendConstants","Array","prototype","apply","setDepthBound","minDepthBounds","maxDepthBounds","minBounds","maxBounds","setStencilWriteMask","face","writeMask","setStencilCompareMask","reference","compareMask","draw","CommandBufferType","PRIMARY","SECONDARY","drawCmdPool","WebGL2CmdDraw","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","WebGL2CmdUpdateBuffer","buffSize","buff","usage","BufferUsageBit","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","WebGL2CmdCopyBufferToTexture","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGL2CmdBuff","c","array","refCount","bindStatesCmds","concat","webGLDevice","bindStatesCmd","bindStatesCmdPool","WebGL2CmdBindStates","depthBias","depthBounds","stencilWriteMask","stencilCompareMask","BIND_STATES"],"mappings":";;;;;;;AA2BA;;AACA;;AAKA;;AAQA;;AAzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA0DO,MAAMA,mBAAN,SAAkCC,4BAAlC,CAAgD;AAAA;AAAA;AAAA,SAC5CC,UAD4C,GACb,IAAIC,gCAAJ,EADa;AAAA,SAEzCC,eAFyC,GAEQ,IAFR;AAAA,SAGzCC,eAHyC,GAGvB,KAHuB;AAAA,SAIzCC,oBAJyC,GAIc,IAJd;AAAA,SAKzCC,qBALyC,GAKU,EALV;AAAA,SAMzCC,qBANyC,GAMgB,IANhB;AAAA,SAOzCC,kBAPyC,GAOR,EAPQ;AAAA,SAQzCC,YARyC,GAQT,IARS;AAAA,SASzCC,WATyC,GASd,IATc;AAAA,SAUzCC,aAVyC,GAUV,IAVU;AAAA,SAWzCC,aAXyC,GAWA,IAXA;AAAA,SAYzCC,kBAZyC,GAYV,EAZU;AAAA,SAazCC,eAbyC,GAaI,IAbJ;AAAA,SAczCC,oBAdyC,GAcc,IAdd;AAAA,SAezCC,sBAfyC,GAekB,IAflB;AAAA,SAgBzCC,gBAhByC,GAgBtB,KAhBsB;AAAA;;AAkB5CC,EAAAA,UAAP,CAAmBC,IAAnB,EAAqD;AACjD,SAAKC,KAAL,GAAaD,IAAI,CAACE,IAAlB;AACA,SAAKC,MAAL,GAAcH,IAAI,CAACI,KAAnB;AAEA,SAAKpB,eAAL,GAAwB,KAAKqB,OAAN,CAA+BC,YAAtD;AAEA,UAAMC,QAAQ,GAAI,KAAKF,OAAN,CAA+BG,kBAA/B,CAAkDC,aAAlD,CAAgEC,MAAjF;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAApB,EAA8BI,CAAC,EAA/B,EAAmC;AAC/B,WAAKxB,qBAAL,CAA2ByB,IAA3B,CAAgC,IAAhC;;AACA,WAAKvB,kBAAL,CAAwBuB,IAAxB,CAA6B,EAA7B;AACH;;AAED,WAAO,IAAP;AACH;;AAEMC,EAAAA,OAAP,GAAkB;AACd,QAAI,KAAK7B,eAAT,EAA0B;AACtB,WAAKA,eAAL,CAAqB8B,SAArB,CAA+B,KAAKhC,UAApC;;AACA,WAAKE,eAAL,GAAuB,IAAvB;AACH;AACJ;;AAEM+B,EAAAA,KAAP,CAAcC,UAAd,EAAuCC,OAAO,GAAG,CAAjD,EAAoDC,WAApD,EAA+E;AAC3E,SAAKlC,eAAL,CAAsB8B,SAAtB,CAAgC,KAAKhC,UAArC;;AACA,SAAKI,oBAAL,GAA4B,IAA5B;AACA,SAAKE,qBAAL,GAA6B,IAA7B;AACA,SAAKD,qBAAL,CAA2BuB,MAA3B,GAAoC,CAApC;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,kBAAL,CAAwBqB,MAA5C,EAAoDC,CAAC,EAArD,EAAyD;AACrD,WAAKtB,kBAAL,CAAwBsB,CAAxB,EAA2BD,MAA3B,GAAoC,CAApC;AACH;;AACD,SAAKpB,YAAL,GAAoB,IAApB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKC,kBAAL,CAAwBgB,MAAxB,GAAiC,CAAjC;AACA,SAAKf,eAAL,GAAuB,IAAvB;AACA,SAAKC,oBAAL,GAA4B,IAA5B;AACA,SAAKC,sBAAL,GAA8B,IAA9B;AACA,SAAKsB,aAAL,GAAqB,CAArB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACH;;AAEMC,EAAAA,GAAP,GAAc;AACV,QAAI,KAAKxB,gBAAT,EAA2B;AACvB,WAAKyB,UAAL;AACH;;AAED,SAAKtC,eAAL,GAAuB,KAAvB;AACH;;AAEMuC,EAAAA,eAAP,CACIR,UADJ,EAEIS,WAFJ,EAGIC,UAHJ,EAIIC,WAJJ,EAKIC,UALJ,EAMIC,YANJ,EAOE;AACE,UAAMC,GAAG,GAAG,KAAK9C,eAAL,CAAsB+C,sBAAtB,CAA6CC,KAA7C,CAAmDC,wCAAnD,CAAZ;;AACAH,IAAAA,GAAG,CAACI,aAAJ,GAAqBlB,UAAD,CAAiCkB,aAArD;AACAJ,IAAAA,GAAG,CAACK,cAAJ,GAAsBV,WAAD,CAAmCU,cAAxD;AACAL,IAAAA,GAAG,CAACJ,UAAJ,GAAiBA,UAAjB;;AACA,SAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgB,WAAW,CAACjB,MAAhC,EAAwC,EAAEC,CAA1C,EAA6C;AACzCmB,MAAAA,GAAG,CAACH,WAAJ,CAAgBhB,CAAhB,IAAqBgB,WAAW,CAAChB,CAAD,CAAhC;AACH;;AACDmB,IAAAA,GAAG,CAACF,UAAJ,GAAiBA,UAAjB;AACAE,IAAAA,GAAG,CAACD,YAAJ,GAAmBA,YAAnB;AACA,SAAK/C,UAAL,CAAgBsD,mBAAhB,CAAoCxB,IAApC,CAAyCkB,GAAzC;AAEA,SAAKhD,UAAL,CAAgBuD,IAAhB,CAAqBzB,IAArB,CAA0B0B,0BAAUC,iBAApC;AAEA,SAAKtD,eAAL,GAAuB,IAAvB;AACH;;AAEMuD,EAAAA,aAAP,GAAwB;AACpB,SAAKvD,eAAL,GAAuB,KAAvB;AACH;;AAEMwD,EAAAA,iBAAP,CAA0BC,aAA1B,EAAwD;AACpD,UAAMC,gBAAgB,GAAID,aAAD,CAAuCC,gBAAhE;;AACA,QAAIA,gBAAgB,KAAK,KAAKzD,oBAA9B,EAAoD;AAChD,WAAKA,oBAAL,GAA4ByD,gBAA5B;AACA,WAAK7C,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEM8C,EAAAA,iBAAP,CAA0BC,GAA1B,EAAuCC,aAAvC,EAAqEC,cAArE,EAAgG;AAC5F,UAAMC,iBAAiB,GAAIF,aAAD,CAAuCG,gBAAjE;;AACA,QAAID,iBAAiB,KAAK,KAAK7D,qBAAL,CAA2B0D,GAA3B,CAA1B,EAA2D;AACvD,WAAK1D,qBAAL,CAA2B0D,GAA3B,IAAkCG,iBAAlC;AACA,WAAKlD,gBAAL,GAAwB,IAAxB;AACH;;AACD,QAAIiD,cAAJ,EAAoB;AAChB,YAAMG,OAAO,GAAG,KAAK7D,kBAAL,CAAwBwD,GAAxB,CAAhB;;AACA,WAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoC,cAAc,CAACrC,MAAnC,EAA2CC,CAAC,EAA5C,EAAgDuC,OAAO,CAACvC,CAAD,CAAP,GAAaoC,cAAc,CAACpC,CAAD,CAA3B;;AAChDuC,MAAAA,OAAO,CAACxC,MAAR,GAAiBqC,cAAc,CAACrC,MAAhC;AACA,WAAKZ,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEMqD,EAAAA,kBAAP,CAA2BC,cAA3B,EAA2D;AACvD,UAAMC,iBAAiB,GAAID,cAAD,CAAyCC,iBAAnE;AACA,SAAKjE,qBAAL,GAA6BiE,iBAA7B;AACA,SAAKvD,gBAAL,GAAwB,IAAxB;AACH;;AAEMwD,EAAAA,WAAP,CAAoBC,QAApB,EAAwC;AACpC,QAAI,CAAC,KAAKjE,YAAV,EAAwB;AACpB,WAAKA,YAAL,GAAoB,IAAIkE,qBAAJ,CAAaD,QAAQ,CAACE,IAAtB,EAA4BF,QAAQ,CAACG,GAArC,EAA0CH,QAAQ,CAACI,KAAnD,EAA0DJ,QAAQ,CAACK,MAAnE,EAA2EL,QAAQ,CAACM,QAApF,EAA8FN,QAAQ,CAACO,QAAvG,CAApB;AACH,KAFD,MAEO,IAAI,KAAKxE,YAAL,CAAkBmE,IAAlB,KAA2BF,QAAQ,CAACE,IAApC,IACA,KAAKnE,YAAL,CAAkBoE,GAAlB,KAA0BH,QAAQ,CAACG,GADnC,IAEA,KAAKpE,YAAL,CAAkBqE,KAAlB,KAA4BJ,QAAQ,CAACI,KAFrC,IAGA,KAAKrE,YAAL,CAAkBsE,MAAlB,KAA6BL,QAAQ,CAACK,MAHtC,IAIA,KAAKtE,YAAL,CAAkBuE,QAAlB,KAA+BN,QAAQ,CAACM,QAJxC,IAKA,KAAKvE,YAAL,CAAkBwE,QAAlB,KAA+BP,QAAQ,CAACO,QAL5C,EAKsD;AACzD,WAAKxE,YAAL,CAAkBmE,IAAlB,GAAyBF,QAAQ,CAACE,IAAlC;AACA,WAAKnE,YAAL,CAAkBoE,GAAlB,GAAwBH,QAAQ,CAACG,GAAjC;AACA,WAAKpE,YAAL,CAAkBqE,KAAlB,GAA0BJ,QAAQ,CAACI,KAAnC;AACA,WAAKrE,YAAL,CAAkBsE,MAAlB,GAA2BL,QAAQ,CAACK,MAApC;AACA,WAAKtE,YAAL,CAAkBuE,QAAlB,GAA6BN,QAAQ,CAACM,QAAtC;AACA,WAAKvE,YAAL,CAAkBwE,QAAlB,GAA6BP,QAAQ,CAACO,QAAtC;AACA,WAAKhE,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEMiE,EAAAA,UAAP,CAAmBC,OAAnB,EAAkC;AAC9B,QAAI,CAAC,KAAKzE,WAAV,EAAuB;AACnB,WAAKA,WAAL,GAAmB,IAAI0E,iBAAJ,CAASD,OAAO,CAACE,CAAjB,EAAoBF,OAAO,CAACG,CAA5B,EAA+BH,OAAO,CAACL,KAAvC,EAA8CK,OAAO,CAACJ,MAAtD,CAAnB;AACH,KAFD,MAEO,IAAI,KAAKrE,WAAL,CAAiB2E,CAAjB,KAAuBF,OAAO,CAACE,CAA/B,IACA,KAAK3E,WAAL,CAAiB4E,CAAjB,KAAuBH,OAAO,CAACG,CAD/B,IAEA,KAAK5E,WAAL,CAAiBoE,KAAjB,KAA2BK,OAAO,CAACL,KAFnC,IAGA,KAAKpE,WAAL,CAAiBqE,MAAjB,KAA4BI,OAAO,CAACJ,MAHxC,EAGgD;AACnD,WAAKrE,WAAL,CAAiB2E,CAAjB,GAAqBF,OAAO,CAACE,CAA7B;AACA,WAAK3E,WAAL,CAAiB4E,CAAjB,GAAqBH,OAAO,CAACG,CAA7B;AACA,WAAK5E,WAAL,CAAiBoE,KAAjB,GAAyBK,OAAO,CAACL,KAAjC;AACA,WAAKpE,WAAL,CAAiBqE,MAAjB,GAA0BI,OAAO,CAACJ,MAAlC;AACA,WAAK9D,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEMsE,EAAAA,YAAP,CAAqBC,SAArB,EAAwC;AACpC,QAAI,KAAK7E,aAAL,KAAuB6E,SAA3B,EAAsC;AAClC,WAAK7E,aAAL,GAAqB6E,SAArB;AACA,WAAKvE,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEMwE,EAAAA,YAAP,CAAqBC,uBAArB,EAAsDC,cAAtD,EAA8EC,oBAA9E,EAA4G;AACxG,QAAI,CAAC,KAAKhF,aAAV,EAAyB;AACrB,WAAKA,aAAL,GAAqB;AACjBiF,QAAAA,cAAc,EAAEH,uBADC;AAEjBI,QAAAA,KAAK,EAAEH,cAFU;AAGjBI,QAAAA,WAAW,EAAEH;AAHI,OAArB;AAKA,WAAK3E,gBAAL,GAAwB,IAAxB;AACH,KAPD,MAOO,IAAI,KAAKL,aAAL,CAAmBiF,cAAnB,KAAsCH,uBAAtC,IACA,KAAK9E,aAAL,CAAmBkF,KAAnB,KAA6BH,cAD7B,IAEA,KAAK/E,aAAL,CAAmBmF,WAAnB,KAAmCH,oBAFvC,EAE6D;AAChE,WAAKhF,aAAL,CAAmBiF,cAAnB,GAAoCH,uBAApC;AACA,WAAK9E,aAAL,CAAmBkF,KAAnB,GAA2BH,cAA3B;AACA,WAAK/E,aAAL,CAAmBmF,WAAnB,GAAiCH,oBAAjC;AACA,WAAK3E,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEM+E,EAAAA,iBAAP,CAA0BC,cAA1B,EAAoD;AAChD,QAAIA,cAAc,CAACpE,MAAf,KAA0B,CAA1B,KACA,KAAKhB,kBAAL,CAAwB,CAAxB,MAA+BoF,cAAc,CAAC,CAAD,CAA7C,IACG,KAAKpF,kBAAL,CAAwB,CAAxB,MAA+BoF,cAAc,CAAC,CAAD,CADhD,IAEG,KAAKpF,kBAAL,CAAwB,CAAxB,MAA+BoF,cAAc,CAAC,CAAD,CAFhD,IAGG,KAAKpF,kBAAL,CAAwB,CAAxB,MAA+BoF,cAAc,CAAC,CAAD,CAJhD,CAAJ,EAI0D;AACtD,WAAKpF,kBAAL,CAAwBgB,MAAxB,GAAiC,CAAjC;AACAqE,MAAAA,KAAK,CAACC,SAAN,CAAgBpE,IAAhB,CAAqBqE,KAArB,CAA2B,KAAKvF,kBAAhC,EAAoDoF,cAApD;AACA,WAAKhF,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEMoF,EAAAA,aAAP,CAAsBC,cAAtB,EAA8CC,cAA9C,EAAsE;AAClE,QAAI,CAAC,KAAKzF,eAAV,EAA2B;AACvB,WAAKA,eAAL,GAAuB;AACnB0F,QAAAA,SAAS,EAAEF,cADQ;AAEnBG,QAAAA,SAAS,EAAEF;AAFQ,OAAvB;AAIA,WAAKtF,gBAAL,GAAwB,IAAxB;AACH,KAND,MAMO,IAAI,KAAKH,eAAL,CAAqB0F,SAArB,KAAmCF,cAAnC,IACA,KAAKxF,eAAL,CAAqB2F,SAArB,KAAmCF,cADvC,EACuD;AAC1D,WAAKzF,eAAL,GAAuB;AACnB0F,QAAAA,SAAS,EAAEF,cADQ;AAEnBG,QAAAA,SAAS,EAAEF;AAFQ,OAAvB;AAIA,WAAKtF,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEMyF,EAAAA,mBAAP,CAA4BC,IAA5B,EAA+CC,SAA/C,EAAkE;AAC9D,QAAI,CAAC,KAAK7F,oBAAV,EAAgC;AAC5B,WAAKA,oBAAL,GAA4B;AACxB4F,QAAAA,IADwB;AAExBC,QAAAA;AAFwB,OAA5B;AAIA,WAAK3F,gBAAL,GAAwB,IAAxB;AACH,KAND,MAMO,IAAI,KAAKF,oBAAL,CAA0B4F,IAA1B,KAAmCA,IAAnC,IACA,KAAK5F,oBAAL,CAA0B6F,SAA1B,KAAwCA,SAD5C,EACuD;AAC1D,WAAK7F,oBAAL,CAA0B4F,IAA1B,GAAiCA,IAAjC;AACA,WAAK5F,oBAAL,CAA0B6F,SAA1B,GAAsCA,SAAtC;AACA,WAAK3F,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEM4F,EAAAA,qBAAP,CAA8BF,IAA9B,EAAiDG,SAAjD,EAAoEC,WAApE,EAAyF;AACrF,QAAI,CAAC,KAAK/F,sBAAV,EAAkC;AAC9B,WAAKA,sBAAL,GAA8B;AAC1B2F,QAAAA,IAD0B;AAE1BG,QAAAA,SAF0B;AAG1BC,QAAAA;AAH0B,OAA9B;AAKA,WAAK9F,gBAAL,GAAwB,IAAxB;AACH,KAPD,MAOO,IAAI,KAAKD,sBAAL,CAA4B2F,IAA5B,KAAqCA,IAArC,IACA,KAAK3F,sBAAL,CAA4B8F,SAA5B,KAA0CA,SAD1C,IAEA,KAAK9F,sBAAL,CAA4B+F,WAA5B,KAA4CA,WAFhD,EAE6D;AAChE,WAAK/F,sBAAL,CAA4B2F,IAA5B,GAAmCA,IAAnC;AACA,WAAK3F,sBAAL,CAA4B8F,SAA5B,GAAwCA,SAAxC;AACA,WAAK9F,sBAAL,CAA4B+F,WAA5B,GAA0CA,WAA1C;AACA,WAAK9F,gBAAL,GAAwB,IAAxB;AACH;AACJ;;AAEM+F,EAAAA,IAAP,CAAazC,cAAb,EAA6C;AACzC,QAAI,KAAKnD,KAAL,KAAe6F,0BAAkBC,OAAjC,IAA4C,KAAK9G,eAAjD,IACG,KAAKgB,KAAL,KAAe6F,0BAAkBE,SADxC,EACmD;AAC/C,UAAI,KAAKlG,gBAAT,EAA2B;AACvB,aAAKyB,UAAL;AACH;;AAED,YAAMO,GAAG,GAAG,KAAK9C,eAAL,CAAsBiH,WAAtB,CAAkCjE,KAAlC,CAAwCkE,6BAAxC,CAAZ,CAL+C,CAM/C;;;AACApE,MAAAA,GAAG,CAACqE,QAAJ,CAAaC,WAAb,GAA2BhD,cAAc,CAACgD,WAA1C;AACAtE,MAAAA,GAAG,CAACqE,QAAJ,CAAaE,WAAb,GAA2BjD,cAAc,CAACiD,WAA1C;AACAvE,MAAAA,GAAG,CAACqE,QAAJ,CAAaG,UAAb,GAA0BlD,cAAc,CAACkD,UAAzC;AACAxE,MAAAA,GAAG,CAACqE,QAAJ,CAAaI,UAAb,GAA0BnD,cAAc,CAACmD,UAAzC;AACAzE,MAAAA,GAAG,CAACqE,QAAJ,CAAaK,YAAb,GAA4BpD,cAAc,CAACoD,YAA3C;AACA1E,MAAAA,GAAG,CAACqE,QAAJ,CAAaM,aAAb,GAA6BrD,cAAc,CAACqD,aAA5C;AACA3E,MAAAA,GAAG,CAACqE,QAAJ,CAAaO,aAAb,GAA6BtD,cAAc,CAACsD,aAA5C;AACA,WAAK5H,UAAL,CAAgB6H,QAAhB,CAAyB/F,IAAzB,CAA8BkB,GAA9B;AAEA,WAAKhD,UAAL,CAAgBuD,IAAhB,CAAqBzB,IAArB,CAA0B0B,0BAAUsE,IAApC;AAEA,QAAE,KAAKzF,aAAP;AACA,WAAKC,aAAL,IAAsBgC,cAAc,CAACqD,aAArC;AACA,YAAMH,UAAU,GAAGlD,cAAc,CAACkD,UAAf,IAA6BlD,cAAc,CAACgD,WAA/D;;AACA,UAAI,KAAKlH,oBAAT,EAA+B;AAC3B,cAAM2H,WAAW,GAAG,KAAK3H,oBAAL,CAA0B2H,WAA9C;;AACA,gBAAQA,WAAR;AACA,eAAK,MAAL;AAAa;AAAE;AACX,mBAAKxF,QAAL,IAAiBiF,UAAU,GAAG,CAAb,GAAiBQ,IAAI,CAACC,GAAL,CAAS3D,cAAc,CAACqD,aAAxB,EAAuC,CAAvC,CAAlC;AACA;AACH;;AACD,eAAK,MAAL,CALA,CAKa;;AACb,eAAK,MAAL;AAAa;AAAE;AACX,mBAAKpF,QAAL,IAAiB,CAACiF,UAAU,GAAG,CAAd,IAAmBQ,IAAI,CAACC,GAAL,CAAS3D,cAAc,CAACqD,aAAxB,EAAuC,CAAvC,CAApC;AACA;AACH;;AACD;AAVA;AAYH;AACJ,KArCD,MAqCO;AACHO,MAAAA,OAAO,CAACC,KAAR,CAAc,yDAAd;AACH;AACJ;;AAEMC,EAAAA,YAAP,CAAqBC,MAArB,EAAqCC,IAArC,EAAyDC,IAAzD,EAAwE;AACpE,QAAI,KAAKpH,KAAL,KAAe6F,0BAAkBC,OAAjC,IAA4C,CAAC,KAAK9G,eAAlD,IACG,KAAKgB,KAAL,KAAe6F,0BAAkBE,SADxC,EACmD;AAC/C,YAAMsB,SAAS,GAAIH,MAAD,CAAyBG,SAA3C;;AACA,UAAIA,SAAJ,EAAe;AACX,cAAMxF,GAAG,GAAG,KAAK9C,eAAL,CAAsBuI,mBAAtB,CAA0CvF,KAA1C,CAAgDwF,qCAAhD,CAAZ;;AACA,YAAIC,QAAQ,GAAG,CAAf;AACA,YAAIC,IAAyB,GAAG,IAAhC,CAHW,CAKX;AACA;;AACA,YAAIP,MAAM,CAACQ,KAAP,GAAeC,uBAAeC,QAAlC,EAA4C;AACxCH,UAAAA,IAAI,GAAGN,IAAP;AACH,SAFD,MAEO;AACH,cAAIC,IAAI,KAAKS,SAAb,EAAwB;AACpBL,YAAAA,QAAQ,GAAGJ,IAAX;AACH,WAFD,MAEO;AACHI,YAAAA,QAAQ,GAAIL,IAAD,CAAsBW,UAAjC;AACH;;AACDL,UAAAA,IAAI,GAAGN,IAAP;AACH;;AAEDtF,QAAAA,GAAG,CAACwF,SAAJ,GAAgBA,SAAhB;AACAxF,QAAAA,GAAG,CAACqF,MAAJ,GAAaO,IAAb;AACA5F,QAAAA,GAAG,CAACkG,MAAJ,GAAa,CAAb;AACAlG,QAAAA,GAAG,CAACuF,IAAJ,GAAWI,QAAX;AACA,aAAK3I,UAAL,CAAgBmJ,gBAAhB,CAAiCrH,IAAjC,CAAsCkB,GAAtC;AAEA,aAAKhD,UAAL,CAAgBuD,IAAhB,CAAqBzB,IAArB,CAA0B0B,0BAAU4F,aAApC;AACH;AACJ,KA7BD,MA6BO;AACHlB,MAAAA,OAAO,CAACC,KAAR,CAAc,kEAAd;AACH;AACJ;;AAEMkB,EAAAA,oBAAP,CAA6BC,OAA7B,EAAyDC,OAAzD,EAA2EC,OAA3E,EAAyG;AACrG,QAAI,KAAKrI,KAAL,KAAe6F,0BAAkBC,OAAjC,IAA4C,CAAC,KAAK9G,eAAlD,IACG,KAAKgB,KAAL,KAAe6F,0BAAkBE,SADxC,EACmD;AAC/C,YAAMuC,UAAU,GAAIF,OAAD,CAA2BE,UAA9C;;AACA,UAAIA,UAAJ,EAAgB;AACZ,cAAMzG,GAAG,GAAG,KAAK9C,eAAL,CAAsBwJ,0BAAtB,CAAiDxG,KAAjD,CAAuDyG,4CAAvD,CAAZ;;AACA3G,QAAAA,GAAG,CAACyG,UAAJ,GAAiBA,UAAjB;AACAzG,QAAAA,GAAG,CAACwG,OAAJ,GAAcA,OAAd,CAHY,CAIZ;AACA;;AACAxG,QAAAA,GAAG,CAACsG,OAAJ,GAAcA,OAAd;AAEA,aAAKtJ,UAAL,CAAgB4J,uBAAhB,CAAwC9H,IAAxC,CAA6CkB,GAA7C;AACA,aAAKhD,UAAL,CAAgBuD,IAAhB,CAAqBzB,IAArB,CAA0B0B,0BAAUqG,sBAApC;AACH;AACJ,KAdD,MAcO;AACH3B,MAAAA,OAAO,CAACC,KAAR,CAAc,yEAAd;AACH;AACJ;;AAEM2B,EAAAA,OAAP,CAAgBC,QAAhB,EAA2CC,KAA3C,EAA0D;AACtD,SAAK,IAAInI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmI,KAApB,EAA2B,EAAEnI,CAA7B,EAAgC;AAC5B,YAAMoI,aAAa,GAAGF,QAAQ,CAAClI,CAAD,CAA9B;;AAEA,WAAK,IAAIqI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,aAAa,CAACjK,UAAd,CAAyBsD,mBAAzB,CAA6C1B,MAAjE,EAAyE,EAAEsI,CAA3E,EAA8E;AAC1E,cAAMlH,GAAG,GAAGiH,aAAa,CAACjK,UAAd,CAAyBsD,mBAAzB,CAA6C6G,KAA7C,CAAmDD,CAAnD,CAAZ;AACA,UAAElH,GAAG,CAACoH,QAAN;AACA,aAAKpK,UAAL,CAAgBsD,mBAAhB,CAAoCxB,IAApC,CAAyCkB,GAAzC;AACH;;AAED,WAAK,IAAIkH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,aAAa,CAACjK,UAAd,CAAyBqK,cAAzB,CAAwCzI,MAA5D,EAAoE,EAAEsI,CAAtE,EAAyE;AACrE,cAAMlH,GAAG,GAAGiH,aAAa,CAACjK,UAAd,CAAyBqK,cAAzB,CAAwCF,KAAxC,CAA8CD,CAA9C,CAAZ;AACA,UAAElH,GAAG,CAACoH,QAAN;AACA,aAAKpK,UAAL,CAAgBqK,cAAhB,CAA+BvI,IAA/B,CAAoCkB,GAApC;AACH;;AAED,WAAK,IAAIkH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,aAAa,CAACjK,UAAd,CAAyB6H,QAAzB,CAAkCjG,MAAtD,EAA8D,EAAEsI,CAAhE,EAAmE;AAC/D,cAAMlH,GAAG,GAAGiH,aAAa,CAACjK,UAAd,CAAyB6H,QAAzB,CAAkCsC,KAAlC,CAAwCD,CAAxC,CAAZ;AACA,UAAElH,GAAG,CAACoH,QAAN;AACA,aAAKpK,UAAL,CAAgB6H,QAAhB,CAAyB/F,IAAzB,CAA8BkB,GAA9B;AACH;;AAED,WAAK,IAAIkH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,aAAa,CAACjK,UAAd,CAAyBmJ,gBAAzB,CAA0CvH,MAA9D,EAAsE,EAAEsI,CAAxE,EAA2E;AACvE,cAAMlH,GAAG,GAAGiH,aAAa,CAACjK,UAAd,CAAyBmJ,gBAAzB,CAA0CgB,KAA1C,CAAgDD,CAAhD,CAAZ;AACA,UAAElH,GAAG,CAACoH,QAAN;AACA,aAAKpK,UAAL,CAAgBmJ,gBAAhB,CAAiCrH,IAAjC,CAAsCkB,GAAtC;AACH;;AAED,WAAK,IAAIkH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,aAAa,CAACjK,UAAd,CAAyB4J,uBAAzB,CAAiDhI,MAArE,EAA6E,EAAEsI,CAA/E,EAAkF;AAC9E,cAAMlH,GAAG,GAAGiH,aAAa,CAACjK,UAAd,CAAyB4J,uBAAzB,CAAiDO,KAAjD,CAAuDD,CAAvD,CAAZ;AACA,UAAElH,GAAG,CAACoH,QAAN;AACA,aAAKpK,UAAL,CAAgB4J,uBAAhB,CAAwC9H,IAAxC,CAA6CkB,GAA7C;AACH;;AAED,WAAKhD,UAAL,CAAgBuD,IAAhB,CAAqB+G,MAArB,CAA4BL,aAAa,CAACjK,UAAd,CAAyBuD,IAAzB,CAA8B4G,KAA1D;AAEA,WAAK9H,aAAL,IAAsB4H,aAAa,CAAC5H,aAApC;AACA,WAAKC,aAAL,IAAsB2H,aAAa,CAAC3H,aAApC;AACA,WAAKC,QAAL,IAAiB0H,aAAa,CAAC1H,QAA/B;AACH;AACJ;;AAED,MAAWgI,WAAX,GAAwC;AACpC,WAAO,KAAKhJ,OAAZ;AACH;;AAESkB,EAAAA,UAAV,GAAwB;AACpB,UAAM+H,aAAa,GAAG,KAAKtK,eAAL,CAAsBuK,iBAAtB,CAAwCvH,KAAxC,CAA8CwH,mCAA9C,CAAtB;;AACAF,IAAAA,aAAa,CAAC3G,gBAAd,GAAiC,KAAKzD,oBAAtC;AACA6F,IAAAA,KAAK,CAACC,SAAN,CAAgBpE,IAAhB,CAAqBqE,KAArB,CAA2BqE,aAAa,CAACtG,iBAAzC,EAA4D,KAAK7D,qBAAjE;;AACA,SAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,kBAAL,CAAwBqB,MAA5C,EAAoDC,CAAC,EAArD,EAAyD;AACrDoE,MAAAA,KAAK,CAACC,SAAN,CAAgBpE,IAAhB,CAAqBqE,KAArB,CAA2BqE,aAAa,CAACvG,cAAzC,EAAyD,KAAK1D,kBAAL,CAAwBsB,CAAxB,CAAzD;AACH;;AACD2I,IAAAA,aAAa,CAACjG,iBAAd,GAAkC,KAAKjE,qBAAvC;AACAkK,IAAAA,aAAa,CAAC/F,QAAd,GAAyB,KAAKjE,YAA9B;AACAgK,IAAAA,aAAa,CAACtF,OAAd,GAAwB,KAAKzE,WAA7B;AACA+J,IAAAA,aAAa,CAACjF,SAAd,GAA0B,KAAK7E,aAA/B;AACA8J,IAAAA,aAAa,CAACG,SAAd,GAA0B,KAAKhK,aAA/B;AACAsF,IAAAA,KAAK,CAACC,SAAN,CAAgBpE,IAAhB,CAAqBqE,KAArB,CAA2BqE,aAAa,CAACxE,cAAzC,EAAyD,KAAKpF,kBAA9D;AACA4J,IAAAA,aAAa,CAACI,WAAd,GAA4B,KAAK/J,eAAjC;AACA2J,IAAAA,aAAa,CAACK,gBAAd,GAAiC,KAAK/J,oBAAtC;AACA0J,IAAAA,aAAa,CAACM,kBAAd,GAAmC,KAAK/J,sBAAxC;AAEA,SAAKf,UAAL,CAAgBqK,cAAhB,CAA+BvI,IAA/B,CAAoC0I,aAApC;AACA,SAAKxK,UAAL,CAAgBuD,IAAhB,CAAqBzB,IAArB,CAA0B0B,0BAAUuH,WAApC;AAEA,SAAK/J,gBAAL,GAAwB,KAAxB;AACH;;AA3ZkD"}