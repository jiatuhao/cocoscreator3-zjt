{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/pipeline/render-additive-light-queue.ts"],"names":["_samplerInfo","Filter","LINEAR","NONE","Address","CLAMP","_lightPassPool","Pool","subModel","passIdx","dynamicOffsets","lights","_vec4Array","Float32Array","_sphere","Sphere","create","_dynamicOffsets","_lightIndices","_matShadowView","Mat4","_matShadowViewProj","cullSphereLight","light","model","worldBounds","intersect","aabbWithAABB","aabb","cullSpotLight","aabbFrustum","frustum","_phaseID","_lightPassIndices","getLightPassIndices","subModels","lightPassIndices","length","hasValidLightPass","j","passes","lightPassIndex","k","phase","push","RenderAdditiveLightQueue","constructor","pipeline","_pipeline","_device","_validLights","_lightPasses","_descriptorSetMap","Map","_globalUBO","UBOGlobal","COUNT","_cameraUBO","UBOCamera","_shadowUBO","UBOShadow","_lightBufferCount","_lightBufferStride","_lightBufferElementCount","_lightBuffer","_firstLightBufferView","_lightBufferData","_isHDR","_fpScale","_renderObjects","_instancedQueue","_batchedQueue","_lightMeterScale","_sampler","device","isHDR","fpScale","renderObjects","RenderInstancedQueue","RenderBatchedQueue","Math","ceil","UBOForwardLight","SIZE","uboOffsetAlignment","BYTES_PER_ELEMENT","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","BufferViewInfo","shadowMapSamplerHash","samplerLib","getSampler","clear","i","lp","freeArray","destroy","descriptorSets","Array","from","values","descriptorSet","getBuffer","BINDING","UNIFORM_SHADOWMAP_BINDING","UNIFORM_SPOT_LIGHTING_MAP_TEXTURE_BINDING","getTexture","gatherLightPasses","camera","cmdBuff","validLights","_gatherValidLights","_updateUBOs","_updateLightDescriptorSet","ro","_lightCulling","lightPassIdx","pass","bindBuffer","update","_addRenderQueue","uploadBuffers","recordCommandBuffer","renderPass","shader","ShaderPool","get","SubModelPool","handle","SubModelView","SHADER_0","ia","inputAssembler","pso","PipelineStateManager","getOrCreatePipelineState","matDS","DSPool","PassPool","PassView","DESCRIPTOR_SET","localDS","bindPipelineState","bindDescriptorSet","SetIndex","MATERIAL","bindInputAssembler","_getOrCreateDescriptorSet","GLOBAL","LOCAL","draw","sphereLights","scene","baked","set","position","x","y","z","range","sphereFrustum","spotLights","l","isCulled","type","LightType","SPHERE","SPOT","batchingScheme","BatchingSchemes","INSTANCING","idx","buffer","InstancedBuffer","merge","instancedAttributes","queue","add","VB_MERGING","BatchedBuffer","alloc","shadowInfo","shadows","mainLight","_updateGlobalDescriptorSet","Color","toArray","shadowColor","SHADOW_COLOR_OFFSET","SHADOW_INFO_OFFSET","size","pcf","bias","invert","node","getWorldMatrix","perspective","spotAngle","aspect","multiply","MAT_LIGHT_VIEW_PROJ_OFFSET","shadowFrameBufferMap","has","texture","colorTextures","bindTexture","updateBuffer","root","legacyCC","director","fv","shadingWidth","floor","width","shadingHeight","height","TIME_OFFSET","cumulativeTime","frameTime","getTotalFrames","SCREEN_SIZE_OFFSET","NATIVE_SIZE_OFFSET","_updateCameraUBO","ambient","shadingScale","fog","cv","SCREEN_SCALE_OFFSET","exposure","EXPOSURE_OFFSET","Vec3","direction","MAIN_LIT_DIR_OFFSET","color","MAIN_LIT_COLOR_OFFSET","useColorTemperature","colorTempRGB","colorTemperatureRGB","illuminance","UNIT_Z","Vec4","ZERO","matView","MAT_VIEW_OFFSET","worldMatrix","MAT_VIEW_INV_OFFSET","matProj","MAT_PROJ_OFFSET","matProjInv","MAT_PROJ_INV_OFFSET","matViewProj","MAT_VIEW_PROJ_OFFSET","matViewProjInv","MAT_VIEW_PROJ_INV_OFFSET","CAMERA_POS_OFFSET","projectionSignY","screenSpaceSignY","window","hasOffScreenAttachments","UVSpaceSignY","skyColor","colorArray","skyIllum","AMBIENT_SKY_OFFSET","albedoArray","AMBIENT_GROUND_OFFSET","enabled","GLOBAL_FOG_COLOR_OFFSET","GLOBAL_FOG_BASE_OFFSET","fogStart","fogEnd","fogDensity","GLOBAL_FOG_ADD_OFFSET","fogTop","fogRange","fogAtten","resize","initialize","offset","LIGHT_POS_OFFSET","LIGHT_SIZE_RANGE_ANGLE_OFFSET","tempRGB","luminance","LIGHT_COLOR_OFFSET","LIGHT_DIR_OFFSET","createDescriptorSet","DescriptorSetInfo","descriptorSetLayout","globalUBO","cameraBUO","shadowBUO","bindSampler","builtinResMgr","getGFXTexture"],"mappings":"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"}