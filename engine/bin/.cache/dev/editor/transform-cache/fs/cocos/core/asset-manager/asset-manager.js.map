{"version":3,"sources":["file:///Applications/CocosCreator/Creator/3.0.0/CocosCreator.app/Contents/Resources/resources/3d/engine/cocos/core/asset-manager/asset-manager.ts"],"names":["AssetManager","pipeline","append","preprocess","load","fetchPipeline","fetch","transformPipeline","parse","combine","bundles","assets","generalImportBase","generalNativeBase","dependUtil","force","EDITOR","allowImageBitmap","sys","isMobile","utils","helper","downloader","parser","packManager","cacheAsset","cacheManager","presets","factory","preprocessPipe","fetchPipe","loadPipe","references","_releaseManager","releaseManager","_files","files","_parsed","parsed","_parsePipeline","BUILD","Pipeline","main","get","BuiltinBundleName","MAIN","resources","RESOURCES","init","options","clear","server","bundleVers","remoteBundles","importBase","endsWith","substr","length","nativeBase","getBundle","name","removeBundle","bundle","_destroy","remove","loadAny","requests","onProgress","onComplete","opts","onProg","onComp","preset","Array","isArray","slice","task","Task","input","async","preloadAny","postLoadNative","asset","undefined","_native","__nativeDepend__","depend","getNativeDep","_uuid","has","find","b","getAssetInfo","err","native","isValid","_nativeAsset","message","stack","loadRemote","url","reloadAsset","__isNative__","data","create","ext","p1","p2","loadBundle","nameOrUrl","bundleName","releaseAsset","tryRelease","releaseUnusedAssets","forEach","releaseAll","loadWithJson","json","Error","item","RequestItem","isNative","uuid","assetId","Date","getTime","Math","random","file","Cache","Bundle","legacyCC","assetManager"],"mappings":"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"}