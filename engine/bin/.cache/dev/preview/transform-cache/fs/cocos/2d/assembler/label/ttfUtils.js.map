{"version":3,"sources":["../../../../../../../../../../cocos/2d/assembler/label/ttfUtils.ts"],"names":["SpriteFrame","fragmentText","safeMeasureText","getBaselineOffset","BASELINE_RATIO","Color","Size","Vec2","Rect","HorizontalTextAlignment","Label","LabelOutline","VerticalTextAlignment","LabelShadow","logID","legacyCC","assetManager","dynamicAtlasManager","Overflow","MAX_SIZE","_BASELINE_OFFSET","_context","_canvas","_texture","_fontDesc","_string","_fontSize","_drawFontsize","_splitStrings","_canvasSize","_lineHeight","_hAlign","_vAlign","_color","_fontFamily","_overflow","NONE","_isWrapText","_outlineComp","_outlineColor","BLACK","clone","_shadowComp","_shadowColor","_canvasPadding","_contentSizeExtend","ZERO","_nodeContentSize","_startPosition","_drawUnderlinePos","_drawUnderlineWidth","_underlineThickness","_isBold","_isItalic","_isUnderline","Alignment","ttfUtils","getAssemblerData","sharedLabelData","_canvasPool","get","resetAssemblerData","assemblerData","put","updateRenderData","comp","renderData","vertDirty","trans","node","_uiProps","uiTransformComp","_updateFontFamily","_updateProperties","_calculateLabelFont","_updateLabelDimensions","_resetDynamicAtlas","_updateTexture","_calDynamicAtlas","actualFontSize","setContentSize","updateVertexData","updateUvs","markForUpdateRenderData","useSystemFont","font","_nativeAsset","postLoadNative","err","isValid","fontFamily","context","canvas","spriteFrame","string","toString","fontSize","overflow","width","height","underlineHeight","lineHeight","horizontalAlign","verticalAlign","color","isBold","isItalic","isUnderline","RESIZE_HEIGHT","enableWrapText","getComponent","enabled","set","_updatePaddingRect","top","bottom","left","right","outlineWidth","shadowWidth","blur","offsetX","offset","x","offsetY","y","Math","max","tan","_calculateFillTextStartPosition","labelX","RIGHT","CENTER","_getLineHeight","drawStartY","length","firstLinelabelY","TOP","blank","BOTTOM","clearRect","lineJoin","fillStyle","r","g","b","drawTextPosX","drawTextPosY","_drawTextEffect","i","strokeText","fillText","shadowColor","tex","texture","uploadAgain","reset","mipmapLevel","uploadData","rect","_calculateUV","director","root","batcher2D","_releaseDescriptorSetCache","getHash","cacheMode","CacheMode","BITMAP","frame","ttfSpriteFrame","deleteAtlasSpriteFrame","_resetDynamicAtlasFrame","packToDynamicAtlas","uvDirty","_setupOutline","strokeStyle","a","lineWidth","_setupShadow","shadowBlur","shadowOffsetX","shadowOffsetY","startPosition","isMultiple","measureText","_measureText","fillRect","min","recreate","textAlign","textBaseline","_getFontDesc","fontDesc","nodeSpacingY","_calculateParagraphLength","paragraphedStrings","ctx","paragraphLength","para","push","_calculateShrinkFont","totalHeight","maxLength","canvasWidthNoMargin","canvasHeightNoMargin","textFragment","mid","allWidth","scaleX","scaleY","_calculateWrapText","concat","split","canvasSizeX","canvasSizeY","paraLength","rawWidth","parseFloat","toFixed","rawHeight","SHRINK","CLAMP"],"mappings":"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"}