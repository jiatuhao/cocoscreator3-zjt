{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/fetch.ts"],"names":["fetch","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","depends","__exclude__","Object","create","output","forEach","item","cb","isNative","assets","has","uuid","asset","get","addRef","handle","__asyncLoadAssets__","packManager","load","err","data","isFinish","legacyCC","assetManager","force","error","message","stack","clear","dispatch","subTask","Task","onProgress","onError","prototype","recycle","onComplete","push","decreaseRef","fetchPipeline","async","i","l","content","decRef","file","loadDepends","last","exclude","getDepends","config"],"mappings":"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"}