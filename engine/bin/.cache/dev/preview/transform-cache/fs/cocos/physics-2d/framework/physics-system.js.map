{"version":3,"sources":["../../../../../../../../../cocos/physics-2d/framework/physics-system.ts"],"names":["initPhysicsSystem","PhysicsSystem2D","PHYSICS_NONE","EDITOR","director","registerSystem","ID","instance","System","Vec2","Director","game","Eventify","createPhysicsWorld","physicsEngineId","CollisionMatrix","ERaycast2DType","PHYSICS_2D_PTM_RATIO","_enable","value","_allowSleep","v","physicsWorld","setAllowSleep","_gravity","gravity","set","setGravity","x","y","_maxSubSteps","_fixedTimeStep","_autoSimulation","debugDrawFlags","_steping","velocityIterations","positionIterations","collisionMatrix","_accumulator","_delayEvents","config","physics","copy","multiplyScalar","allowSleep","fixedTimeStep","maxSubSteps","autoSimulation","i","bit","parseInt","postUpdate","deltaTime","emit","EVENT_BEFORE_PHYSICS","substepIndex","step","events","l","length","event","func","call","target","syncPhysicsToScene","drawDebug","EVENT_AFTER_PHYSICS","_callAfterStep","push","resetAccumulator","time","raycast","p1","p2","type","mask","Closest","testPoint","p","testAABB","rect","once","EVENT_INIT"],"mappings":"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"}