{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl2/webgl2-command-buffer.ts"],"names":["CommandBuffer","BufferUsageBit","CommandBufferType","Rect","Viewport","WebGL2Cmd","WebGL2CmdBeginRenderPass","WebGL2CmdBindStates","WebGL2CmdCopyBufferToTexture","WebGL2CmdDraw","WebGL2CmdPackage","WebGL2CmdUpdateBuffer","WebGL2CommandBuffer","cmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUDescriptorSets","_curGPUInputAssembler","_curDynamicOffsets","_curViewport","_curScissor","_curLineWidth","_curDepthBias","_curBlendConstants","_curDepthBounds","_curStencilWriteMask","_curStencilCompareMask","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSets","gpuDescriptorSet","offsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","constantFactor","clamp","slopeFactor","setBlendConstants","blendConstants","Array","prototype","apply","setDepthBound","minDepthBounds","maxDepthBounds","minBounds","maxBounds","setStencilWriteMask","face","writeMask","setStencilCompareMask","reference","compareMask","draw","PRIMARY","SECONDARY","drawCmdPool","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","buffSize","buff","usage","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGL2CmdBuff","c","array","refCount","bindStatesCmds","concat","bindStatesCmd","bindStatesCmdPool","depthBias","depthBounds","stencilWriteMask","stencilCompareMask","BIND_STATES"],"mappings":"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"}