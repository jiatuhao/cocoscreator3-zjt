{"version":3,"sources":["../../../../../../../../cocos/video/video-downloader.ts"],"names":["downloadVideo","url","options","onComplete","__videoSupport","sys","formatSupport","format","length","Error","getError","video","document","createElement","source","appendChild","req","XMLHttpRequest","open","responseType","onload","status","src","URL","createObjectURL","response","onerror","message","log","send","createVideoClip","id","data","out","VideoClip","_nativeUrl","_nativeAsset","downloader","factory","register"],"mappings":"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"}