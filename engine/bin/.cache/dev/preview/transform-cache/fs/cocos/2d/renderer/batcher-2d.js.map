{"version":3,"sources":["../../../../../../../../../cocos/2d/renderer/batcher-2d.ts"],"names":["Material","DescriptorSetInfo","BufferInfo","Pool","RecyclePool","CachedArray","MeshBuffer","Stage","StencilManager","DrawBatch2D","VertexFormat","legacyCC","DSPool","SubModelPool","SubModelView","ModelLocalBindings","UBOLocal","sys","BufferUsageBit","MemoryUsageBit","Mat4","_dsInfo","m4_1","Batcher2D","acquireBufferBatch","attributes","vfmtPosUvColor","strideBytes","getAttributeStride","_currMeshBuffer","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","buffer","i","length","splice","_batches","value","_currStaticRoot","_root","device","_screens","_drawBatchPool","_meshBuffers","Map","_meshBufferUseCount","_doUploadBuffersCall","_emptyMaterial","_currScene","_currMaterial","_currTexture","_currSampler","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_parentOpacity","_descriptorSetCache","DescriptorSetCache","destroy","array","keys","size","forEach","obj","clear","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","idx","indexOf","sortScreens","addUploadBuffersFunc","target","func","removeUploadBuffersFunc","update","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","hDescriptorSet","getDescriptorSet","addBatch","uploadBuffers","calls","key","list","call","bb","reset","customs","isStatic","free","commitComp","frame","assembler","transform","renderComp","texture","samp","textureHash","samplerHash","getGFXTexture","getGFXSampler","getHash","getSamplerHash","_getRenderScene","mat","getRenderMaterial","stencilStage","stage","blendTargetHash","blendHash","depthStencilStateStage","autoMergeBatches","fillBuffers","_applyOpacity","commitModel","depthStencil","dssHash","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","director","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","alloc","subModel","visFlags","bufferBatch","sampler","useLocalData","fillPasses","patches","handle","DESCRIPTOR_SET","hInputAssembler","INPUT_ASSEMBLER","commitStaticBatch","concat","drawBatchList","finishMergeBatches","currBufferBatch","hIA","recordBatch","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","__isWebIOS14OrIPadOS14Env","forceMergeBatches","material","flushMaterial","walk","level","len","children","parentOpacity","_uiProps","opacity","_preProcess","_static","child","_postProcess","uiTransformComp","render","uiComp","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","a","b","getSiblingIndex","color","currMeshBuffer","vBuf","vData","lastByteOffset","stride","OPACITY_OFFSET","_releaseDescriptorSetCache","releaseDescriptorSetCache","LocalDescriptorSet","_handle","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","COUNT","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","layout","passes","localSetLayout","_descriptorSet","bindBuffer","BINDING","binding","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","MAT_WORLD_IT_OFFSET","_localDescriptorSetCache","_localCachePool","caches","cache","localDs","descriptorSetTextureMap","has","descriptorSet","map","internal"],"mappings":"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"}