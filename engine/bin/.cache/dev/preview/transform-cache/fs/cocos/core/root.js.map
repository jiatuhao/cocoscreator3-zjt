{"version":3,"sources":["../../../../../../../../cocos/core/root.ts"],"names":["builtinResMgr","Pool","ForwardPipeline","Camera","LightType","RenderScene","legacyCC","RenderWindow","ColorAttachment","DepthStencilAttachment","RenderPassInfo","StoreOp","RootPool","RootView","NULL_HANDLE","warnID","Root","_device","_mainWindow","window","_curWindow","_tempWindow","_windows","_pipeline","_batcher","_scenes","get","_poolHandle","CUMULATIVE_TIME","FRAME_TIME","_frameCount","_fps","fps","_fixedFPS","_fixedFPSFrameTime","_dataPoolMgr","device","_createSceneFun","_createWindowFun","_modelPools","Map","_cameraPool","_lightPools","_fpsTime","internal","DataPoolManager","registerCreateFunc","initialize","info","alloc","colorAttachment","depthStencilAttachment","depthStoreOp","DISCARD","stencilStoreOp","renderPassInfo","createWindow","title","width","height","swapchainBufferIndices","Promise","resolve","initBuiltinRes","then","view","on","game","canvas","resize","destroy","destroyScenes","dataPoolManager","clear","free","shouldSyncSizeWithSwapchain","setRenderPipeline","rppl","createDefaultPipeline","activate","scene","director","getScene","globals","onGlobalPipelineStateChanged","Batcher2D","flows","i","length","activeWindow","resetCumulativeTime","set","frameMove","deltaTime","removeBatches","update","acquire","windows","scenes","stamp","getTotalFrames","uploadBuffers","emit","Director","EVENT_BEFORE_COMMIT","cameraList","cameras","extractRenderCameras","forEach","camera","push","sort","a","b","priority","render","present","reset","destroyWindow","splice","destroyWindows","createScene","destroyScene","createModel","ModelCtor","p","model","destroyModel","m","constructor","removeModel","name","createCamera","createLight","LightCtor","l","light","destroyLight","type","SPHERE","removeSphereLight","SPOT","removeSpotLight"],"mappings":"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"}