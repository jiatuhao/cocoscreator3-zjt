{"version":3,"sources":["../../../../../../../../../cocos/physics/ammo/ammo-world.ts"],"names":["Ammo","Vec3","AmmoSharedBody","ArrayCollisionMatrix","TupleDictionary","TriggerEventObject","CollisionEventObject","CC_V3_0","CC_V3_1","AmmoConstant","ammo2CocosVec3","cocos2AmmoVec3","error","AmmoInstance","AmmoContactEquation","fastRemoveAt","contactsPool","v3_0","v3_1","AmmoWorld","setAllowSleep","v","setDefaultMaterial","setGravity","gravity","TMP","instance","VECTOR3_0","_btWorld","options","_btBroadphase","_btSolver","_btDispatcher","_btCollisionConfiguration","bodies","ghosts","constraints","triggerArrayMat","collisionArrayMat","contactsDic","oldContactsDic","btDefaultCollisionConfiguration","btCollisionDispatcher","btDbvtBroadphase","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","getPairCache","setOverlapFilterCallback","ccOverlapFilterCallback","setValue","closeHitCB","ClosestRayResultCallback","allHitsCB","AllHitsRayResultCallback","setUseCC","destroy","length","step","deltaTime","timeSinceLastCalled","maxSubStep","undefined","stepSimulation","i","syncPhysicsToScene","syncSceneToPhysics","updateDirty","syncSceneToGhost","syncAfterEvents","raycast","worldRay","pool","results","from","m_rayFromWorld","o","computeHit","maxDistance","to","m_rayToWorld","m_collisionFilterGroup","m_collisionFilterMask","mask","m_closestHitFraction","m_shapePart","m_collisionObject","m_shapeParts","clear","m_hitFractions","m_collisionObjects","hp","m_hitPointWorld","hn","m_hitNormalWorld","rayTest","hasHit","n","size","btObj","at","btCs","getCollisionShape","shape","isCompound","shapeIndex","index","getUserIndex","shared","bodyAndGhosts","wrappedShapes","wrapped","distance","r","add","_assign","collider","push","raycastClosest","result","getSharedBody","node","wrappedBody","addSharedBody","sharedBody","indexOf","addRigidBody","body","collisionFilterGroup","collisionFilterMask","removeSharedBody","removeRigidBody","addGhostObject","addCollisionObject","ghost","removeGhostObject","removeCollisionObject","addConstraint","constraint","impl","enableCollision","removeConstraint","splice","emitEvents","numManifolds","getNumManifolds","manifold","getManifoldByIndexInternal","body0","getBody0","body1","getBody1","useCharacter","isUseCCD","useCCD","numContacts","getNumContacts","j","manifoldPoint","getContactPoint","s0","getShape0","s1","getShape1","shape0","shape1","asb","bodyStruct","btShape0","btShape1","com","castObject","btCompoundShape","getChildShape","m_index0","m_index1","needTriggerEvent","needCollisionEvent","item","get","id","set","contacts","dicL","getLength","apply","key","getKeyByIndex","data","getDataByKey","collider0","collider1","isTrigger","type","selfCollider","otherCollider","emit","attachedRigidBody","isSleeping","cq","c","pop","oldDicL","reset"],"mappings":"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"}