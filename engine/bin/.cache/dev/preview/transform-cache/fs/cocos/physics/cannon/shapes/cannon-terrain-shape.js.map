{"version":3,"sources":["../../../../../../../../../../cocos/physics/cannon/shapes/cannon-terrain-shape.ts"],"names":["CANNON","CannonShape","Vec3","Quat","commitShapeUpdates","CANNON_AABB_LOCAL","AABB","CANNON_AABB","CANNON_TRANSFORM","Transform","Heightfield","prototype","calculateWorldAABB","pos","quat","min","max","frame","result","copy","position","quaternion","s","elementSize","data","lowerBound","set","minValue","upperBound","length","maxValue","toWorldFrame","CannonTerrainShape","setTerrain","v","_terrainID","_uuid","terrain","sizeI","getVertexCountI","sizeJ","getVertexCountJ","DATA","i","j","getHeight","OPTIONS","tileSize","updateProperties","_collider","_shape","onComponentSet","collider","onLoad","impl","updateMinValue","updateMaxValue","updateBoundingSphereRadius","update","_index","_body","_setCenter","fromEuler","_orient","lpos","_offset","add"],"mappings":"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"}