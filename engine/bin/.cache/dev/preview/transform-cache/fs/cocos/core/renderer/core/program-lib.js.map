{"version":3,"sources":["../../../../../../../../../../cocos/core/renderer/core/program-lib.ts"],"names":["getBitCount","cnt","Math","ceil","log2","max","mapDefine","info","def","type","toString","undefined","options","range","console","warn","prepareDefines","defs","tDefs","macros","i","length","tmpl","name","v","value","isDefault","push","getShaderInstanceName","reduce","acc","cur","insertBuiltinBindings","tmplInfo","source","outBindings","target","builtins","tempBlocks","b","blocks","layouts","binding","bindings","find","bd","descriptorType","DESCRIPTOR_BUFFER_TYPE","includes","Array","prototype","unshift","apply","gfxBlocks","tempSamplers","s","samplers","DESCRIPTOR_SAMPLER_TYPE","gfxSamplers","sort","a","getSize","block","members","m","GetTypeSize","count","genHandles","handleMap","offset","j","uniform","genHandle","PropertyType","UBO","SetIndex","MATERIAL","sampler","SAMPLER","dependencyCheck","dependencies","defines","d","slice","getActiveAttributes","out","attributes","gfxAttributes","getDeviceShaderVersion","device","gfxAPI","API","GLES2","WEBGL","GLES3","WEBGL2","globalDescriptorSetLayout","localDescriptorSetLayout","legacyCC","ShaderPool","PipelineLayoutPool","NULL_HANDLE","PipelineLayoutInfo","Attribute","UniformBlock","ShaderInfo","UniformSampler","Uniform","ShaderStage","DescriptorSetLayoutBinding","DescriptorSetLayoutInfo","DescriptorType","ShaderStageFlagBit","_dsLayoutInfo","ProgramLib","_templates","_cache","_templateInfos","register","effect","shaders","define","effectName","shader","curTmpl","hash","_map","findIndex","_offset","uber","samplerStartBinding","blockSizes","UNIFORM_BUFFER","stageFlags","map","attr","format","isNormalized","isInstanced","location","gfxStages","VERTEX","FRAGMENT","hPipelineLayout","setLayouts","getTemplate","getTemplateInfo","getDescriptorSetLayout","isLocal","createDescriptorSetLayout","LOCAL","hasProgram","getKey","tmplDefs","key","tmplDef","mapped","destroyShaderByDefines","names","Object","keys","regexes","val","RegExp","filter","k","every","re","test","get","prog","log","destroy","getGFXShader","pipeline","assign","res","GLOBAL","descriptorSetLayout","alloc","macroArray","prefix","src","glsl3","deviceShaderVersion","error","vert","frag","instanceName","shaderInfo","programLib"],"mappings":"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"}