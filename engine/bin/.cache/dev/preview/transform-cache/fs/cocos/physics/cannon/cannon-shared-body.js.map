{"version":3,"sources":["../../../../../../../../../cocos/physics/cannon/cannon-shared-body.ts"],"names":["CANNON","Quat","Vec3","ERigidBodyType","PhysicsGroup","getWrap","setWrap","PhysicsSystem","TransformBit","commitShapeUpdates","CannonContactEquation","fastRemoveAt","v3_0","quat_0","contactsPool","CollisionEventObject","type","selfCollider","otherCollider","contacts","impl","CannonSharedBody","getSharedBody","node","wrappedWorld","wrappedBody","key","uuid","newSB","sharedBodesMap","has","get","g","DEFAULT","m","instance","collisionMatrix","body","collisionFilterGroup","collisionFilterMask","set","rigidBody","group","v","index","bodies","length","addSharedBody","syncInitial","isRemove","wrappedShapes","isEnabled","sleep","removeSharedBody","ref","destroy","wrappedJoints0","wrappedJoints1","onCollidedListener","onCollided","bind","Body","sleepSpeedLimit","sleepThreshold","material","defaultMaterial","addEventListener","addShape","indexOf","shapes","push","setIndex","offset","shapeOffsets","orient","shapeOrientations","setOffsetAndOrient","isSleeping","wakeUp","removeShape","addJoint","i","removeJoint","syncSceneToPhysics","hasChangedFlags","copy","position","worldPosition","quaternion","worldRotation","aabbNeedsUpdate","SCALE","syncScale","syncPhysicsToScene","n","b","DYNAMIC","previousPosition","previousQuaternion","setScale","worldScale","updateScale0","updateScale1","removeEventListener","World","idToBodyMap","id","event","self","selfShape","other","otherShape","collider","needCollisionEvent","apply","cq","c","pop","shape","emit","Map"],"mappings":"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"}