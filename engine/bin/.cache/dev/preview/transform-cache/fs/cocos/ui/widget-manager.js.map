{"version":3,"sources":["../../../../../../../../cocos/ui/widget-manager.ts"],"names":["align","node","widget","hasTarget","target","inverseTranslate","tInverseTranslate","inverseScale","tInverseScale","computeInverseTransForTarget","parent","targetSize","getReadonlyNodeSize","useGlobal","Scene","getComponent","UITransform","targetAnchor","_defaultAnchor","anchorPoint","isRoot","EDITOR","getPosition","_tempPos","uiTrans","_uiProps","uiTransformComp","x","y","anchor","scale","getScale","alignFlags","AlignFlags","HORIZONTAL","localLeft","localRight","targetWidth","width","visibleRect","left","right","isAbsoluteLeft","isAbsoluteRight","anchorX","scaleX","isStretchWidth","isAlignHorizontalCenter","localHorizontalCenter","isAbsoluteHorizontalCenter","horizontalCenter","targetCenter","isAlignLeft","_lastSize","VERTICAL","localTop","localBottom","targetHeight","height","bottom","top","isAbsoluteBottom","isAbsoluteTop","anchorY","scaleY","isStretchHeight","isAlignVerticalCenter","localVerticalCenter","isAbsoluteVerticalCenter","verticalCenter","targetMiddle","isAlignBottom","setPosition","z","Vec3","set","_lastPos","visitNode","Widget","DEV","_validateTargetInDEV","widgetManager","animationState","animatedSinceLastFrame","alignMode","AlignMode","ONCE","enabled","legacyCC","isValid","activeWidgets","push","children","child","active","refreshScene","scene","director","getScene","isAligning","_nodesOrderDirty","length","i","iterator","_activeWidgetsIterator","_dirty","updateAlignment","Node","isNode","Director","Vec2","View","array","_widgetManager","MutableForwardIterator","previewing","time","init","on","EVENT_AFTER_UPDATE","instance","onResized","thisOnResized","bind","window","addEventListener","add","remove","refreshWidgetOnResized","ON_WINDOW_RESIZE","ALWAYS","setDirty","updateOffsetsToStayPut","e","t","c","Math","abs","widgetNode","widgetParent","zero","one","parentTrans","parentAP","trans","matchSize","myAP","pos","widgetNodeScale","temp","LEFT","l","RIGHT","r","TOP","BOT","b","EVENT_INIT"],"mappings":"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"}