{"version":3,"sources":["../../../../../../../../../cocos/particle/renderer/trail.ts"],"names":["ccclass","tooltip","displayOrder","type","serializable","RenderingSubMesh","director","AttributeName","BufferUsageBit","Format","FormatInfos","MemoryUsageBit","PrimitiveMode","Attribute","IndirectBuffer","BufferInfo","DrawInfo","DRAW_INFO_SIZE","Color","Mat4","Quat","toRadian","Vec3","Pool","scene","CurveRange","GradientRange","Space","TextureMode","TrailMode","legacyCC","PRE_TRIANGLE_INDEX","NEXT_TRIANGLE_INDEX","DIRECTION_THRESHOLD","Math","cos","_temp_trailEle","position","velocity","_temp_quat","_temp_xform","_temp_vec3","_temp_vec3_1","_temp_color","TrailSegment","maxTrailElementNum","start","end","trailElements","push","lifetime","width","direction","color","getElement","idx","length","addElement","splice","newEleLoc","iterateElement","target","f","p","dt","i","count","clear","TrailModule","_enable","val","_trailModel","_particleSystem","processor","updateTrailMaterial","_createModel","rebuild","enabled","onEnable","onDisable","_minParticleDistance","_minSquaredDistance","_space","_vertSize","_trailNum","_trailLifetime","vbOffset","ibOffset","_trailSegments","_particleTrail","_iaInfo","_iaInfoBuffer","_subMeshData","_vertAttrs","_vbF32","_vbUint32","_iBuffer","_needTransform","_material","ATTR_POSITION","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","a","format","size","Map","onInit","ps","minParticleDistance","burstCount","psTime","startLifetime","getMax","psRate","rateOverTime","duration","len","bursts","b","getMaxCount","ceil","lifeTime","enable","_attachToScene","_detachFromScene","_getRenderScene","addModel","removeModel","destroy","destroySubMeshData","root","destroyModel","obj","play","trailIter","values","trail","next","done","value","updateRenderData","updateMaterial","getMaterialInstance","_defaultTrailMat","setSubModelMaterial","update","evaluate","_time","space","World","_simulationSpace","Local","node","getWorldMatrix","getWorldRotation","animate","scaledDt","get","alloc","set","lastSeg","transformMat4","copy","_updateTrailElement","squaredDistance","widthFromParticle","x","widthRatio","trailNum","lastSecondTrail","subtract","lastThirdTrail","equals","ZERO","normalize","_checkDirectionReverse","colorFromParticle","colorOvertime","removeParticle","free","keys","trailSeg","indexOffset","textCoordSeg","startSegEle","_fillVertexBuffer","colorOverTrail","segEle","j","y","z","updateIA","subModels","subModel","inputAssembler","vertexBuffers","indexBuffer","drawInfos","firstIndex","indexCount","beforeRender","createModel","Model","device","vertexBuffer","createBuffer","VERTEX","TRANSFER_DST","HOST","DEVICE","vBuffer","ArrayBuffer","Float32Array","Uint32Array","INDEX","Uint16Array","BYTES_PER_ELEMENT","INDIRECT","vertexCount","TRIANGLE_LIST","trailModel","transform","visFlags","visibility","initSubModel","module","trailEle","multiply","remainingLifetime","colorModifer","xTexCoord","trailEleIdx","indexSet","_val","currElement","prevElement","dot","Particles","Stretch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA8BSA,MAAAA,O,8BAAAA,O;AAASC,MAAAA,O,8BAAAA,O;AAASC,MAAAA,Y,8BAAAA,Y;AAAcC,MAAAA,I,8BAAAA,I;AAAMC,MAAAA,Y,8BAAAA,Y;;AAEtCC,MAAAA,gB,iCAAAA,gB;;AACAC,MAAAA,Q,mBAAAA,Q;;AACAC,MAAAA,a,oBAAAA,a;AAAeC,MAAAA,c,oBAAAA,c;AAAgBC,MAAAA,M,oBAAAA,M;AAAQC,MAAAA,W,oBAAAA,W;AAAaC,MAAAA,c,oBAAAA,c;AAAgBC,MAAAA,a,oBAAAA,a;;AAC5DC,MAAAA,S,mBAAAA,S;AAAmBC,MAAAA,c,mBAAAA,c;AAAgBC,MAAAA,U,mBAAAA,U;AAAYC,MAAAA,Q,mBAAAA,Q;AAAUC,MAAAA,c,mBAAAA,c;;AACjEC,MAAAA,K,oBAAAA,K;AAAOC,MAAAA,I,oBAAAA,I;AAAMC,MAAAA,I,oBAAAA,I;AAAMC,MAAAA,Q,oBAAAA,Q;AAAUC,MAAAA,I,oBAAAA,I;;AAC7BC,MAAAA,I,qBAAAA,I;;AACAC,MAAAA,K,wBAAAA,K;;AACFC,MAAAA,U;;AACAC,MAAAA,a;;AACEC,MAAAA,K,WAAAA,K;AAAOC,MAAAA,W,WAAAA,W;AAAaC,MAAAA,S,WAAAA,S;;AAEpBC,MAAAA,Q,wBAAAA,Q;;;AAEHC,MAAAA,kB,GAAqB,C;AACrBC,MAAAA,mB,GAAsB,KAAK,C;AAC3BC,MAAAA,mB,GAAsBC,IAAI,CAACC,GAAL,CAASd,QAAQ,CAAC,GAAD,CAAjB,C;AAEtBe,MAAAA,c,GAAiB;AAAEC,QAAAA,QAAQ,EAAE,IAAIf,IAAJ,EAAZ;AAAwBgB,QAAAA,QAAQ,EAAE,IAAIhB,IAAJ;AAAlC,O;AACjBiB,MAAAA,U,GAAa,IAAInB,IAAJ,E;AACboB,MAAAA,W,GAAc,IAAIrB,IAAJ,E;AACdsB,MAAAA,U,GAAa,IAAInB,IAAJ,E;AACboB,MAAAA,Y,GAAe,IAAIpB,IAAJ,E;AACfqB,MAAAA,W,GAAc,IAAIzB,KAAJ,E,EAEpB;AAEA;;AAWA;AACM0B,MAAAA,Y;AAKF,8BAAaC,kBAAb,EAAyC;AAAA,eAJlCC,KAIkC;AAAA,eAHlCC,GAGkC;AAAA,eAFlCC,aAEkC;AACrC,eAAKF,KAAL,GAAa,CAAC,CAAd;AACA,eAAKC,GAAL,GAAW,CAAC,CAAZ;AACA,eAAKC,aAAL,GAAqB,EAArB;;AACA,iBAAOH,kBAAkB,EAAzB,EAA6B;AACzB,iBAAKG,aAAL,CAAmBC,IAAnB,CAAwB;AACpBZ,cAAAA,QAAQ,EAAE,IAAIf,IAAJ,EADU;AAEpB4B,cAAAA,QAAQ,EAAE,CAFU;AAGpBC,cAAAA,KAAK,EAAE,CAHa;AAIpBb,cAAAA,QAAQ,EAAE,IAAIhB,IAAJ,EAJU;AAKpB8B,cAAAA,SAAS,EAAE,CALS;AAMpBC,cAAAA,KAAK,EAAE,IAAInC,KAAJ;AANa,aAAxB;AAQH;AACJ;;;;eAEMoC,U,GAAP,oBAAmBC,GAAnB,EAAgC;AAC5B,cAAI,KAAKT,KAAL,KAAe,CAAC,CAApB,EAAuB;AACnB,mBAAO,IAAP;AACH;;AACD,cAAIS,GAAG,GAAG,CAAV,EAAa;AACTA,YAAAA,GAAG,GAAG,CAACA,GAAG,GAAG,KAAKP,aAAL,CAAmBQ,MAA1B,IAAoC,KAAKR,aAAL,CAAmBQ,MAA7D;AACH;;AACD,cAAID,GAAG,IAAI,KAAKP,aAAL,CAAmBQ,MAA9B,EAAsC;AAClCD,YAAAA,GAAG,IAAI,KAAKP,aAAL,CAAmBQ,MAA1B;AACH;;AACD,iBAAO,KAAKR,aAAL,CAAmBO,GAAnB,CAAP;AACH,S;;eAEME,U,GAAP,sBAA2C;AACvC,cAAI,KAAKT,aAAL,CAAmBQ,MAAnB,KAA8B,CAAlC,EAAqC;AACjC,mBAAO,IAAP;AACH;;AACD,cAAI,KAAKV,KAAL,KAAe,CAAC,CAApB,EAAuB;AACnB,iBAAKA,KAAL,GAAa,CAAb;AACA,iBAAKC,GAAL,GAAW,CAAX;AACA,mBAAO,KAAKC,aAAL,CAAmB,CAAnB,CAAP;AACH;;AACD,cAAI,KAAKF,KAAL,KAAe,KAAKC,GAAxB,EAA6B;AACzB,iBAAKC,aAAL,CAAmBU,MAAnB,CAA0B,KAAKX,GAA/B,EAAoC,CAApC,EAAuC;AACnCV,cAAAA,QAAQ,EAAE,IAAIf,IAAJ,EADyB;AAEnC4B,cAAAA,QAAQ,EAAE,CAFyB;AAGnCC,cAAAA,KAAK,EAAE,CAH4B;AAInCb,cAAAA,QAAQ,EAAE,IAAIhB,IAAJ,EAJyB;AAKnC8B,cAAAA,SAAS,EAAE,CALwB;AAMnCC,cAAAA,KAAK,EAAE,IAAInC,KAAJ;AAN4B,aAAvC;AAQA,iBAAK4B,KAAL;AACA,iBAAKA,KAAL,IAAc,KAAKE,aAAL,CAAmBQ,MAAjC;AACH;;AACD,cAAMG,SAAS,GAAG,KAAKZ,GAAL,EAAlB;AACA,eAAKA,GAAL,IAAY,KAAKC,aAAL,CAAmBQ,MAA/B;AACA,iBAAO,KAAKR,aAAL,CAAmBW,SAAnB,CAAP;AACH,S;;eAEMC,c,GAAP,wBAAuBC,MAAvB,EAA4CC,CAA5C,EAA4HC,CAA5H,EAAyIC,EAAzI,EAAqJ;AACjJ,cAAMjB,GAAG,GAAG,KAAKD,KAAL,IAAc,KAAKC,GAAnB,GAAyB,KAAKA,GAAL,GAAW,KAAKC,aAAL,CAAmBQ,MAAvD,GAAgE,KAAKT,GAAjF;;AACA,eAAK,IAAIkB,CAAC,GAAG,KAAKnB,KAAlB,EAAyBmB,CAAC,GAAGlB,GAA7B,EAAkCkB,CAAC,EAAnC,EAAuC;AACnC,gBAAIH,CAAC,CAACD,MAAD,EAAS,KAAKb,aAAL,CAAmBiB,CAAC,GAAG,KAAKjB,aAAL,CAAmBQ,MAA1C,CAAT,EAA4DO,CAA5D,EAA+DC,EAA/D,CAAL,EAAyE;AACrE,mBAAKlB,KAAL;AACA,mBAAKA,KAAL,IAAc,KAAKE,aAAL,CAAmBQ,MAAjC;AACH;AACJ;;AACD,cAAI,KAAKV,KAAL,KAAeC,GAAnB,EAAwB;AACpB,iBAAKD,KAAL,GAAa,CAAC,CAAd;AACA,iBAAKC,GAAL,GAAW,CAAC,CAAZ;AACH;AACJ,S;;eAEMmB,K,GAAP,iBAAgB;AACZ,cAAI,KAAKpB,KAAL,GAAa,KAAKC,GAAtB,EAA2B;AACvB,mBAAO,KAAKA,GAAL,GAAW,KAAKD,KAAvB;AACH,WAFD,MAEO;AACH,mBAAO,KAAKE,aAAL,CAAmBQ,MAAnB,GAA4B,KAAKT,GAAjC,GAAuC,KAAKD,KAAnD;AACH;AACJ,S;;eAEMqB,K,GAAP,iBAAgB;AACZ,eAAKrB,KAAL,GAAa,CAAC,CAAd;AACA,eAAKC,GAAL,GAAW,CAAC,CAAZ;AACH,S,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;yBAIiBqB,W,WADpBpE,OAAO,CAAC,gBAAD,C,UAKHE,YAAY,CAAC,CAAD,C,UA+BZC,IAAI,CAAC0B,SAAD,C,UAEJ3B,YAAY,CAAC,CAAD,C,UACZD,OAAO,CAAC,2BAAD,C,UAMPE,IAAI,CAACsB,UAAD,C,UAEJvB,YAAY,CAAC,CAAD,C,UACZD,OAAO,CAAC,SAAD,C,UASPC,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,qBAAD,C,WAUPE,IAAI,CAACwB,KAAD,C,WACJzB,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,wCAAD,C,WAqBPE,IAAI,CAACyB,WAAD,C,WAEJ1B,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,gDAAD,C,WAIPC,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,aAAD,C,WAMPE,IAAI,CAACsB,UAAD,C,WAEJvB,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,uBAAD,C,WAIPC,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,aAAD,C,WAGPE,IAAI,CAACuB,aAAD,C,WAEJxB,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,kBAAD,C,WAGPE,IAAI,CAACuB,aAAD,C,WAEJxB,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,cAAD,C,WAMPE,IAAI,CAACwB,KAAD,C;;;;AAjIL;AACJ;AACA;8BAEyB;AACjB,mBAAO,KAAK0C,OAAZ;AACH,W;4BAEkBC,G,EAAK;AACpB,gBAAIA,GAAG,KAAK,KAAKD,OAAb,IAAwB,KAAKE,WAAjC,EAA8C;AAC1C;AACH;;AACD,gBAAID,GAAG,IAAI,CAAC,KAAKD,OAAjB,EAA0B;AACtB,mBAAKA,OAAL,GAAeC,GAAf;;AACA,mBAAKE,eAAL,CAAqBC,SAArB,CAA+BC,mBAA/B;AACH;;AACD,gBAAIJ,GAAG,IAAI,CAAC,KAAKC,WAAjB,EAA8B;AAC1B,mBAAKI,YAAL;;AACA,mBAAKC,OAAL;AACH;;AACD,iBAAKP,OAAL,GAAeC,GAAf;;AACA,gBAAI,KAAKC,WAAT,EAAsB;AAClB,mBAAKA,WAAL,CAAiBM,OAAjB,GAA2BP,GAA3B;AACH;;AAEDA,YAAAA,GAAG,GAAG,KAAKQ,QAAL,EAAH,GAAqB,KAAKC,SAAL,EAAxB;AACH;;;;AA0BD;AACJ;AACA;8BAGsC;AAC9B,mBAAO,KAAKC,oBAAZ;AACH,W;4BAE+BV,G,EAAK;AACjC,iBAAKU,oBAAL,GAA4BV,GAA5B;AACA,iBAAKW,mBAAL,GAA2BX,GAAG,GAAGA,GAAjC;AACH;;;8BAKmB;AAChB,mBAAO,KAAKY,MAAZ;AACH,W;4BAEiBZ,G,EAAK;AACnB,iBAAKY,MAAL,GAAcZ,GAAd;;AACA,gBAAI,KAAKE,eAAT,EAA0B;AACtB,mBAAKA,eAAL,CAAqBC,SAArB,CAA+BC,mBAA/B;AACH;AACJ;AAED;AACJ;AACA;;;;AAwEI,+BAAe;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAnBPO,mBAmBO,GAnBe,CAmBf;AAAA,eAlBPE,SAkBO;AAAA,eAjBPC,SAiBO,GAjBK,CAiBL;AAAA,eAhBPC,cAgBO,GAhBU,CAgBV;AAAA,eAfPC,QAeO,GAfI,CAeJ;AAAA,eAdPC,QAcO,GAdI,CAcJ;AAAA,eAbPC,cAaO,GAbqC,IAarC;AAAA,eAZPC,cAYO;AAAA,eAXPlB,WAWO,GAX2B,IAW3B;AAAA,eAVPmB,OAUO;AAAA,eATPC,aASO,GATwB,IASxB;AAAA,eARPC,YAQO,GARiC,IAQjC;AAAA,eAPPC,UAOO;AAAA,eANPC,MAMO,GANuB,IAMvB;AAAA,eALPC,SAKO,GALyB,IAKzB;AAAA,eAJPC,QAIO,GAJwB,IAIxB;AAAA,eAHPC,cAGO,GAHU,KAGV;AAAA,eAFPC,SAEO,GAFsB,IAEtB;AACX,eAAKR,OAAL,GAAe,IAAI5E,cAAJ,CAAmB,CAAC,IAAIE,QAAJ,EAAD,CAAnB,CAAf;AAEA,eAAK6E,UAAL,GAAkB,CACd,IAAIhF,SAAJ,CAAcN,aAAa,CAAC4F,aAA5B,EAA2C1F,MAAM,CAAC2F,MAAlD,CADc,EAC+C;AAC7D,cAAIvF,SAAJ,CAAcN,aAAa,CAAC8F,cAA5B,EAA4C5F,MAAM,CAAC6F,OAAnD,CAFc,EAE+C;AAC7D;AACA,cAAIzF,SAAJ,CAAcN,aAAa,CAACgG,eAA5B,EAA6C9F,MAAM,CAAC2F,MAApD,CAJc,EAI+C;AAC7D,cAAIvF,SAAJ,CAAcN,aAAa,CAACiG,UAA5B,EAAwC/F,MAAM,CAACgG,KAA/C,EAAsD,IAAtD,CALc,CAAlB;AAOA,eAAKtB,SAAL,GAAiB,CAAjB;;AACA,+DAAgB,KAAKU,UAArB,wCAAiC;AAAA,gBAAtBa,CAAsB;AAC7B,iBAAKvB,SAAL,IAAkBzE,WAAW,CAACgG,CAAC,CAACC,MAAH,CAAX,CAAsBC,IAAxC;AACH;;AAED,eAAKnB,cAAL,GAAsB,IAAIoB,GAAJ,EAAtB;AACH;;;;gBAEMC,M,GAAP,gBAAeC,EAAf,EAAmB;AACf,eAAKvC,eAAL,GAAuBuC,EAAvB;AACA,eAAKC,mBAAL,GAA2B,KAAKhC,oBAAhC;AACA,cAAIiC,UAAU,GAAG,CAAjB;AACA,cAAMC,MAAM,GAAGH,EAAE,CAACI,aAAH,CAAiBC,MAAjB,EAAf;AACA,cAAMC,MAAM,GAAGN,EAAE,CAACO,YAAH,CAAgBF,MAAhB,EAAf;AACA,cAAMG,QAAQ,GAAGR,EAAE,CAACQ,QAApB;;AACA,eAAK,IAAItD,CAAC,GAAG,CAAR,EAAWuD,GAAG,GAAGT,EAAE,CAACU,MAAH,CAAUjE,MAAhC,EAAwCS,CAAC,GAAGuD,GAA5C,EAAiDvD,CAAC,EAAlD,EAAsD;AAClD,gBAAMyD,CAAC,GAAGX,EAAE,CAACU,MAAH,CAAUxD,CAAV,CAAV;AACAgD,YAAAA,UAAU,IAAIS,CAAC,CAACC,WAAF,CAAcZ,EAAd,IAAoB7E,IAAI,CAAC0F,IAAL,CAAUV,MAAM,GAAGK,QAAnB,CAAlC;AACH;;AACD,eAAKnC,SAAL,GAAiBlD,IAAI,CAAC0F,IAAL,CAAUV,MAAM,GAAG,KAAKW,QAAL,CAAcT,MAAd,EAAT,GAAkC,EAAlC,IAAwCC,MAAM,GAAGE,QAAT,GAAoBN,UAA5D,CAAV,CAAjB;AACA,eAAKzB,cAAL,GAAsB,IAAIjE,IAAJ,CAAS;AAAA,mBAAM,IAAIqB,YAAJ,CAAiB,EAAjB,CAAN;AAAA,WAAT,EAAqCV,IAAI,CAAC0F,IAAL,CAAUP,MAAM,GAAGE,QAAnB,CAArC,CAAtB;;AACA,cAAI,KAAKlD,OAAT,EAAkB;AACd,iBAAKyD,MAAL,GAAc,KAAKzD,OAAnB;AACH;AACJ,S;;gBAEMS,Q,GAAP,oBAAmB;AACf,eAAKiD,cAAL;AACH,S;;gBAEMhD,S,GAAP,qBAAoB;AAChB,eAAKU,cAAL,CAAoBtB,KAApB;;AACA,eAAK6D,gBAAL;AACH,S;;gBAEMD,c,GAAP,0BAAyB;AACrB,cAAI,KAAKxD,WAAT,EAAsB;AAClB,gBAAI,KAAKA,WAAL,CAAiB/C,KAArB,EAA4B;AACxB,mBAAKwG,gBAAL;AACH;;AACD,iBAAKxD,eAAL,CAAqByD,eAArB,GAAuCC,QAAvC,CAAgD,KAAK3D,WAArD;AACH;AACJ,S;;gBAEMyD,gB,GAAP,4BAA2B;AACvB,cAAI,KAAKzD,WAAL,IAAoB,KAAKA,WAAL,CAAiB/C,KAAzC,EAAgD;AAC5C,iBAAK+C,WAAL,CAAiB/C,KAAjB,CAAuB2G,WAAvB,CAAmC,KAAK5D,WAAxC;AACH;AACJ,S;;gBAEM6D,O,GAAP,mBAAkB;AACd,eAAKC,kBAAL;;AACA,cAAI,KAAK9D,WAAT,EAAsB;AAClBjE,YAAAA,QAAQ,CAACgI,IAAT,CAAeC,YAAf,CAA4B,KAAKhE,WAAjC;AACA,iBAAKA,WAAL,GAAmB,IAAnB;AACH;;AACD,cAAI,KAAKiB,cAAT,EAAyB;AACrB,iBAAKA,cAAL,CAAoB4C,OAApB,CAA4B,UAACI,GAAD,EAAuB;AAAEA,cAAAA,GAAG,CAACxF,aAAJ,CAAkBQ,MAAlB,GAA2B,CAA3B;AAA+B,aAApF;;AACA,iBAAKgC,cAAL,GAAsB,IAAtB;AACH;AACJ,S;;gBAEMiD,I,GAAP,gBAAe;AACX,cAAI,KAAKlE,WAAL,IAAoB,KAAKF,OAA7B,EAAsC;AAClC,iBAAKE,WAAL,CAAiBM,OAAjB,GAA2B,IAA3B;AACH;AACJ,S;;gBAEMV,K,GAAP,iBAAgB;AACZ,cAAI,KAAK2D,MAAT,EAAiB;AACb,gBAAMY,SAAS,GAAG,KAAKjD,cAAL,CAAoBkD,MAApB,EAAlB;;AACA,gBAAIC,KAAK,GAAGF,SAAS,CAACG,IAAV,EAAZ;;AACA,mBAAO,CAACD,KAAK,CAACE,IAAd,EAAoB;AAChBF,cAAAA,KAAK,CAACG,KAAN,CAAY5E,KAAZ;AACAyE,cAAAA,KAAK,GAAGF,SAAS,CAACG,IAAV,EAAR;AACH;;AACD,iBAAKpD,cAAL,CAAoBtB,KAApB;;AACA,iBAAK6E,gBAAL;AACA,gBAAI,KAAKzE,WAAT,EAAsB,KAAKA,WAAL,CAAiBM,OAAjB,GAA2B,KAA3B;AACzB;AACJ,S;;gBAEMoE,c,GAAP,0BAAyB;AACrB,cAAI,KAAKzE,eAAT,EAA0B;AACtB,iBAAK0B,SAAL,GAAiB,KAAK1B,eAAL,CAAqB0E,mBAArB,CAAyC,CAAzC,KAA+C,KAAK1E,eAAL,CAAqBC,SAArB,CAA+B0E,gBAA/F;;AACA,gBAAI,KAAK5E,WAAT,EAAsB;AAClB,mBAAKA,WAAL,CAAiB6E,mBAAjB,CAAqC,CAArC,EAAwC,KAAKlD,SAA7C;AACH;AACJ;AACJ,S;;gBAEMmD,M,GAAP,kBAAiB;AACb,eAAKhE,cAAL,GAAsB,KAAKwC,QAAL,CAAcyB,QAAd,CAAuB,KAAK9E,eAAL,CAAqB+E,KAA5C,EAAmD,CAAnD,CAAtB;;AACA,cAAI,KAAKC,KAAL,KAAe7H,KAAK,CAAC8H,KAArB,IAA8B,KAAKjF,eAAL,CAAqBkF,gBAArB,KAA0C/H,KAAK,CAACgI,KAAlF,EAAyF;AACrF,iBAAK1D,cAAL,GAAsB,IAAtB;;AACA,iBAAKzB,eAAL,CAAqBoF,IAArB,CAA0BC,cAA1B,CAAyCrH,WAAzC;;AACA,iBAAKgC,eAAL,CAAqBoF,IAArB,CAA0BE,gBAA1B,CAA2CvH,UAA3C;AACH,WAJD,MAIO;AACH,iBAAK0D,cAAL,GAAsB,KAAtB;AACH;AACJ,S;;gBAEM8D,O,GAAP,iBAAgBhG,CAAhB,EAA6BiG,QAA7B,EAA+C;AAC3C,cAAI,CAAC,KAAKxE,cAAV,EAA0B;AACtB;AACH;;AACD,cAAIoD,KAAK,GAAG,KAAKnD,cAAL,CAAoBwE,GAApB,CAAwBlG,CAAxB,CAAZ;;AACA,cAAI,CAAC6E,KAAL,EAAY;AACRA,YAAAA,KAAK,GAAG,KAAKpD,cAAL,CAAoB0E,KAApB,EAAR;;AACA,iBAAKzE,cAAL,CAAoB0E,GAApB,CAAwBpG,CAAxB,EAA2B6E,KAA3B,EAFQ,CAGR;;;AACA;AACH;;AACD,cAAIwB,OAAO,GAAGxB,KAAK,CAACtF,UAAN,CAAiBsF,KAAK,CAAC7F,GAAN,GAAY,CAA7B,CAAd;;AACA,cAAI,KAAKkD,cAAT,EAAyB;AACrB3E,YAAAA,IAAI,CAAC+I,aAAL,CAAmB5H,UAAnB,EAA+BsB,CAAC,CAAC1B,QAAjC,EAA2CG,WAA3C;AACH,WAFD,MAEO;AACHlB,YAAAA,IAAI,CAACgJ,IAAL,CAAU7H,UAAV,EAAsBsB,CAAC,CAAC1B,QAAxB;AACH;;AACD,cAAI+H,OAAJ,EAAa;AACTxB,YAAAA,KAAK,CAAChF,cAAN,CAAqB,IAArB,EAA2B,KAAK2G,mBAAhC,EAAqDxG,CAArD,EAAwDiG,QAAxD;;AACA,gBAAI1I,IAAI,CAACkJ,eAAL,CAAqBJ,OAAO,CAAC/H,QAA7B,EAAuCI,UAAvC,IAAqD,KAAKwC,mBAA9D,EAAmF;AAC/E;AACH;AACJ;;AACDmF,UAAAA,OAAO,GAAGxB,KAAK,CAACnF,UAAN,EAAV;;AACA,cAAI,CAAC2G,OAAL,EAAc;AACV;AACH;;AACD9I,UAAAA,IAAI,CAACgJ,IAAL,CAAUF,OAAO,CAAC/H,QAAlB,EAA4BI,UAA5B;AACA2H,UAAAA,OAAO,CAAClH,QAAR,GAAmB,CAAnB;;AACA,cAAI,KAAKuH,iBAAT,EAA4B;AACxBL,YAAAA,OAAO,CAACjH,KAAR,GAAgBY,CAAC,CAAC6C,IAAF,CAAO8D,CAAP,GAAW,KAAKC,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAA3B;AACH,WAFD,MAEO;AACHc,YAAAA,OAAO,CAACjH,KAAR,GAAgB,KAAKwH,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAAhB;AACH;;AACD,cAAMsB,QAAQ,GAAGhC,KAAK,CAAC1E,KAAN,EAAjB;;AACA,cAAI0G,QAAQ,KAAK,CAAjB,EAAoB;AAChB,gBAAMC,eAAe,GAAGjC,KAAK,CAACtF,UAAN,CAAiBsF,KAAK,CAAC7F,GAAN,GAAY,CAA7B,CAAxB;AACAzB,YAAAA,IAAI,CAACwJ,QAAL,CAAcD,eAAe,CAACvI,QAA9B,EAAwC8H,OAAO,CAAC/H,QAAhD,EAA0DwI,eAAe,CAACxI,QAA1E;AACH,WAHD,MAGO,IAAIuI,QAAQ,GAAG,CAAf,EAAkB;AACrB,gBAAMC,gBAAe,GAAGjC,KAAK,CAACtF,UAAN,CAAiBsF,KAAK,CAAC7F,GAAN,GAAY,CAA7B,CAAxB;;AACA,gBAAMgI,cAAc,GAAGnC,KAAK,CAACtF,UAAN,CAAiBsF,KAAK,CAAC7F,GAAN,GAAY,CAA7B,CAAvB;AACAzB,YAAAA,IAAI,CAACwJ,QAAL,CAAcrI,UAAd,EAA0BsI,cAAc,CAAC1I,QAAzC,EAAmDwI,gBAAe,CAACxI,QAAnE;AACAf,YAAAA,IAAI,CAACwJ,QAAL,CAAcpI,YAAd,EAA4B0H,OAAO,CAAC/H,QAApC,EAA8CwI,gBAAe,CAACxI,QAA9D;AACAf,YAAAA,IAAI,CAACwJ,QAAL,CAAcD,gBAAe,CAACvI,QAA9B,EAAwCI,YAAxC,EAAsDD,UAAtD;;AACA,gBAAInB,IAAI,CAAC0J,MAAL,CAAY1J,IAAI,CAAC2J,IAAjB,EAAuBJ,gBAAe,CAACvI,QAAvC,CAAJ,EAAsD;AAClDhB,cAAAA,IAAI,CAACgJ,IAAL,CAAUO,gBAAe,CAACvI,QAA1B,EAAoCG,UAApC;AACH;;AACDnB,YAAAA,IAAI,CAAC4J,SAAL,CAAeL,gBAAe,CAACvI,QAA/B,EAAyCuI,gBAAe,CAACvI,QAAzD;;AACA,iBAAK6I,sBAAL,CAA4BN,gBAA5B,EAA6CE,cAA7C;AACH;;AACD,cAAI,KAAKK,iBAAT,EAA4B;AACxBhB,YAAAA,OAAO,CAAC/G,KAAR,CAAc8G,GAAd,CAAkBpG,CAAC,CAACV,KAApB;AACH,WAFD,MAEO;AACH+G,YAAAA,OAAO,CAAC/G,KAAR,CAAc8G,GAAd,CAAkB,KAAKkB,aAAL,CAAmB/B,QAAnB,CAA4B,CAA5B,EAA+B,CAA/B,CAAlB;AACH;AACJ,S;;gBAEMgC,c,GAAP,wBAAuBvH,CAAvB,EAAoC;AAChC,cAAM6E,KAAK,GAAG,KAAKnD,cAAL,CAAoBwE,GAApB,CAAwBlG,CAAxB,CAAd;;AACA,cAAI6E,KAAK,IAAI,KAAKpD,cAAlB,EAAkC;AAC9BoD,YAAAA,KAAK,CAACzE,KAAN;;AACA,iBAAKqB,cAAL,CAAoB+F,IAApB,CAAyB3C,KAAzB;;AACA,iBAAKnD,cAAL,WAA2B1B,CAA3B;AACH;AACJ,S;;gBAEMiF,gB,GAAP,4BAA2B;AACvB,eAAK1D,QAAL,GAAgB,CAAhB;AACA,eAAKC,QAAL,GAAgB,CAAhB;;AACA,gEAAgB,KAAKE,cAAL,CAAoB+F,IAApB,EAAhB,2CAA4C;AAAA,gBAAjCzH,CAAiC;;AACxC,gBAAM0H,QAAQ,GAAG,KAAKhG,cAAL,CAAoBwE,GAApB,CAAwBlG,CAAxB,CAAjB;;AACA,gBAAI0H,QAAQ,CAAC3I,KAAT,KAAmB,CAAC,CAAxB,EAA2B;AACvB;AACH;;AACD,gBAAM4I,WAAW,GAAG,KAAKpG,QAAL,GAAgB,CAAhB,GAAoB,KAAKH,SAA7C;AACA,gBAAMpC,GAAG,GAAG0I,QAAQ,CAAC3I,KAAT,IAAkB2I,QAAQ,CAAC1I,GAA3B,GAAiC0I,QAAQ,CAAC1I,GAAT,GAAe0I,QAAQ,CAACzI,aAAT,CAAuBQ,MAAvE,GAAgFiI,QAAQ,CAAC1I,GAArG;AACA,gBAAM6H,QAAQ,GAAG7H,GAAG,GAAG0I,QAAQ,CAAC3I,KAAhC,CAPwC,CAQxC;;AACA,gBAAM6I,YAAY,GAAG,IAAKf;AAAS;AAAnC;AACA,gBAAMgB,WAAW,GAAGH,QAAQ,CAACzI,aAAT,CAAuByI,QAAQ,CAAC3I,KAAhC,CAApB;;AACA,iBAAK+I,iBAAL,CAAuBD,WAAvB,EAAoC,KAAKE,cAAL,CAAoBxC,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,CAApC,EAAwEoC,WAAxE,EAAqF,CAArF,EAAwF,CAAxF,EAA2F1J,mBAA3F;;AACA,iBAAK,IAAIiC,CAAC,GAAGwH,QAAQ,CAAC3I,KAAT,GAAiB,CAA9B,EAAiCmB,CAAC,GAAGlB,GAArC,EAA0CkB,CAAC,EAA3C,EAA+C;AAC3C,kBAAM8H,MAAM,GAAGN,QAAQ,CAACzI,aAAT,CAAuBiB,CAAC,GAAGwH,QAAQ,CAACzI,aAAT,CAAuBQ,MAAlD,CAAf;AACA,kBAAMwI,CAAC,GAAG/H,CAAC,GAAGwH,QAAQ,CAAC3I,KAAvB;;AACA,mBAAK+I,iBAAL,CAAuBE,MAAvB,EAA+B,KAAKD,cAAL,CAAoBxC,QAApB,CAA6B,IAAI0C,CAAC,GAAGpB,QAArC,EAA+C,CAA/C,CAA/B,EAAkFc,WAAlF,EAA+F,IAAIM,CAAC,GAAGL,YAAvG,EAAqHK,CAArH,EAAwHjK,kBAAkB,GAAGC,mBAA7I;AACH;;AACD,gBAAI,KAAKiE,cAAT,EAAyB;AACrB3E,cAAAA,IAAI,CAAC+I,aAAL,CAAmBjI,cAAc,CAACC,QAAlC,EAA4C0B,CAAC,CAAC1B,QAA9C,EAAwDG,WAAxD;AACH,aAFD,MAEO;AACHlB,cAAAA,IAAI,CAACgJ,IAAL,CAAUlI,cAAc,CAACC,QAAzB,EAAmC0B,CAAC,CAAC1B,QAArC;AACH;;AACD,gBAAIuI,QAAQ,KAAK,CAAb,IAAkBA,QAAQ,KAAK,CAAnC,EAAsC;AAClC,kBAAMC,eAAe,GAAGY,QAAQ,CAACnI,UAAT,CAAoBmI,QAAQ,CAAC1I,GAAT,GAAe,CAAnC,CAAxB;AACAzB,cAAAA,IAAI,CAACwJ,QAAL,CAAcD,eAAe,CAACvI,QAA9B,EAAwCF,cAAc,CAACC,QAAvD,EAAiEwI,eAAe,CAACxI,QAAjF;AACA,mBAAKyD,MAAL,CAAa,KAAKR,QAAL,GAAgB,KAAKH,SAAL,GAAiB,CAAjC,GAAqC,CAAlD,IAAuD0F,eAAe,CAACvI,QAAhB,CAAyBoI,CAAhF;AACA,mBAAK5E,MAAL,CAAa,KAAKR,QAAL,GAAgB,KAAKH,SAAL,GAAiB,CAAjC,GAAqC,CAAlD,IAAuD0F,eAAe,CAACvI,QAAhB,CAAyB2J,CAAhF;AACA,mBAAKnG,MAAL,CAAa,KAAKR,QAAL,GAAgB,KAAKH,SAAL,GAAiB,CAAjC,GAAqC,CAAlD,IAAuD0F,eAAe,CAACvI,QAAhB,CAAyB4J,CAAhF;AACA,mBAAKpG,MAAL,CAAa,KAAKR,QAAL,GAAgB,CAA7B,IAAkCuF,eAAe,CAACvI,QAAhB,CAAyBoI,CAA3D;AACA,mBAAK5E,MAAL,CAAa,KAAKR,QAAL,GAAgB,CAA7B,IAAkCuF,eAAe,CAACvI,QAAhB,CAAyB2J,CAA3D;AACA,mBAAKnG,MAAL,CAAa,KAAKR,QAAL,GAAgB,CAA7B,IAAkCuF,eAAe,CAACvI,QAAhB,CAAyB4J,CAA3D;AACA5K,cAAAA,IAAI,CAACwJ,QAAL,CAAc1I,cAAc,CAACE,QAA7B,EAAuCF,cAAc,CAACC,QAAtD,EAAgEwI,eAAe,CAACxI,QAAhF;;AACA,mBAAK8I,sBAAL,CAA4B/I,cAA5B,EAA4CyI,eAA5C;AACH,aAXD,MAWO,IAAID,QAAQ,GAAG,CAAf,EAAkB;AACrB,kBAAMC,iBAAe,GAAGY,QAAQ,CAACnI,UAAT,CAAoBmI,QAAQ,CAAC1I,GAAT,GAAe,CAAnC,CAAxB;;AACA,kBAAMgI,cAAc,GAAGU,QAAQ,CAACnI,UAAT,CAAoBmI,QAAQ,CAAC1I,GAAT,GAAe,CAAnC,CAAvB;AACAzB,cAAAA,IAAI,CAACwJ,QAAL,CAAcrI,UAAd,EAA0BsI,cAAc,CAAC1I,QAAzC,EAAmDwI,iBAAe,CAACxI,QAAnE;AACAf,cAAAA,IAAI,CAACwJ,QAAL,CAAcpI,YAAd,EAA4BN,cAAc,CAACC,QAA3C,EAAqDwI,iBAAe,CAACxI,QAArE;AACAf,cAAAA,IAAI,CAAC4J,SAAL,CAAezI,UAAf,EAA2BA,UAA3B;AACAnB,cAAAA,IAAI,CAAC4J,SAAL,CAAexI,YAAf,EAA6BA,YAA7B;AACApB,cAAAA,IAAI,CAACwJ,QAAL,CAAcD,iBAAe,CAACvI,QAA9B,EAAwCI,YAAxC,EAAsDD,UAAtD;AACAnB,cAAAA,IAAI,CAAC4J,SAAL,CAAeL,iBAAe,CAACvI,QAA/B,EAAyCuI,iBAAe,CAACvI,QAAzD;;AACA,mBAAK6I,sBAAL,CAA4BN,iBAA5B,EAA6CE,cAA7C,EATqB,CAUrB;;;AACA,mBAAKzF,QAAL,IAAiB,KAAKH,SAAL,GAAiB,CAAjB,GAAqB,CAAtC;AACA,mBAAKI,QAAL,IAAiB,CAAjB,CAZqB,CAarB;;AACA,mBAAKsG,iBAAL,CAAuBhB,iBAAvB,EAAwC,KAAKiB,cAAL,CAAoBxC,QAApB,CAA6BqC,YAA7B,EAA2C,CAA3C,CAAxC,EAAuFD,WAAvF,EAAoGC,YAApG,EAAkHf,QAAQ,GAAG,CAA7H,EAAgI7I,kBAAkB,GAAGC,mBAArJ;;AACAV,cAAAA,IAAI,CAACwJ,QAAL,CAAc1I,cAAc,CAACE,QAA7B,EAAuCF,cAAc,CAACC,QAAtD,EAAgEwI,iBAAe,CAACxI,QAAhF;AACAf,cAAAA,IAAI,CAAC4J,SAAL,CAAe9I,cAAc,CAACE,QAA9B,EAAwCF,cAAc,CAACE,QAAvD;;AACA,mBAAK6I,sBAAL,CAA4B/I,cAA5B,EAA4CyI,iBAA5C;AACH;;AACD,gBAAI,KAAKJ,iBAAT,EAA4B;AACxBrI,cAAAA,cAAc,CAACe,KAAf,GAAuBY,CAAC,CAAC6C,IAAF,CAAO8D,CAAP,GAAW,KAAKC,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAAlC;AACH,aAFD,MAEO;AACHlH,cAAAA,cAAc,CAACe,KAAf,GAAuB,KAAKwH,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAAvB;AACH;;AACDlH,YAAAA,cAAc,CAACiB,KAAf,GAAuBU,CAAC,CAACV,KAAzB;;AAEA,gBAAI/B,IAAI,CAAC0J,MAAL,CAAY5I,cAAc,CAACE,QAA3B,EAAqChB,IAAI,CAAC2J,IAA1C,CAAJ,EAAqD;AACjD,mBAAK1F,QAAL,IAAiB,CAAjB;AACH,aAFD,MAEO;AACH,mBAAKsG,iBAAL,CAAuBzJ,cAAvB,EAAuC,KAAK0J,cAAL,CAAoBxC,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,CAAvC,EAA2EoC,WAA3E,EAAwF,CAAxF,EAA2Fd,QAA3F,EAAqG7I,kBAArG;AACH;AACJ;;AACD,eAAKwC,WAAL,CAAkBM,OAAlB,GAA4B,KAAKU,QAAL,GAAgB,CAA5C;AACH,S;;gBAEM4G,Q,GAAP,kBAAiBjI,KAAjB,EAAgC;AAC5B,cAAMkI,SAAS,GAAG,KAAK7H,WAAL,IAAoB,KAAKA,WAAL,CAAiB6H,SAAvD;;AACA,cAAIA,SAAS,IAAIA,SAAS,CAAC5I,MAAV,GAAmB,CAApC,EAAuC;AACnC,gBAAM6I,QAAQ,GAAGD,SAAS,CAAC,CAAD,CAA1B;AACAC,YAAAA,QAAQ,CAACC,cAAT,CAAwBC,aAAxB,CAAsC,CAAtC,EAAyClD,MAAzC,CAAgD,KAAKvD,MAArD;AACAuG,YAAAA,QAAQ,CAACC,cAAT,CAAwBE,WAAxB,CAAqCnD,MAArC,CAA4C,KAAKrD,QAAjD;AACA,iBAAKN,OAAL,CAAa+G,SAAb,CAAuB,CAAvB,EAA0BC,UAA1B,GAAuC,CAAvC;AACA,iBAAKhH,OAAL,CAAa+G,SAAb,CAAuB,CAAvB,EAA0BE,UAA1B,GAAuCzI,KAAvC;;AACA,iBAAKyB,aAAL,CAAoB0D,MAApB,CAA2B,KAAK3D,OAAhC;AACH;AACJ,S;;gBAEMkH,Y,GAAP,wBAAuB;AACnB,eAAKT,QAAL,CAAc,KAAK5G,QAAnB;AACH,S;;gBAEOZ,Y,GAAR,wBAAwB;AACpB,cAAI,KAAKJ,WAAT,EAAsB;AAClB;AACH;;AAED,eAAKA,WAAL,GAAmBzC,QAAQ,CAACxB,QAAT,CAAkBgI,IAAlB,CAAuBuE,WAAvB,CAAmCrL,KAAK,CAACsL,KAAzC,CAAnB;AACH,S;;gBAEOlI,O,GAAR,mBAAmB;AACf,cAAMmI,MAAc,GAAGzM,QAAQ,CAACgI,IAAT,CAAeyE,MAAtC;AACA,cAAMC,YAAY,GAAGD,MAAM,CAACE,YAAP,CAAoB,IAAIlM,UAAJ,CACrCP,cAAc,CAAC0M,MAAf,GAAwB1M,cAAc,CAAC2M,YADF,EAErCxM,cAAc,CAACyM,IAAf,GAAsBzM,cAAc,CAAC0M,MAFA,EAGrC,KAAKlI,SAAL,IAAkB,KAAKC,SAAL,GAAiB,CAAnC,IAAwC,CAHH,EAIrC,KAAKD,SAJgC,CAApB,CAArB;AAMA,cAAMmI,OAAoB,GAAG,IAAIC,WAAJ,CAAgB,KAAKpI,SAAL,IAAkB,KAAKC,SAAL,GAAiB,CAAnC,IAAwC,CAAxD,CAA7B;AACA,eAAKU,MAAL,GAAc,IAAI0H,YAAJ,CAAiBF,OAAjB,CAAd;AACA,eAAKvH,SAAL,GAAiB,IAAI0H,WAAJ,CAAgBH,OAAhB,CAAjB;AACAN,UAAAA,YAAY,CAAC3D,MAAb,CAAoBiE,OAApB;AAEA,cAAMd,WAAW,GAAGO,MAAM,CAACE,YAAP,CAAoB,IAAIlM,UAAJ,CACpCP,cAAc,CAACkN,KAAf,GAAuBlN,cAAc,CAAC2M,YADF,EAEpCxM,cAAc,CAACyM,IAAf,GAAsBzM,cAAc,CAAC0M,MAFD,EAGpC,KAAKjI,SAAL,GAAiB,CAAjB,GAAqBuI,WAAW,CAACC,iBAHG,EAIpCD,WAAW,CAACC,iBAJwB,CAApB,CAApB;AAMA,eAAK5H,QAAL,GAAgB,IAAI2H,WAAJ,CAAgB,KAAKvI,SAAL,GAAiB,CAAjC,CAAhB;AACAoH,UAAAA,WAAW,CAACnD,MAAZ,CAAmB,KAAKrD,QAAxB;AAEA,eAAKL,aAAL,GAAqBoH,MAAM,CAACE,YAAP,CAAoB,IAAIlM,UAAJ,CACrCP,cAAc,CAACqN,QADsB,EAErClN,cAAc,CAACyM,IAAf,GAAsBzM,cAAc,CAAC0M,MAFA,EAGrCpM,cAHqC,EAIrCA,cAJqC,CAApB,CAArB;AAMA,eAAKyE,OAAL,CAAa+G,SAAb,CAAuB,CAAvB,EAA0BqB,WAA1B,GAAwC,CAAC,KAAK1I,SAAL,GAAiB,CAAlB,IAAuB,CAA/D;AACA,eAAKM,OAAL,CAAa+G,SAAb,CAAuB,CAAvB,EAA0BE,UAA1B,GAAuC,KAAKvH,SAAL,GAAiB,CAAxD;;AACA,eAAKO,aAAL,CAAmB0D,MAAnB,CAA0B,KAAK3D,OAA/B;;AAEA,eAAKE,YAAL,GAAoB,IAAIvF,gBAAJ,CAAqB,CAAC2M,YAAD,CAArB,EAAqC,KAAKnH,UAA1C,EAAsDjF,aAAa,CAACmN,aAApE,EAAmFvB,WAAnF,EAAgG,KAAK7G,aAArG,CAApB;AAEA,cAAMqI,UAAU,GAAG,KAAKzJ,WAAxB;;AACA,cAAIyJ,UAAJ,EAAgB;AACZA,YAAAA,UAAU,CAACpE,IAAX,GAAkBoE,UAAU,CAACC,SAAX,GAAuB,KAAKzJ,eAAL,CAAqBoF,IAA9D;AACAoE,YAAAA,UAAU,CAACE,QAAX,GAAsB,KAAK1J,eAAL,CAAqB2J,UAA3C;AACAH,YAAAA,UAAU,CAACI,YAAX,CAAwB,CAAxB,EAA2B,KAAKxI,YAAhC,EAA8C,KAAKM,SAAnD;AACA8H,YAAAA,UAAU,CAACnJ,OAAX,GAAqB,IAArB;AACH;AACJ,S;;gBAEO0F,mB,GAAR,6BAA6B8D,MAA7B,EAA0CC,QAA1C,EAAmEvK,CAAnE,EAAgFC,EAAhF,EAAqG;AACjGsK,UAAAA,QAAQ,CAACpL,QAAT,IAAqBc,EAArB;;AACA,cAAIqK,MAAM,CAACjD,iBAAX,EAA8B;AAC1BkD,YAAAA,QAAQ,CAACjL,KAAT,CAAe8G,GAAf,CAAmBpG,CAAC,CAACV,KAArB;AACAiL,YAAAA,QAAQ,CAACjL,KAAT,CAAekL,QAAf,CAAwBF,MAAM,CAAChD,aAAP,CAAqB/B,QAArB,CAA8B,MAAMvF,CAAC,CAACyK,iBAAF,GAAsBzK,CAAC,CAACoD,aAA5D,EAA2E,CAA3E,CAAxB;AACH,WAHD,MAGO;AACHmH,YAAAA,QAAQ,CAACjL,KAAT,CAAe8G,GAAf,CAAmBkE,MAAM,CAAChD,aAAP,CAAqB/B,QAArB,CAA8B,MAAMvF,CAAC,CAACyK,iBAAF,GAAsBzK,CAAC,CAACoD,aAA5D,EAA2E,CAA3E,CAAnB;AACH;;AACD,cAAIkH,MAAM,CAAC5D,iBAAX,EAA8B;AAC1B6D,YAAAA,QAAQ,CAACnL,KAAT,GAAiBY,CAAC,CAAC6C,IAAF,CAAO8D,CAAP,GAAW2D,MAAM,CAAC1D,UAAP,CAAkBrB,QAAlB,CAA2BgF,QAAQ,CAACpL,QAAT,GAAoBmL,MAAM,CAAChJ,cAAtD,EAAsE,CAAtE,CAA5B;AACH,WAFD,MAEO;AACHiJ,YAAAA,QAAQ,CAACnL,KAAT,GAAiBkL,MAAM,CAAC1D,UAAP,CAAkBrB,QAAlB,CAA2BgF,QAAQ,CAACpL,QAAT,GAAoBmL,MAAM,CAAChJ,cAAtD,EAAsE,CAAtE,CAAjB;AACH;;AACD,iBAAOiJ,QAAQ,CAACpL,QAAT,GAAoBmL,MAAM,CAAChJ,cAAlC;AACH,S;;gBAEOwG,iB,GAAR,2BAA2BJ,QAA3B,EAAoDgD,YAApD,EAAyE/C,WAAzE,EAA8FgD,SAA9F,EAAiHC,WAAjH,EAAsIC,QAAtI,EAAwJ;AACpJ,eAAK9I,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACpJ,QAAT,CAAkBqI,CAAlD;AACA,eAAK5E,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACpJ,QAAT,CAAkB4J,CAAlD;AACA,eAAKnG,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACpJ,QAAT,CAAkB6J,CAAlD;AACA,eAAKpG,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACrI,SAAzC;AACA,eAAK0C,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACtI,KAAzC;AACA,eAAK2C,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCoJ,SAAhC;AACA,eAAK5I,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgC,CAAhC,CAPoJ,CAQpJ;AACA;AACA;AACA;;AACA,eAAKQ,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACnJ,QAAT,CAAkBoI,CAAlD;AACA,eAAK5E,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACnJ,QAAT,CAAkB2J,CAAlD;AACA,eAAKnG,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACnJ,QAAT,CAAkB4J,CAAlD;;AACAvJ,UAAAA,WAAW,CAACwH,GAAZ,CAAgBsB,QAAQ,CAACpI,KAAzB;;AACAV,UAAAA,WAAW,CAAC4L,QAAZ,CAAqBE,YAArB;;AACA,eAAK1I,SAAL,CAAgB,KAAKT,QAAL,EAAhB,IAAmC3C,WAAW,CAACkM,IAA/C;AACA,eAAK/I,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACpJ,QAAT,CAAkBqI,CAAlD;AACA,eAAK5E,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACpJ,QAAT,CAAkB4J,CAAlD;AACA,eAAKnG,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACpJ,QAAT,CAAkB6J,CAAlD;AACA,eAAKpG,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgC,IAAImG,QAAQ,CAACrI,SAA7C;AACA,eAAK0C,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACtI,KAAzC;AACA,eAAK2C,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCoJ,SAAhC;AACA,eAAK5I,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgC,CAAhC,CAxBoJ,CAyBpJ;AACA;AACA;AACA;;AACA,eAAKQ,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACnJ,QAAT,CAAkBoI,CAAlD;AACA,eAAK5E,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACnJ,QAAT,CAAkB2J,CAAlD;AACA,eAAKnG,MAAL,CAAa,KAAKR,QAAL,EAAb,IAAgCmG,QAAQ,CAACnJ,QAAT,CAAkB4J,CAAlD;AACA,eAAKnG,SAAL,CAAgB,KAAKT,QAAL,EAAhB,IAAmC3C,WAAW,CAACkM,IAA/C;;AACA,cAAID,QAAQ,GAAG7M,kBAAf,EAAmC;AAC/B,iBAAKiE,QAAL,CAAe,KAAKT,QAAL,EAAf,IAAkCmG,WAAW,GAAG,IAAIiD,WAApD;AACA,iBAAK3I,QAAL,CAAe,KAAKT,QAAL,EAAf,IAAkCmG,WAAW,GAAG,IAAIiD,WAAlB,GAAgC,CAAlE;AACA,iBAAK3I,QAAL,CAAe,KAAKT,QAAL,EAAf,IAAkCmG,WAAW,GAAG,IAAIiD,WAAlB,GAAgC,CAAlE;AACH;;AACD,cAAIC,QAAQ,GAAG5M,mBAAf,EAAoC;AAChC,iBAAKgE,QAAL,CAAe,KAAKT,QAAL,EAAf,IAAkCmG,WAAW,GAAG,IAAIiD,WAApD;AACA,iBAAK3I,QAAL,CAAe,KAAKT,QAAL,EAAf,IAAkCmG,WAAW,GAAG,IAAIiD,WAAlB,GAAgC,CAAlE;AACA,iBAAK3I,QAAL,CAAe,KAAKT,QAAL,EAAf,IAAkCmG,WAAW,GAAG,IAAIiD,WAAlB,GAAgC,CAAlE;AACH;AACJ,S;;gBAEOxD,sB,GAAR,gCAAgC2D,WAAhC,EAA4DC,WAA5D,EAAwF;AACpF,cAAIzN,IAAI,CAAC0N,GAAL,CAASF,WAAW,CAACxM,QAArB,EAA+ByM,WAAW,CAACzM,QAA3C,IAAuDL,mBAA3D,EAAgF;AAC5E6M,YAAAA,WAAW,CAAC1L,SAAZ,GAAwB,IAAI2L,WAAW,CAAC3L,SAAxC;AACH,WAFD,MAEO;AACH0L,YAAAA,WAAW,CAAC1L,SAAZ,GAAwB2L,WAAW,CAAC3L,SAApC;AACH;AACJ,S;;gBAEOiF,kB,GAAR,8BAA8B;AAC1B,cAAI,KAAKzC,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBwC,OAAlB;;AACA,iBAAKxC,YAAL,GAAoB,IAApB;AACH;AACJ,S,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;6OAjhBCxF,Y;;;;;iBACgB,K;;sFAMhBA,Y;;;;;iBAGayB,SAAS,CAACoN,S;;0FAMvB7O,Y;;;;;iBAGiB,IAAIqB,UAAJ,E;;+FAEjBrB,Y;;;;;iBAC6B,G;;kbAiC7BA,Y;;;;;iBAC2B,I;;8FAM3BA,Y;;;;;iBAGoBwB,WAAW,CAACsN,O;;4FAEhC9O,Y;;;;;iBAG0B,I;;6FAM1BA,Y;;;;;iBAGmB,IAAIqB,UAAJ,E;;4FAEnBrB,Y;;;;;iBAG0B,K;;kGAG1BA,Y;;;;;iBAGuB,IAAIsB,aAAJ,E;;iGAGvBtB,Y;;;;;iBAGsB,IAAIsB,aAAJ,E;;;;;;;iBAMNC,KAAK,CAAC8H,K;;2FAEtBrJ,Y;;;;;iBAC8B,I"}