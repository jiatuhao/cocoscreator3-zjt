{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/utilities.ts"],"names":["setDefaultProgressCallback","onProgress","defaultProgressCallback","clear","task","clearRef","i","l","input","length","item","isNative","content","Asset","decRef","recycle","urlAppendTimestamp","url","append","test","Date","now","retry","process","times","wait","onComplete","index","err","result","setTimeout","getDepends","uuid","data","exclude","depends","preload","asyncLoadAssets","config","info","dependUtil","parse","includeNative","__nativeDepend__","EDITOR","preventDeferredLoadDependents","deps","dep","push","__asyncLoadAssets__","bundle","name","preventPreloadNativeObject","nativeDep","e","error","message","stack","cache","id","asset","cacheAsset","undefined","legacyCC","assetManager","isScene","assets","add","setProperties","assetsMap","missingAsset","__depends__","missingAssetReporter","depend","dependAsset","EditorExtends","MissingReporter","object","stashByOwner","owner","prop","serialize","asAsset","addRef","reference","references","get","reportByOwner","_nativeAsset","console","gatherAsset","source","options","__outputAsArray__","output","forEach","array","count","errs","cb","parseParameters","optionsOut","onProgressOut","onCompleteOut","isCallback","Object","create","parseLoadResArgs","type","typeOut","isValidType","js","isChildClassOf","checkCircleReference","map","checked","getDeps","asyncify","p1","p2","refs","Array","isArray","x","callInNextTick"],"mappings":"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"}