{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/render-queue.ts"],"names":["opaqueCompareFn","a","b","hash","depth","shaderId","transparentCompareFn","RecyclePool","CachedArray","SetIndex","PipelineStateManager","PassPool","PassView","SubModelView","SubModelPool","ShaderPool","RenderQueue","desc","queue","_passDesc","_passPool","subModel","passIdx","sortFunc","clear","reset","insertRenderPass","renderObj","subModelIdx","model","subModels","hPass","get","handle","PASS_0","isTransparent","passes","blendState","targets","blend","PHASE","phases","PRIORITY","priority","rp","add","SHADER_0","push","sort","recordCommandBuffer","device","renderPass","cmdBuff","i","length","array","inputAssembler","hSubModel","pass","shader","pso","getOrCreatePipelineState","bindPipelineState","bindDescriptorSet","MATERIAL","descriptorSet","LOCAL","bindInputAssembler","draw"],"mappings":"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"}