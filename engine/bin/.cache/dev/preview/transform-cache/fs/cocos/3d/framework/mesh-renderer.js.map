{"version":3,"sources":["../../../../../../../../../cocos/3d/framework/mesh-renderer.ts"],"names":["ccclass","help","executeInEditMode","executionOrder","menu","tooltip","visible","type","formerlySerializedAs","serializable","editable","disallowAnimation","Mesh","Vec4","scene","MorphModel","TransformBit","Enum","builtinResMgr","RenderableComponent","legacyCC","assertIsTrue","ModelShadowCastingMode","OFF","ON","ModelShadowReceivingMode","ModelLightmapSettings","_bakeable","val","_castShadow","_receiveShadow","_lightmapSize","MeshRenderer","mesh","struct","morph","subMeshMorphs","some","subMeshMorph","_shadowCastingMode","_updateCastShadow","_shadowReceivingMode","_updateReceiveShadow","_mesh","old","initialize","_watchMorphInMesh","_onMeshChanged","_updateModels","enabledInHierarchy","_attachToScene","_model","_enableMorph","value","_modelType","_morphInstance","Model","onLoad","onRestore","onEnable","onDisable","_detachFromScene","onDestroy","director","root","destroyModel","_models","length","destroy","setWeights","weights","subMeshIndex","setInstancedAttribute","name","model","instancedAttributes","attributes","views","i","set","_updateLightmap","lightmap","uOff","vOff","uScale","vScale","lightmapSettings","texture","uvParam","x","y","z","w","_onUpdateLightingmap","node","transform","_createModel","createBoundingShape","minPosition","maxPosition","_updateModelParams","preferMorphOverPlain","modelType","createModel","visFlags","visibility","push","setMorphRendering","renderScene","_getRenderScene","addModel","removeModel","hasChangedFlags","POSITION","isDynamicBatching","_isBatchingEnabled","meshCount","renderingSubMeshes","renderingMesh","material","getRenderMaterial","isValid","subMeshData","initSubModel","_getBuiltinMaterial","enabled","updateLightingmap","_onMaterialModified","idx","inited","_onRebuildPSO","setSubModelMaterial","_clearMaterials","subModels","get","_onVisibilityChange","castShadow","receiveShadow","_materials","mat","p","passes","pass","batchingScheme","morphRendering","createInstance","nSubMeshes","primitives","iSubMesh","initialWeights","slice","Array","targets","fill","_syncMorphWeights","subMeshMorphInstance","renderResources","ShadowCastingMode","ShadowReceivingMode"],"mappings":";;;;;;;;;;;;;;;;;;;;;AA8BSA,MAAAA,O,8BAAAA,O;AAASC,MAAAA,I,8BAAAA,I;AAAMC,MAAAA,iB,8BAAAA,iB;AAAmBC,MAAAA,c,8BAAAA,c;AAAgBC,MAAAA,I,8BAAAA,I;AAAMC,MAAAA,O,8BAAAA,O;AAASC,MAAAA,O,8BAAAA,O;AAASC,MAAAA,I,8BAAAA,I;AAAMC,MAAAA,oB,8BAAAA,oB;AAAsBC,MAAAA,Y,8BAAAA,Y;AAAcC,MAAAA,Q,8BAAAA,Q;AAAUC,MAAAA,iB,8BAAAA,iB;;AAG9HC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,I,oBAAAA,I;;AACAC,MAAAA,K,wBAAAA,K;;AACAC,MAAAA,U,uBAAAA,U;;AAEAC,MAAAA,Y,6BAAAA,Y;;AACAC,MAAAA,I,0BAAAA,I;;AACAC,MAAAA,a,uBAAAA,a;;AACAC,MAAAA,mB,wCAAAA,mB;;AAEAC,MAAAA,Q,wBAAAA,Q;;AACAC,MAAAA,Y,2BAAAA,Y;;;AAET;AACA;AACA;AACA;AACMC,MAAAA,sB,GAAyBL,IAAI,CAAC;AAChC;AACJ;AACA;AACA;AACIM,QAAAA,GAAG,EAAE,CAL2B;;AAMhC;AACJ;AACA;AACA;AACIC,QAAAA,EAAE,EAAE;AAV4B,OAAD,C;AAanC;AACA;AACA;AACA;;AACMC,MAAAA,wB,GAA2BR,IAAI,CAAC;AAClC;AACJ;AACA;AACA;AACIM,QAAAA,GAAG,EAAE,CAL6B;;AAMlC;AACJ;AACA;AACA;AACIC,QAAAA,EAAE,EAAE;AAV8B,OAAD,C;AAarC;AACA;AACA;AACA;;AAEME,MAAAA,qB,WADL1B,OAAO,CAAC,0BAAD,C,UAUHQ,oBAAoB,CAAC,gBAAD,C;;;;;;;;;;;;;;;;;;AAKrB;AACJ;AACA;AACA;8BAEoB;AACZ,mBAAO,KAAKmB,SAAZ;AACH,W;4BAEaC,G,EAAK;AACf,iBAAKD,SAAL,GAAiBC,GAAjB;AACH;AAED;AACJ;AACA;AACA;;;;8BAEsB;AACd,mBAAO,KAAKC,WAAZ;AACH,W;4BAEeD,G,EAAK;AACjB,iBAAKC,WAAL,GAAmBD,GAAnB;AACH;AAED;AACJ;AACA;AACA;;;;8BAEyB;AACjB,mBAAO,KAAKE,cAAZ;AACH,W;4BAEkBF,G,EAAK;AACpB,iBAAKE,cAAL,GAAsBF,GAAtB;AACH;AAED;AACJ;AACA;AACA;;;;8BAEwB;AAChB,mBAAO,KAAKG,aAAZ;AACH,W;4BAEiBH,G,EAAK;AACnB,iBAAKG,aAAL,GAAqBH,GAArB;AACH;;;;2FA/DAnB,Y;;;;;iBACgC,I;;kFAChCA,Y;;;;;iBACsB,IAAII,IAAJ,E;;oFACtBJ,Y;;;;;iBACqB,K;;sFACrBA,Y;;;;;iBACuB,K;;;;;;;iBAEG,K;;wFAC1BA,Y;;;;;iBACyB,E;;oEAMzBC,Q,mJAaAA,Q,wJAaAA,Q,0JAaAA,Q;AAUL;AACA;AACA;AACA;;8BAMasB,Y,YALZhC,OAAO,CAAC,iBAAD,C,UACPC,IAAI,CAAC,sBAAD,C,UACJE,cAAc,CAAC,GAAD,C,UACdC,IAAI,CAAC,mBAAD,C,UAwBAG,IAAI,CAACe,sBAAD,C,UACJjB,OAAO,CAAC,iCAAD,C,UAePE,IAAI,CAACkB,wBAAD,C,WACJpB,OAAO,CAAC,mCAAD,C,WAePE,IAAI,CAACK,IAAD,C,WACJP,OAAO,CAAC,iBAAD,C,WAuBPC,OAAO,CAAC,YAA8B;AACnC,eAAO,CAAC,EACJ,KAAK2B,IAAL,IACG,KAAKA,IAAL,CAAUC,MAAV,CAAiBC,KADpB,IAEG,KAAKF,IAAL,CAAUC,MAAV,CAAiBC,KAAjB,CAAuBC,aAAvB,CAAqCC,IAArC,CAA0C,UAACC,YAAD;AAAA,iBAAkB,CAAC,CAACA,YAApB;AAAA,SAA1C,CAHC,CAAR;AAKH,OANO,C,kEA/EXpC,iB;;;;;;AAmBG;AACJ;AACA;AACA;8BAI6B;AACrB,mBAAO,KAAKqC,kBAAZ;AACH,W;4BAEsBX,G,EAAK;AACxB,iBAAKW,kBAAL,GAA0BX,GAA1B;;AACA,iBAAKY,iBAAL;AACH;AAED;AACJ;AACA;AACA;;;;8BAIyB;AACjB,mBAAO,KAAKC,oBAAZ;AACH,W;4BAEkBb,G,EAAK;AACpB,iBAAKa,oBAAL,GAA4Bb,GAA5B;;AACA,iBAAKc,oBAAL;AACH;AAED;AACJ;AACA;AACA;;;;8BAGgB;AACR,mBAAO,KAAKC,KAAZ;AACH,W;4BAESf,G,EAAK;AACX,gBAAMgB,GAAG,GAAG,KAAKD,KAAjB;AACA,iBAAKA,KAAL,GAAaf,GAAb;;AACA,gBAAI,KAAKe,KAAT,EAAgB;AAAE,mBAAKA,KAAL,CAAWE,UAAX;AAA0B;;AAC5C,iBAAKC,iBAAL;;AACA,iBAAKC,cAAL,CAAoBH,GAApB;;AACA,iBAAKI,aAAL;;AACA,gBAAI,KAAKC,kBAAT,EAA6B;AACzB,mBAAKC,cAAL;AACH;;AACD,iBAAKV,iBAAL;;AACA,iBAAKE,oBAAL;AACH;;;8BAEY;AACT,mBAAO,KAAKS,MAAZ;AACH;;;8BAUkB;AACf,mBAAO,KAAKC,YAAZ;AACH,W;4BAEgBC,K,EAAO;AACpB,iBAAKD,YAAL,GAAoBC,KAApB;AACH;;;AAWD,gCAAe;AAAA;;AACX;;AADW;;AAAA;;AAAA;;AAAA;;AAAA,gBATLC,UASK;AAAA,gBAPLH,MAOK,GAPwB,IAOxB;AAAA,gBALPI,cAKO,GALyC,IAKzC;;AAAA;;AAEX,gBAAKD,UAAL,GAAkBxC,KAAK,CAAC0C,KAAxB;AAFW;AAGd;;;;eAEMC,M,GAAP,kBAAiB;AACb,cAAI,KAAKd,KAAT,EAAgB;AAAE,iBAAKA,KAAL,CAAWE,UAAX;AAA0B;;AAC5C,eAAKC,iBAAL;;AACA,eAAKE,aAAL;;AACA,eAAKR,iBAAL;;AACA,eAAKE,oBAAL;AACH,S,CAED;;;eACOgB,S,GAAP,qBAAoB;AAChB,eAAKV,aAAL;;AACA,eAAKR,iBAAL;;AACA,eAAKE,oBAAL;AACH,S;;eAEMiB,Q,GAAP,oBAAmB;AACf,cAAI,CAAC,KAAKR,MAAV,EAAkB;AACd,iBAAKH,aAAL;AACH;;AACD,eAAKE,cAAL;AACH,S;;eAEMU,S,GAAP,qBAAoB;AAChB,cAAI,KAAKT,MAAT,EAAiB;AACb,iBAAKU,gBAAL;AACH;AACJ,S;;eAEMC,S,GAAP,qBAAoB;AAChB,cAAI,KAAKX,MAAT,EAAiB;AACb/B,YAAAA,QAAQ,CAAC2C,QAAT,CAAkBC,IAAlB,CAAuBC,YAAvB,CAAoC,KAAKd,MAAzC;AACA,iBAAKA,MAAL,GAAc,IAAd;AACA,iBAAKe,OAAL,CAAaC,MAAb,GAAsB,CAAtB;AACH;;AACD,cAAI,KAAKZ,cAAT,EAAyB;AACrB,iBAAKA,cAAL,CAAoBa,OAApB;AACH;AACJ,S;;eAEMC,U,GAAP,oBAAmBC,OAAnB,EAAsCC,YAAtC,EAA4D;AACxD,cAAI,KAAKhB,cAAT,EAAyB;AACrB,iBAAKA,cAAL,CAAoBc,UAApB,CAA+BE,YAA/B,EAA6CD,OAA7C;AACH;AACJ,S;;eAEME,qB,GAAP,+BAA8BC,IAA9B,EAA4CpB,KAA5C,EAAsE;AAClE,cAAI,CAAC,KAAKqB,KAAV,EAAiB;AAAE;AAAS;;AADsC,sCAEpC,KAAKA,KAAL,CAAWC,mBAFyB;AAAA,cAE1DC,UAF0D,yBAE1DA,UAF0D;AAAA,cAE9CC,KAF8C,yBAE9CA,KAF8C;;AAGlE,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAACT,MAA/B,EAAuCW,CAAC,EAAxC,EAA4C;AACxC,gBAAIF,UAAU,CAACE,CAAD,CAAV,CAAcL,IAAd,KAAuBA,IAA3B,EAAiC;AAC7BI,cAAAA,KAAK,CAACC,CAAD,CAAL,CAASC,GAAT,CAAa1B,KAAb;AACA;AACH;AACJ;AACJ,S;;eAEM2B,e,GAAP,yBAAwBC,QAAxB,EAAkDC,IAAlD,EAAgEC,IAAhE,EAA8EC,MAA9E,EAA8FC,MAA9F,EAA8G;AAC1G,eAAKC,gBAAL,CAAsBC,OAAtB,GAAgCN,QAAhC;AACA,eAAKK,gBAAL,CAAsBE,OAAtB,CAA8BC,CAA9B,GAAkCP,IAAlC;AACA,eAAKI,gBAAL,CAAsBE,OAAtB,CAA8BE,CAA9B,GAAkCP,IAAlC;AACA,eAAKG,gBAAL,CAAsBE,OAAtB,CAA8BG,CAA9B,GAAkCP,MAAlC;AACA,eAAKE,gBAAL,CAAsBE,OAAtB,CAA8BI,CAA9B,GAAkCP,MAAlC;;AAEA,eAAKQ,oBAAL;AACH,S;;eAES7C,a,GAAV,yBAA2B;AACvB,cAAI,CAAC,KAAKC,kBAAN,IAA4B,CAAC,KAAKN,KAAtC,EAA6C;AACzC;AACH;;AAED,cAAM+B,KAAK,GAAG,KAAKvB,MAAnB;;AACA,cAAIuB,KAAJ,EAAW;AACPA,YAAAA,KAAK,CAACN,OAAN;AACAM,YAAAA,KAAK,CAAC7B,UAAN;AACA6B,YAAAA,KAAK,CAACoB,IAAN,GAAapB,KAAK,CAACqB,SAAN,GAAkB,KAAKD,IAApC;AACH,WAJD,MAIO;AACH,iBAAKE,YAAL;AACH;;AAED,cAAI,KAAK7C,MAAT,EAAiB;AACb,iBAAKA,MAAL,CAAY8C,mBAAZ,CAAgC,KAAKtD,KAAL,CAAWT,MAAX,CAAkBgE,WAAlD,EAA+D,KAAKvD,KAAL,CAAWT,MAAX,CAAkBiE,WAAjF;;AACA,iBAAKC,kBAAL;;AACA,iBAAKP,oBAAL;AACH;AACJ,S;;eAESG,Y,GAAV,wBAA0B;AACtB,cAAMK,oBAAoB,GAAG,CAAC,CAAC,KAAK9C,cAApC,CADsB,CAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,cAAM+C,SAAS,GAAID,oBAAoB,IAAI,KAAK/C,UAAL,KAAoBxC,KAAK,CAAC0C,KAAnD,GAA4DzC,UAA5D,GAAyE,KAAKuC,UAAhG;AACA,cAAMoB,KAAK,GAAG,KAAKvB,MAAL,GAAgB/B,QAAQ,CAAC2C,QAAT,CAAkBC,IAAnB,CAAiCuC,WAAjC,CAA6CD,SAA7C,CAA7B;AACA5B,UAAAA,KAAK,CAAC8B,QAAN,GAAiB,KAAKC,UAAtB;AACA/B,UAAAA,KAAK,CAACoB,IAAN,GAAapB,KAAK,CAACqB,SAAN,GAAkB,KAAKD,IAApC;AACA,eAAK5B,OAAL,CAAaC,MAAb,GAAsB,CAAtB;;AACA,eAAKD,OAAL,CAAawC,IAAb,CAAkB,KAAKvD,MAAvB;;AACA,cAAI,KAAKI,cAAL,IAAuBmB,KAAK,YAAY3D,UAA5C,EAAwD;AACpD2D,YAAAA,KAAK,CAACiC,iBAAN,CAAwB,KAAKpD,cAA7B;AACH;AACJ,S;;eAESL,c,GAAV,0BAA4B;AACxB,cAAI,CAAC,KAAK4C,IAAL,CAAUhF,KAAX,IAAoB,CAAC,KAAKqC,MAA9B,EAAsC;AAClC;AACH;;AACD,cAAMyD,WAAW,GAAG,KAAKC,eAAL,EAApB;;AACA,cAAI,KAAK1D,MAAL,CAAYrC,KAAZ,KAAsB,IAA1B,EAAgC;AAC5B,iBAAK+C,gBAAL;AACH;;AACD+C,UAAAA,WAAW,CAACE,QAAZ,CAAqB,KAAK3D,MAA1B;AACH,S;;eAESU,gB,GAAV,4BAA8B;AAC1B,cAAI,KAAKV,MAAL,IAAe,KAAKA,MAAL,CAAYrC,KAA/B,EAAsC;AAClC,iBAAKqC,MAAL,CAAYrC,KAAZ,CAAkBiG,WAAlB,CAA8B,KAAK5D,MAAnC;AACH;AACJ,S;;eAESiD,kB,GAAV,8BAAgC;AAC5B,cAAI,CAAC,KAAKzD,KAAN,IAAe,CAAC,KAAKQ,MAAzB,EAAiC;AAAE;AAAS;;AAC5C,eAAK2C,IAAL,CAAUkB,eAAV,IAA6BhG,YAAY,CAACiG,QAA1C;AACA,eAAK9D,MAAL,CAAY4C,SAAZ,CAAsBiB,eAAtB,IAAyChG,YAAY,CAACiG,QAAtD;AACA,eAAK9D,MAAL,CAAY+D,iBAAZ,GAAgC,KAAKC,kBAAL,EAAhC;AACA,cAAMC,SAAS,GAAG,KAAKzE,KAAL,GAAa,KAAKA,KAAL,CAAW0E,kBAAX,CAA8BlD,MAA3C,GAAoD,CAAtE;AACA,cAAMmD,aAAa,GAAG,KAAK3E,KAAL,CAAW0E,kBAAjC;;AACA,cAAIC,aAAJ,EAAmB;AACf,iBAAK,IAAIxC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsC,SAApB,EAA+B,EAAEtC,CAAjC,EAAoC;AAChC,kBAAIyC,QAAQ,GAAG,KAAKC,iBAAL,CAAuB1C,CAAvB,CAAf;;AACA,kBAAIyC,QAAQ,IAAI,CAACA,QAAQ,CAACE,OAA1B,EAAmC;AAC/BF,gBAAAA,QAAQ,GAAG,IAAX;AACH;;AACD,kBAAMG,WAAW,GAAGJ,aAAa,CAACxC,CAAD,CAAjC;;AACA,kBAAI4C,WAAJ,EAAiB;AACb,qBAAKvE,MAAL,CAAYwE,YAAZ,CAAyB7C,CAAzB,EAA4B4C,WAA5B,EAAyCH,QAAQ,IAAI,KAAKK,mBAAL,EAArD;AACH;AACJ;AACJ;;AACD,eAAKzE,MAAL,CAAY0E,OAAZ,GAAsB,IAAtB;AACH,S;;eAEShC,oB,GAAV,gCAAkC;AAC9B,cAAI,KAAKnB,KAAL,KAAe,IAAnB,EAAyB;AACrB,iBAAKA,KAAL,CAAWoD,iBAAX,CAA6B,KAAKxC,gBAAL,CAAsBC,OAAnD,EAA4D,KAAKD,gBAAL,CAAsBE,OAAlF;AACH;;AAED,eAAKhB,qBAAL,CAA2B,sBAA3B,EAAmD,CAC/C,KAAKc,gBAAL,CAAsBE,OAAtB,CAA8BC,CADiB,EAE/C,KAAKH,gBAAL,CAAsBE,OAAtB,CAA8BE,CAFiB,EAG/C,KAAKJ,gBAAL,CAAsBE,OAAtB,CAA8BG,CAHiB,EAI/C,KAAKL,gBAAL,CAAsBE,OAAtB,CAA8BI,CAJiB,CAAnD;AAMH,S;;eAESmC,mB,GAAV,6BAA+BC,GAA/B,EAA4CT,QAA5C,EAAuE;AACnE,cAAI,CAAC,KAAKpE,MAAN,IAAgB,CAAC,KAAKA,MAAL,CAAY8E,MAAjC,EAAyC;AAAE;AAAS;;AACpD,eAAKC,aAAL,CAAmBF,GAAnB,EAAwBT,QAAQ,IAAI,KAAKK,mBAAL,EAApC;AACH,S;;eAESM,a,GAAV,uBAAyBF,GAAzB,EAAsCT,QAAtC,EAA0D;AACtD,cAAI,CAAC,KAAKpE,MAAN,IAAgB,CAAC,KAAKA,MAAL,CAAY8E,MAAjC,EAAyC;AAAE;AAAS;;AACpD,eAAK9E,MAAL,CAAY+D,iBAAZ,GAAgC,KAAKC,kBAAL,EAAhC;;AACA,eAAKhE,MAAL,CAAYgF,mBAAZ,CAAgCH,GAAhC,EAAqCT,QAArC;;AACA,eAAK1B,oBAAL;AACH,S;;eAES9C,c,GAAV,wBAA0BH,GAA1B,EAA4C,CAC3C,C;;eAESwF,e,GAAV,2BAA6B;AACzB,cAAI,CAAC,KAAKjF,MAAV,EAAkB;AAAE;AAAS;;AAC7B,cAAMkF,SAAS,GAAG,KAAKlF,MAAL,CAAYkF,SAA9B;;AACA,eAAK,IAAIvD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuD,SAAS,CAAClE,MAA9B,EAAsC,EAAEW,CAAxC,EAA2C;AACvC,iBAAKiD,mBAAL,CAAyBjD,CAAzB,EAA4B,IAA5B;AACH;AACJ,S;;eAES8C,mB,GAAV,+BAAiC;AAC7B;AACA,iBAAO1G,aAAa,CAACoH,GAAd,CAA4B,kBAA5B,CAAP;AACH,S;;eAESC,mB,GAAV,6BAA+B3G,GAA/B,EAA4C;AACxC,cAAI,CAAC,KAAKuB,MAAV,EAAkB;AAAE;AAAS;;AAC7B,eAAKA,MAAL,CAAYqD,QAAZ,GAAuB5E,GAAvB;AACH,S;;eAESY,iB,GAAV,6BAA+B;AAC3B,cAAI,CAAC,KAAKW,MAAV,EAAkB;AAAE;AAAS;;AAC7B,cAAI,KAAKZ,kBAAL,KAA4BjB,sBAAsB,CAACC,GAAvD,EAA4D;AACxD,iBAAK4B,MAAL,CAAYqF,UAAZ,GAAyB,KAAzB;AACH,WAFD,MAEO;AACHnH,YAAAA,YAAY,CACR,KAAKkB,kBAAL,KAA4BjB,sBAAsB,CAACE,EAD3C,yBAEa,KAAKe,kBAFlB,wBAAZ;AAIA,iBAAKY,MAAL,CAAYqF,UAAZ,GAAyB,IAAzB;AACH;AACJ,S;;eAES9F,oB,GAAV,gCAAkC;AAC9B,cAAI,CAAC,KAAKS,MAAV,EAAkB;AAAE;AAAS;;AAC7B,cAAI,KAAKV,oBAAL,KAA8BhB,wBAAwB,CAACF,GAA3D,EAAgE;AAC5D,iBAAK4B,MAAL,CAAYsF,aAAZ,GAA4B,KAA5B;AACH,WAFD,MAEO;AACH,iBAAKtF,MAAL,CAAYsF,aAAZ,GAA4B,IAA5B;AACH;AACJ,S;;eAEStB,kB,GAAV,8BAAgC;AAC5B,eAAK,IAAIrC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK4D,UAAL,CAAgBvE,MAApC,EAA4C,EAAEW,CAA9C,EAAiD;AAC7C,gBAAM6D,GAAG,GAAG,KAAKD,UAAL,CAAgB5D,CAAhB,CAAZ;;AACA,gBAAI,CAAC6D,GAAL,EAAU;AAAE;AAAW;;AACvB,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,GAAG,CAACE,MAAJ,CAAW1E,MAA/B,EAAuC,EAAEyE,CAAzC,EAA4C;AACxC,kBAAME,IAAI,GAAGH,GAAG,CAACE,MAAJ,CAAWD,CAAX,CAAb;;AACA,kBAAIE,IAAI,CAACC,cAAT,EAAyB;AAAE,uBAAO,IAAP;AAAc;AAC5C;AACJ;;AACD,iBAAO,KAAP;AACH,S;;eAEOjG,iB,GAAR,6BAA6B;AACzB,cAAI,KAAKS,cAAT,EAAyB;AACrB,iBAAKA,cAAL,CAAoBa,OAApB;;AACA,iBAAKb,cAAL,GAAsB,IAAtB;AACH;;AAED,cAAI,CAAC,KAAKH,YAAV,EAAwB;AACpB;AACH;;AAED,cAAI,CAAC,KAAKT,KAAN,IACG,CAAC,KAAKA,KAAL,CAAWT,MAAX,CAAkBC,KADtB,IAEG,CAAC,KAAKQ,KAAL,CAAWqG,cAFnB,EAEmC;AAC/B;AACH;;AAdwB,cAgBjB7G,KAhBiB,GAgBP,KAAKQ,KAAL,CAAWT,MAhBJ,CAgBjBC,KAhBiB;AAiBzB,eAAKoB,cAAL,GAAsB,KAAKZ,KAAL,CAAWqG,cAAX,CAA0BC,cAA1B,EAAtB;AACA,cAAMC,UAAU,GAAG,KAAKvG,KAAL,CAAWT,MAAX,CAAkBiH,UAAlB,CAA6BhF,MAAhD;;AACA,eAAK,IAAIiF,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGF,UAAlC,EAA8C,EAAEE,QAAhD,EAA0D;AACtD,gBAAM9G,YAAY,GAAGH,KAAK,CAACC,aAAN,CAAoBgH,QAApB,CAArB;;AACA,gBAAI,CAAC9G,YAAL,EAAmB;AACf;AACH;;AACD,gBAAM+G,cAAc,GAAG/G,YAAY,CAACgC,OAAb,IAAwBnC,KAAK,CAACmC,OAArD;AACA,gBAAMA,OAAO,GAAG+E,cAAc,GACxBA,cAAc,CAACC,KAAf,EADwB,GAExB,IAAIC,KAAJ,CAAkBjH,YAAY,CAACkH,OAAb,CAAqBrF,MAAvC,EAA+CsF,IAA/C,CAAoD,CAApD,CAFN;;AAGA,iBAAKlG,cAAL,CAAoBc,UAApB,CAA+B+E,QAA/B,EAAyC9E,OAAzC;AACH;;AAED,cAAI,KAAKnB,MAAL,IAAe,KAAKA,MAAL,YAAuBpC,UAA1C,EAAsD;AAClD,iBAAKoC,MAAL,CAAYwD,iBAAZ,CAA8B,KAAKpD,cAAnC;AACH;AACJ,S;;eAEOmG,iB,GAAR,2BAA2BnF,YAA3B,EAAiD;AAC7C,cAAI,CAAC,KAAKhB,cAAV,EAA0B;AACtB;AACH;;AACD,cAAMoG,oBAAoB,GAAG,KAAKpG,cAAL,CAAoBgB,YAApB,CAA7B;;AACA,cAAI,CAACoF,oBAAD,IAAyB,CAACA,oBAAoB,CAACC,eAAnD,EAAoE;AAChE;AACH;;AACDD,UAAAA,oBAAoB,CAACC,eAArB,CAAqCvF,UAArC,CAAgDsF,oBAAoB,CAACrF,OAArE;AACH,S;;;QA3X6BnD,mB,WAChB0I,iB,GAAoBvI,sB,UACpBwI,mB,GAAsBrI,wB,6FAEnChB,Y,EACAC,Q,EACAC,iB;;;;;iBACyB,IAAIe,qBAAJ,E;;gFAEzBjB,Y;;;;;iBAC8B,I;;6FAE9BA,Y;;;;;iBAC8Ba,sBAAsB,CAACC,G;;gGAErDd,Y;;;;;iBACgCgB,wBAAwB,CAACD,E;;2FAQzDb,iB,8KAgBAA,iB,wTA6CAA,iB,wKAeAF,Y;;;;;iBACsB,I"}