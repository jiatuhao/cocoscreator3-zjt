{"version":3,"sources":["../../../../../../../../../../cocos/physics/ammo/shapes/ammo-shape.ts"],"names":["Ammo","Vec3","Quat","PhysicsSystem","AmmoBroadphaseNativeTypes","EAmmoSharedBodyDirty","cocos2AmmoVec3","ammoDeletePtr","cocos2AmmoQuat","AmmoConstant","CC_V3_0","v3_0","AmmoShape","updateEventListener","setMaterial","v","_isTrigger","_isEnabled","_btCompound","_index","friction","restitution","rollingFriction","spinningFriction","_sharedBody","body","setFriction","setRestitution","setRollingFriction","setSpinningFriction","setUserIndex2","setCenter","copy","multiply","_collider","node","worldScale","transform","getOrigin","updateCompoundTransform","setAsTrigger","removeShape","addShape","wrappedBody","rigidBody","_btShape","type","id","_isBinding","quat","scale","idCounter","btQuaternion","btTransform","setIdentity","btVector3","getAABB","TRANS","instance","TRANSFORM","setRotation","QUAT_0","worldRotation","MIN","VECTOR3_0","MAX","VECTOR3_1","getAabb","halfExtents","set","x","y","z","add","center","worldPosition","getBoundingSphere","radius","getLocalBoundingSphere","initialize","com","onComponentSet","setWrapper","physicsWorld","getSharedBody","reference","onLoad","isTrigger","onEnable","collider","sharedMaterial","onDisable","onDestroy","shape","castObject","btCollisionShape","wrapped","destroy","EMPTY_SHAPE","getGroup","collisionFilterGroup","setGroup","addGroup","removeGroup","getMask","collisionFilterMask","setMask","addMask","removeMask","setCompound","compound","removeChildShape","getNumChildShapes","addChildShape","setScale","updateChildTransform","index","bodyStruct","useCompound","dirty","BODY_RE_ADD","needCompound","TERRAIN_SHAPE_PROXYTYPE","equals","ZERO","debugTransform","n","_debugTransform","wt","ghost","getWorldTransform","lt","op_mul","origin","rotation","getRotation","w","impl","getLocalScaling"],"mappings":"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"}