{"version":3,"sources":["../../../../../../../../../cocos/2d/components/rich-text.ts"],"names":["createSegment","type","node","PrivateNode","comp","lineCount","styleIndex","imageOffset","clickParam","clickHandler","getSegmentByPool","content","seg","RichTextChildName","labelPool","_get","RichTextChildImageName","imagePool","getComponent","Sprite","addComponent","spriteFrame","Type","SLICED","sizeMode","SizeMode","CUSTOM","Label","string","horizontalAlign","HorizontalTextAlignment","LEFT","verticalAlign","VerticalTextAlignment","TOP","setPosition","trans","_uiProps","uiTransformComp","setAnchorPoint","ccclass","executeInEditMode","executionOrder","help","menu","tooltip","multiline","serializable","DEV","EDITOR","Font","SpriteAtlas","TTFFont","assert","SystemEventType","warnID","BASELINE_RATIO","fragmentText","isUnicodeCJK","isUnicodeSpace","HtmlTextParser","Pool","Color","Node","CacheMode","LabelOutline","UIComponent","UITransform","legacyCC","Component","assetManager","_htmlTextParser","parent","isValid","outline","width","RichText","_string","value","_updateRichTextStatus","_horizontalAlign","_layoutDirty","_fontSize","_fontFamily","_font","_userDefinedFont","useSystemFont","_onTTFLoaded","_isSystemFontUsed","_cacheMode","_maxWidth","_lineHeight","_imageAtlas","_handleTouchEvent","enabledInHierarchy","handleTouchEvent","_addEventListeners","_removeEventListeners","_textArray","_segments","_labelSegmentsCache","_linesWidth","_lineCount","_labelWidth","_labelHeight","_lineOffsetX","_updateRichText","onLoad","on","LAYER_CHANGED","_applyLayer","onEnable","_activateChildren","onDisable","start","EventType","ANCHOR_CHANGED","_updateRichTextPosition","onRestore","onDestroy","removeFromParent","put","off","TOUCH_END","_onTouchEnded","_updateLabelSegmentTextAttributes","forEach","item","_applyTextAttribute","_createFontLabel","str","_createImage","_nativeAsset","postLoadNative","err","_measureText","func","s","label","length","push","labelSize","contentSize","event","components","getComponents","_containsTouchLocation","touch","getUILocation","component","call","propagationStopped","point","myRect","getBoundingBoxToWorld","contains","_resetState","children","i","child","name","splice","segment","active","_addLabelSegment","stringToken","labelSegment","pop","layer","addChild","_updateRichTextWithMaxWidth","labelString","labelWidth","fragmentWidth","checkStartIndex","checkEndIndex","_getFirstWordLen","checkString","substr","checkStringWidth","remainingString","_updateLineInfo","fragments","k","splitString","_isLastComponentCR","lastIndexOf","_needsUpdateTextLayout","newTextArray","oldItem","newItem","text","oldStyle","style","newStyle","size","italic","isImage","src","imageAlign","imageHeight","imageWidth","_addRichTextImageElement","richTextElement","spriteFrameName","getSpriteFrame","sprite","spriteRect","rect","clone","scaleFactor","spriteWidth","spriteHeight","height","expectWidth","expectHeight","setContentSize","click","param","parse","slice","lastEmptyLine","undefined","isNewLine","multilineTexts","split","j","startIndex","textLen","character","charAt","len","index","nextTokenX","nextLineIndex","totalLineCount","anchorX","anchorY","lineOffsetX","CENTER","RIGHT","pos","position","z","lineHeightSet","lineHeightReal","y","offsets","offsetY","parseFloat","Number","isInteger","offsetX","x","_convertLiteralColorValue","color","colorValue","toUpperCase","colorUse","out","fromHEX","labelSeg","textStyle","isBold","bold","isItalic","isUnderline","underline","labelOutline","fontSize","cacheMode","isAsset","font","fontFamily","lineHeight","updateRenderData","assembler","_assembler","HorizontalAlign","VerticalAlign","NONE"],"mappings":"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"}