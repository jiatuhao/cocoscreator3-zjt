{"version":3,"sources":["../../../../../../../../../cocos/core/animation/animation-manager.ts"],"names":["ccclass","System","director","Director","errorID","Scheduler","MutableForwardIterator","remove","BlendStateBuffer","legacyCC","deleteTransform","getTransform","getWorldMatrix","AnimationManager","_anims","_delayEvents","_blendStateBuffer","_crossFades","_sockets","addCrossFade","crossFade","push","removeCrossFade","update","dt","i","l","length","iterator","array","anim","isMotionless","apply","stamp","getTotalFrames","target","transform","matrix","event","fn","thisArg","args","destruct","addAnimation","index","indexOf","removeAnimation","fastRemoveAt","pushDelayEvent","addSockets","root","sockets","socket","find","s","targetNode","getChildByPath","path","removeSockets","socketToRemove","j","node","ID","on","EVENT_INIT","animationManager","registerSystem","PRIORITY_SYSTEM"],"mappings":"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"}