{"version":3,"sources":["../../../../../../../../../cocos/audio/assets/player-web.ts"],"names":["clamp","sys","AudioPlayer","PlayingState","legacyCC","AudioManager","AudioManagerWeb","discardOnePlayingIfNeeded","_playingAudios","length","maxAudioChannel","audioToDiscard","oldestOneShotIndex","findIndex","audio","AudioBufferSourceNode","splice","shift","stop","AudioPlayerWeb","info","_startTime","_offset","_volume","_loop","_currentTimer","_nativeAudio","_context","_sourceNode","_gainNode","_startInvoked","_onEndedCB","_onGestureCB","_onGestureProceedCB","audioSupport","__audioSupport","nativeAudio","context","createBufferSource","createGain","connect","destination","_onEnded","bind","_onGesture","_onGestureProceed","state","resume","game","canvas","addEventListener","play","_state","PLAYING","pause","setCurrentTime","_blocking","_interrupted","_doPlay","_doStop","currentTime","STOPPED","clearInterval","playOneShot","volume","err","console","error","_manager","gainNode","gain","value","sourceNode","buffer","loop","start","addPlaying","onended","removePlaying","val","duration","_duration","getCurrentTime","setVolume","immediate","setTargetAtTime","e","getVolume","setLoop","getLoop","destroy","director","once","Director","EVENT_AFTER_UPDATE","_playAndEmit","window","setInterval","off","_clip","emit","removeEventListener","then"],"mappings":"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"}