{"version":3,"sources":["../../../../../../../../../cocos/physics/cocos/builtin-shared-body.ts"],"names":["Mat4","Quat","Vec3","intersect","BuiltinObject","PhysicsSystem","PhysicsGroup","fastRemoveAt","m4_0","v3_0","v3_1","quat_0","BuiltinSharedBody","getSharedBody","node","wrappedWorld","wrappedBody","key","uuid","newSB","sharedBodesMap","has","get","g","DEFAULT","m","instance","collisionMatrix","collisionFilterGroup","collisionFilterMask","set","rigidBody","group","_id","v","index","world","bodies","length","addSharedBody","syncInitial","isRemove","shapes","removeSharedBody","ref","destroy","idCounter","intersects","body","i","shapeA","j","shapeB","collider","needTriggerEvent","resolve","worldShape","shapeArr","push","addShape","shape","indexOf","removeShape","syncSceneToPhysics","hasChangedFlags","getWorldMatrix","worldPosition","worldRotation","worldScale","transform","Map"],"mappings":";;;;;;;;;;;;;AA8BSA,MAAAA,I,oBAAAA,I;AAAMC,MAAAA,I,oBAAAA,I;AAAMC,MAAAA,I,oBAAAA,I;;AACZC,MAAAA,S,wBAAAA,S;;AAEAC,MAAAA,a,0BAAAA,a;;AAIAC,MAAAA,a,qBAAAA,a;;AACAC,MAAAA,Y,2BAAAA,Y;;AACAC,MAAAA,Y,qBAAAA,Y;;;AAEHC,MAAAA,I,GAAO,IAAIR,IAAJ,E;AACPS,MAAAA,I,GAAO,IAAIP,IAAJ,E;AACPQ,MAAAA,I,GAAO,IAAIR,IAAJ,E;AACPS,MAAAA,M,GAAS,IAAIV,IAAJ,E;AAEf;AACA;AACA;;mCACaW,iB;;;0BAGFC,a,GAAP,uBAAsBC,IAAtB,EAAkCC,YAAlC,EAA8DC,WAA9D,EAA8F;AAC1F,cAAMC,GAAG,GAAGH,IAAI,CAACI,IAAjB;AACA,cAAIC,KAAJ;;AACA,cAAIP,iBAAiB,CAACQ,cAAlB,CAAiCC,GAAjC,CAAqCJ,GAArC,CAAJ,EAA+C;AAC3CE,YAAAA,KAAK,GAAGP,iBAAiB,CAACQ,cAAlB,CAAiCE,GAAjC,CAAqCL,GAArC,CAAR;AACH,WAFD,MAEO;AACHE,YAAAA,KAAK,GAAG,IAAIP,iBAAJ,CAAsBE,IAAtB,EAA4BC,YAA5B,CAAR;AACA,gBAAMQ,CAAC,GAAGjB,YAAY,CAACkB,OAAvB;AACA,gBAAMC,CAAC,GAAGpB,aAAa,CAACqB,QAAd,CAAuBC,eAAvB,CAAuCJ,CAAvC,CAAV;AACAJ,YAAAA,KAAK,CAACS,oBAAN,GAA6BL,CAA7B;AACAJ,YAAAA,KAAK,CAACU,mBAAN,GAA4BJ,CAA5B;AACAb,YAAAA,iBAAiB,CAACQ,cAAlB,CAAiCU,GAAjC,CAAqChB,IAAI,CAACI,IAA1C,EAAgDC,KAAhD;AACH;;AACD,cAAIH,WAAJ,EAAiB;AACbG,YAAAA,KAAK,CAACH,WAAN,GAAoBA,WAApB;AACA,gBAAMO,EAAC,GAAGP,WAAW,CAACe,SAAZ,CAAsBC,KAAhC;AACA,gBAAMP,EAAC,GAAGpB,aAAa,CAACqB,QAAd,CAAuBC,eAAvB,CAAuCJ,EAAvC,CAAV;AACAJ,YAAAA,KAAK,CAACS,oBAAN,GAA6BL,EAA7B;AACAJ,YAAAA,KAAK,CAACU,mBAAN,GAA4BJ,EAA5B;AACH;;AACD,iBAAON,KAAP;AACH,S;;;;8BAES;AACN,mBAAO,KAAKc,GAAZ;AACH;AAED;AACJ;AACA;AACA;AACA;;;;4BACiBC,C,EAAY;AACrB,gBAAIA,CAAJ,EAAO;AACH,kBAAI,KAAKC,KAAL,GAAa,CAAjB,EAAoB;AAChB,qBAAKA,KAAL,GAAa,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,MAA/B;AACA,qBAAKF,KAAL,CAAWG,aAAX,CAAyB,IAAzB;AACA,qBAAKC,WAAL;AACH;AACJ,aAND,MAMO,IAAI,KAAKL,KAAL,IAAc,CAAlB,EAAqB;AACxB,kBAAMM,QAAQ,GAAI,KAAKC,MAAL,CAAYJ,MAAZ,KAAuB,CAAzC;;AAEA,kBAAIG,QAAJ,EAAc;AACV,qBAAKN,KAAL,GAAa,CAAC,CAAd;AACA,qBAAKC,KAAL,CAAWO,gBAAX,CAA4B,IAA5B;AACH;AACJ;AACJ;;;4BAEcT,C,EAAY;AACvB;AACAA,YAAAA,CAAC,GAAG,KAAKU,GAAL,EAAH,GAAgB,KAAKA,GAAL,EAAjB;;AACA,gBAAI,KAAKA,GAAL,KAAa,CAAjB,EAAoB;AAAE,mBAAKC,OAAL;AAAiB;AAC1C;AAED;;;;AAWA,mCAAqB/B,IAArB,EAAiCsB,KAAjC,EAAsD;AAAA;;AAClD;AADkD,gBATrCH,GASqC;AAAA,gBAR9CE,KAQ8C,GARtC,CAAC,CAQqC;AAAA,gBAP9CS,GAO8C,GAPxC,CAOwC;AAAA,gBAL7C9B,IAK6C;AAAA,gBAJ7CsB,KAI6C;AAAA,gBAH7CM,MAG6C,GAHpB,EAGoB;AAAA,gBAFtD1B,WAEsD,GAFf,IAEe;AAElD,gBAAKiB,GAAL,GAAWrB,iBAAiB,CAACkC,SAAlB,EAAX;AACA,gBAAKhC,IAAL,GAAYA,IAAZ;AACA,gBAAKsB,KAAL,GAAaA,KAAb;AAJkD;AAKrD;;;;eAEDW,U,GAAA,oBAAYC,IAAZ,EAAqC;AACjC,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKP,MAAL,CAAYJ,MAAhC,EAAwCW,CAAC,EAAzC,EAA6C;AACzC,gBAAMC,MAAM,GAAG,KAAKR,MAAL,CAAYO,CAAZ,CAAf;;AACA,iBAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACN,MAAL,CAAYJ,MAAhC,EAAwCa,CAAC,EAAzC,EAA6C;AACzC,kBAAMC,MAAM,GAAGJ,IAAI,CAACN,MAAL,CAAYS,CAAZ,CAAf;;AACA,kBAAID,MAAM,CAACG,QAAP,CAAgBC,gBAAhB,IAAoCF,MAAM,CAACC,QAAP,CAAgBC,gBAAxD,EAA0E;AACtE,oBAAInD,SAAS,CAACoD,OAAV,CAAkBL,MAAM,CAACM,UAAzB,EAAqCJ,MAAM,CAACI,UAA5C,CAAJ,EAA6D;AACzD,uBAAKpB,KAAL,CAAWqB,QAAX,CAAoBC,IAApB,CAAyBR,MAAzB;AACA,uBAAKd,KAAL,CAAWqB,QAAX,CAAoBC,IAApB,CAAyBN,MAAzB;AACH;AACJ;AACJ;AACJ;AACJ,S;;eAEDO,Q,GAAA,kBAAUC,KAAV,EAAqC;AACjC,cAAMX,CAAC,GAAG,KAAKP,MAAL,CAAYmB,OAAZ,CAAoBD,KAApB,CAAV;;AACA,cAAIX,CAAC,GAAG,CAAR,EAAW;AACP,iBAAKP,MAAL,CAAYgB,IAAZ,CAAiBE,KAAjB;AACH;AACJ,S;;eAEDE,W,GAAA,qBAAaF,KAAb,EAAwC;AACpC,cAAMX,CAAC,GAAG,KAAKP,MAAL,CAAYmB,OAAZ,CAAoBD,KAApB,CAAV;;AACA,cAAIX,CAAC,IAAI,CAAT,EAAY;AACR1C,YAAAA,YAAY,CAAC,KAAKmC,MAAN,EAAcO,CAAd,CAAZ;AACH;AACJ,S;;eAEDc,kB,GAAA,8BAAsB;AAClB,cAAI,KAAKjD,IAAL,CAAUkD,eAAd,EAA+B;AAC3B,iBAAKlD,IAAL,CAAUmD,cAAV,CAAyBzD,IAAzB;AACAC,YAAAA,IAAI,CAACqB,GAAL,CAAS,KAAKhB,IAAL,CAAUoD,aAAnB;AACAvD,YAAAA,MAAM,CAACmB,GAAP,CAAW,KAAKhB,IAAL,CAAUqD,aAArB;AACAzD,YAAAA,IAAI,CAACoB,GAAL,CAAS,KAAKhB,IAAL,CAAUsD,UAAnB;;AACA,iBAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKP,MAAL,CAAYJ,MAAhC,EAAwCW,CAAC,EAAzC,EAA6C;AACzC,mBAAKP,MAAL,CAAYO,CAAZ,EAAeoB,SAAf,CAAyB7D,IAAzB,EAA+BC,IAA/B,EAAqCE,MAArC,EAA6CD,IAA7C;AACH;AACJ;AACJ,S;;eAED8B,W,GAAA,uBAAe;AACX,eAAK1B,IAAL,CAAUmD,cAAV,CAAyBzD,IAAzB;AACAC,UAAAA,IAAI,CAACqB,GAAL,CAAS,KAAKhB,IAAL,CAAUoD,aAAnB;AACAvD,UAAAA,MAAM,CAACmB,GAAP,CAAW,KAAKhB,IAAL,CAAUqD,aAArB;AACAzD,UAAAA,IAAI,CAACoB,GAAL,CAAS,KAAKhB,IAAL,CAAUsD,UAAnB;;AACA,eAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKP,MAAL,CAAYJ,MAAhC,EAAwCW,CAAC,EAAzC,EAA6C;AACzC,iBAAKP,MAAL,CAAYO,CAAZ,EAAeoB,SAAf,CAAyB7D,IAAzB,EAA+BC,IAA/B,EAAqCE,MAArC,EAA6CD,IAA7C;AACH;AACJ,S;;eAEOmC,O,GAAR,mBAAmB;AACfjC,UAAAA,iBAAiB,CAACQ,cAAlB,WAAwC,KAAKN,IAAL,CAAUI,IAAlD;AACC,eAAKJ,IAAN,GAAqB,IAArB;AACC,eAAKsB,KAAN,GAAsB,IAAtB;AACC,eAAKM,MAAN,GAAuB,IAAvB;AACH,S;;;QApIkCtC,a;;AAA1BQ,MAAAA,iB,CACeQ,c,GAAiB,IAAIkD,GAAJ,E;AADhC1D,MAAAA,iB,CA2DMkC,S,GAAY,C"}