{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/load.ts"],"names":["load","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","__exclude__","Object","create","output","forEach","item","cb","subTask","Task","onProgress","onComplete","err","result","isFinish","legacyCC","assetManager","force","EDITOR","error","message","stack","dispatch","push","recycle","loadOneAssetPipeline","async","clear","gatherAsset","loadDepends","asset","init","uuid","id","config","__asyncLoadAssets__","cacheAsset","depends","addRef","getDepends","repeatItem","content","callbacks","onError","prototype","decRef","Array","isArray","map","dependAsset","Asset","_uuid","__nativeDepend__","setProperties","onLoaded","__onLoadedInvoked__","e","files","remove","parsed","cache","i","l","pipeline","packManager","parser","Pipeline","assets","checkCircleReference","fetch","isNative","file","reloadAsset","has","data","parse","exclude","ext","get","__uuid__"],"mappings":"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"}