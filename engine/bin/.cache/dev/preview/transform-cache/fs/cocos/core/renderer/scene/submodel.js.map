{"version":3,"sources":["../../../../../../../../../../cocos/core/renderer/scene/submodel.ts"],"names":["RenderPriority","BatchingSchemes","DSPool","IAPool","SubModelPool","SubModelView","NULL_HANDLE","DescriptorSetInfo","legacyCC","_dsInfo","SubModel","_device","_passes","_subMesh","_patches","_handle","_priority","DEFAULT","_inputAssembler","_descriptorSet","initialize","subMesh","passes","patches","director","root","device","alloc","_flushPassInfo","batchingScheme","VB_MERGING","genFlatBuffers","layout","localSetLayout","dsHandle","iaHandle","iaInfo","set","PRIORITY","INPUT_ASSEMBLER","DESCRIPTOR_SET","SUB_MESH","handle","get","initPlanarShadowShader","pipeline","shadowInfo","shadows","shaderHandle","getPlanarShader","PLANAR_SHADER","destroy","free","update","i","length","pass","onPipelineStateChanged","beginChangeStatesSilently","tryCompile","endChangeStatesSilently","onMacroPatchesStateChanged","PASS_COUNT","passOffset","PASS_0","shaderOffset","SHADER_0","getShaderVariant","val"],"mappings":"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"}