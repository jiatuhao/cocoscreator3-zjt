{"version":3,"sources":["../../../../../../../../../cocos/2d/renderer/draw-batch.ts"],"names":["NULL_HANDLE","BatchPool2D","BatchView2D","PassPool","Layers","legacyCC","Pass","UI_VIS_FLAG","Enum","NONE","UI_3D","DrawBatch2D","_handle","get","INPUT_ASSEMBLER","handle","set","DESCRIPTOR_SET","VIS_FLAGS","vis","_passes","bufferBatch","camera","renderScene","model","texture","sampler","useLocalData","isStatic","textureHash","samplerHash","alloc","destroy","ui","length","passes","i","_destroyHandle","free","clear","hInputAssembler","hDescriptorSet","visFlags","fillPasses","mat","dss","dssHash","bs","bsHash","patches","PASS_COUNT","passOffset","PASS_0","shaderOffset","SHADER_0","hashFactor","director","root","mtlPass","passInUse","depthStencilState","blendState","update","_initPassFromTarget","getShaderVariant"],"mappings":"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"}