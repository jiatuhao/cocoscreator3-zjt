{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-command-buffer.ts"],"names":["CommandBuffer","BufferUsageBit","CommandBufferType","Rect","Viewport","WebGLCmd","WebGLCmdBeginRenderPass","WebGLCmdBindStates","WebGLCmdCopyBufferToTexture","WebGLCmdDraw","WebGLCmdPackage","WebGLCmdUpdateBuffer","WebGLCommandBuffer","cmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curViewport","_curScissor","_curLineWidth","_curDepthBias","_curBlendConstants","_curDepthBounds","_curStencilWriteMask","_curStencilCompareMask","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSet","offsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","constantFactor","clamp","slopeFactor","setBlendConstants","blendConstants","Array","prototype","apply","setDepthBound","minDepthBounds","maxDepthBounds","minBounds","maxBounds","setStencilWriteMask","face","writeMask","setStencilCompareMask","reference","compareMask","draw","PRIMARY","SECONDARY","drawCmdPool","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","buffSize","buff","usage","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGLCmdBuff","c","array","refCount","bindStatesCmds","concat","bindStatesCmd","bindStatesCmdPool","gpuDescriptorSets","depthBias","depthBounds","stencilWriteMask","stencilCompareMask","BIND_STATES"],"mappings":"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"}