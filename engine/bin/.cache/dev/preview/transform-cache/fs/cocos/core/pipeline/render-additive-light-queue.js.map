{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/render-additive-light-queue.ts"],"names":["cullSphereLight","light","model","worldBounds","intersect","aabbWithAABB","aabb","cullSpotLight","aabbFrustum","frustum","getLightPassIndices","subModels","lightPassIndices","length","hasValidLightPass","j","passes","lightPassIndex","k","phase","_phaseID","push","BatchedBuffer","BatchingSchemes","InstancedBuffer","PipelineStateManager","DSPool","ShaderPool","PassView","PassPool","SubModelPool","SubModelView","Vec3","nextPow2","Mat4","Vec4","Color","Sphere","BufferUsageBit","MemoryUsageBit","BufferInfo","BufferViewInfo","Filter","Address","DescriptorSetInfo","Pool","RenderBatchedQueue","RenderInstancedQueue","getPhaseID","LightType","SetIndex","UBOForwardLight","UBOGlobal","UBOShadow","UBOCamera","UNIFORM_SHADOWMAP_BINDING","UNIFORM_SPOT_LIGHTING_MAP_TEXTURE_BINDING","legacyCC","genSamplerHash","samplerLib","builtinResMgr","updatePlanarPROJ","_samplerInfo","LINEAR","NONE","CLAMP","_lightPassPool","subModel","passIdx","dynamicOffsets","lights","_vec4Array","Float32Array","_sphere","create","_dynamicOffsets","_lightIndices","_matShadowView","_matShadowViewProj","_lightPassIndices","RenderAdditiveLightQueue","pipeline","_pipeline","_device","_validLights","_lightPasses","_descriptorSetMap","Map","_globalUBO","COUNT","_cameraUBO","_shadowUBO","_lightBufferCount","_lightBufferStride","_lightBufferElementCount","_lightBuffer","_firstLightBufferView","_lightBufferData","_isHDR","_fpScale","_renderObjects","_instancedQueue","_batchedQueue","_lightMeterScale","_sampler","device","isHDR","fpScale","renderObjects","Math","ceil","SIZE","uboOffsetAlignment","BYTES_PER_ELEMENT","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","shadowMapSamplerHash","getSampler","clear","i","lp","freeArray","destroy","descriptorSets","Array","from","values","descriptorSet","getBuffer","BINDING","getTexture","gatherLightPasses","camera","cmdBuff","validLights","_gatherValidLights","_updateUBOs","_updateLightDescriptorSet","ro","_lightCulling","lightPassIdx","pass","bindBuffer","update","_addRenderQueue","uploadBuffers","recordCommandBuffer","renderPass","shader","get","handle","SHADER_0","ia","inputAssembler","pso","getOrCreatePipelineState","matDS","DESCRIPTOR_SET","localDS","bindPipelineState","bindDescriptorSet","MATERIAL","bindInputAssembler","_getOrCreateDescriptorSet","GLOBAL","LOCAL","draw","scene","sphereLights","baked","set","position","x","y","z","range","sphereFrustum","spotLights","l","isCulled","type","SPHERE","SPOT","batchingScheme","INSTANCING","idx","buffer","merge","instancedAttributes","queue","add","VB_MERGING","alloc","shadowInfo","shadows","mainLight","_updateGlobalDescriptorSet","toArray","shadowColor","SHADOW_COLOR_OFFSET","SHADOW_INFO_OFFSET","size","pcf","bias","invert","node","getWorldMatrix","perspective","spotAngle","aspect","multiply","MAT_LIGHT_VIEW_PROJ_OFFSET","shadowFrameBufferMap","has","texture","colorTextures","bindTexture","updateBuffer","root","director","fv","shadingWidth","floor","width","shadingHeight","height","TIME_OFFSET","cumulativeTime","frameTime","getTotalFrames","SCREEN_SIZE_OFFSET","NATIVE_SIZE_OFFSET","_updateCameraUBO","ambient","shadingScale","fog","cv","SCREEN_SCALE_OFFSET","exposure","EXPOSURE_OFFSET","direction","MAIN_LIT_DIR_OFFSET","color","MAIN_LIT_COLOR_OFFSET","useColorTemperature","colorTempRGB","colorTemperatureRGB","illuminance","UNIT_Z","ZERO","matView","MAT_VIEW_OFFSET","worldMatrix","MAT_VIEW_INV_OFFSET","matProj","MAT_PROJ_OFFSET","matProjInv","MAT_PROJ_INV_OFFSET","matViewProj","MAT_VIEW_PROJ_OFFSET","matViewProjInv","MAT_VIEW_PROJ_INV_OFFSET","CAMERA_POS_OFFSET","projectionSignY","screenSpaceSignY","window","hasOffScreenAttachments","UVSpaceSignY","skyColor","colorArray","skyIllum","AMBIENT_SKY_OFFSET","albedoArray","AMBIENT_GROUND_OFFSET","enabled","GLOBAL_FOG_COLOR_OFFSET","GLOBAL_FOG_BASE_OFFSET","fogStart","fogEnd","fogDensity","GLOBAL_FOG_ADD_OFFSET","fogTop","fogRange","fogAtten","resize","initialize","offset","LIGHT_POS_OFFSET","LIGHT_SIZE_RANGE_ANGLE_OFFSET","tempRGB","luminance","LIGHT_COLOR_OFFSET","LIGHT_DIR_OFFSET","createDescriptorSet","descriptorSetLayout","globalUBO","cameraBUO","shadowBUO","bindSampler","getGFXTexture"],"mappings":"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"}